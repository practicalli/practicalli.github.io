{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Practicalli Software Engineering Guides","text":"<p>Books, articles and live coding videos covering software development practices and tools, including Lean and Agile practices along with a specialisation in Functional programming using the  Clojure programming language</p> <p></p> <p> </p> <p> </p>"},{"location":"#sponsor-practicalli","title":"Sponsor Practicalli","text":"<p>All sponsorship funds are used to support the continued development of Practicalli series of books and videos, although most work is done at personal cost and time.</p> <p>Thanks to Cognitect, Nubank and a wide range of other sponsors from the Clojure community for your continued support</p>"},{"location":"#free-software-engineering-books","title":"Free Software Engineering Books","text":"<p>Practical guides across the full spectrum of software development.</p> <p> Practicalli Engineering Playbook</p> <p>Practical guides to Clojure programming and development workflows</p> <p> Practicalli Clojure  Practicalli Clojure Web Services</p> <p>Development tools</p> <p> Practicalli Spacemacs  Practicalli Neovim</p>"},{"location":"#open-source-projects-and-tools","title":"Open Source Projects and Tools","text":"<p> Clojure Project Templates  Gameboard API Clojure Webapp</p>"},{"location":"#editors-and-tools-configuration","title":"Editors and Tools Configuration","text":"<p> Clojure CLI Config  Clojure LSP Config</p> <p> Astro5 Neovim Config  Spacemacs Emacs Config</p> <p> dotfiles - git, kitty, ssh, zsh, docker, aws, regolith, hyprland</p>"},{"location":"#website-status","title":"Website Status","text":""},{"location":"books/","title":"Practicalli Books","text":""},{"location":"books/#engineering-playbook","title":"Engineering Playbook","text":"<p>Practical guides for specific tools and practices to support software development.</p> <p></p> <p> Practicalli Engineering Playbook</p>"},{"location":"books/#clojure","title":"Clojure","text":"<p>Learn the Clojure language through REPL driven development using Clojure CLI tools (deps.edn). Use a rich set of community tools, including Rebel readline Terminal UI, Portal and Reveal data browsers and tools to manage all aspects of Clojure projects.</p> <p>Practice Clojure by solving challenges with examples of different approaches. Encode the design and avoid regressions by writing unit tests and specifications for generative testing.</p> <p></p> <p> Practicalli Clojure  Clojure CLI Config</p>"},{"location":"books/#clojure-web-services","title":"Clojure Web Services","text":"<p>Build production level server-side web services and API's in Clojure.</p> <p>Ring converts each HTTP request to a hash-map. Define routes to middleware &amp; handler functions to process requests and return a Ring response.</p> <p>Data formats are managed by coercion and content negotiation, optionally using specifications to ensure data validation.</p> <p>OpenAPI (swagger) is used for self-documenting APIs and testing.</p> <p> </p> <p> Practicalli Clojure Web Services</p>"},{"location":"books/#spacemacs-emacs","title":"Spacemacs (Emacs)","text":"<p>Powerful editing with Emacs and Vim multi-modal editing (Evil). A mnemonic menu simplifies the learning curve.</p> <p>Install a full Clojure development experience with two Git clone commands.</p> <p></p> <p> Practicalli Spacemacs  Spacemacs Config</p>"},{"location":"books/#neovim","title":"Neovim","text":"<p>Neovim for effective Clojure development with Conjure and Clojure LSP (nvim-treesitter). With a mnemonic menu to simplify the learning curve.</p> <ul> <li>Conjure</li> <li>AstroNvim &amp; AstroNvim Community</li> </ul> <p></p> <p> Practicalli Neovim  Astro5 Neovim Config</p>"},{"location":"books/#under-development","title":"Under development","text":"<p>Practicalli books evolve from commercial experiences and from teaching in the community.  The following books are work in progress or need significant updates.</p>"},{"location":"books/#clojurescript","title":"ClojureScript","text":"<p>build single page apps (SPA's), dynamic UI's and mobile apps with responsive design</p> <p></p> <p> Practicalli ClojureScript</p>"},{"location":"clojure-community/","title":"Clojure Community","text":""},{"location":"clojure-community/#community-support","title":"Community Support","text":"<p>There are several ways you can get help from the Clojure community.  The most active tools include:</p> <ul> <li>ask.clojure.org - official forum with the Clojure maintainers, help shape the development of Clojure</li> <li>Clojurian Slack community - very active community chat for immediate / shot term discussions</li> <li>Clojurians Zulip - active community chat with topic-based threading and full history, strong data science community and archive of most slack channels</li> <li>ClojureVerse - community forum for friendly short to long-term discussions</li> <li>New Clojurians: Ask Anything - simple web based threaded discussions</li> </ul> <p>General website such as redit/clojure are useful ways for the Clojure community to reach out to the more general development community.</p> <p>Hundreds of Clojure related videos are available on Clojure.tv, the London Clojurians community and Practicalli YouTube channels.</p>"},{"location":"clojure-community/#askclojureorg","title":"ask.clojure.org","text":"<p>An official place to ask questions about Clojure, ClojureScript, ClojureCLR, Clojure contrib libraries and any other Clojure topic.  This forum is used by the Clojure maintainer team and so discussions can shape the direction of Clojure.</p> <p></p> <p>Questions must have one or more of the fixed categories, enabling discussions to be simpler to find and engage with.  Questions can also have tags which are an extensible set of attributes, with several special tags</p> <ul> <li><code>problem</code> - problem in the language or library</li> <li><code>request</code> - request for enhancement in the language or library</li> <li><code>jira</code> - a jira ticket has been raised for development, Jira link included in an answer</li> </ul> <p>An account is required to ask questions, using GitHub authentication. Once logged in, click the user name in the upper right corner and add an email address if notifications are required.</p> <p>Account holders may vote on both questions and answers. Votes are used to inform decisions about future releases of Clojure, ClojureScript, libraries, etc.</p> <p>The @AskClojure twitter account tweets new questions posted to the ask.clojure.org forum on its feed, providing another channel to keep track of discussions.</p>"},{"location":"clojure-community/#clojurians-slack-channels","title":"Clojurians Slack channels","text":"<p>clojurians.net provides a self-service way to sign up to the Clojurians slack community, which contains many channels where you can get help.  The community is very active with a relatively quick response time in the most popular channels, especially #beginners.</p> <p>Discussions are only visible for a few days as the community uses the free Slack plan, there is no way to scroll back through history in Slack once its archived.  A community log of the discussions is provided by the ClojureVerse team and many channels are mirrored by the Clojurians Zulip community.</p> <p>Channels of note include:</p> <ul> <li><code>#beginners</code> - channel for help on most topics to do with Clojure, occasionally re-directed to focused channels</li> <li><code>#announcements</code> - occasional project / library announcements only. Use a threaded reply or jump to specific topic channel for follow-on discussions.</li> <li><code>#news-and-articles</code> - published content related to Clojure development, basically everything that is not a project/library announcement</li> <li><code>#events</code> taking place around the world, from meetups to conferences and anything in-between</li> <li><code>#jobs</code> <code>#remote-jobs</code> for posting legitimate job vacancies (and their location), with <code>#jobs-discuss</code> for experiences and advice on finding, getting and doing a job with Clojure</li> <li><code>#spacemacs</code> <code>#calva</code> <code>#chlorine</code> - editor specific channel with questions about using those tools, customising and developing features</li> <li><code>#cider</code> <code>#clj-kondo</code> <code>#figwheel-main</code> <code>#kaocha</code> - Clojure tooling discussions (there are many more)</li> <li><code>#clojuredesign-podcast</code> <code>#defnpodcast</code> <code>#practicalli</code> - supporting live and recorded broadcasts</li> <li><code>#admin-announcements</code> - messages from the administrators of the Clojurians Slack channel</li> <li><code>#community-development</code> community growth &amp; support, reporting code of conduct breaches to the administrators</li> </ul> <p>All discussions in Slack are bound by the Clojurians community code of conduct</p> <p>Post only in one specific channel rather than potentially spamming other channels.  If there are valid exceptions, then use a short summary or link to the original post or delete the original post and add it to another channel.</p>"},{"location":"clojure-community/#clojurians-zulip","title":"Clojurians Zulip","text":"<p>Discussions history is easier to follow in the Clojurians Zulip than in Slack, especially where discussions take place over time, thanks to the Zulip topic-based threading.  Slack does have discussion threading, but this is often not used as conversation don't last in Slack.</p> <p></p> <p>The Clojurians Zulip is very actively used, although not yet quite as busy as Slack.  There is a strong data science community on Zulip and is also used for SciCoj hackathons and other (virtual) events.  It would be great to see more Clojurians using Zulip either via the website or the excellent Zulip app.</p> <p>Discussions in Clojurians Zulip are also available indefinitely, whereas Slack conversations are only visible for a few days.   If a zulipchat bot has been added to a channel in the Clojurians Slack, that channel discussion history is available as a full-text-searchable archive.  To search the history of the #beginners channel, use <code>/</code> to start a search and use the query:</p> <pre><code>stream:slack-archive topic:beginners\n</code></pre> <p>An account is required and authentication is via GitHub, GitLab, Google or username/password.</p>"},{"location":"clojure-community/#clojureverse","title":"ClojureVerse","text":"<p>A Clojure community forum that is enjoyable to use with a rich user interface (topics, participant icons, etc.).  Responses may not be as immediate as Slack, however, it is far easier to track discussions as they evolve and review past discussions.</p> <p>All the usual forum features are available and direct and private messages can be sent between user accounts.</p> <p></p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>"},{"location":"clojure-repl-workflow/","title":"Clojure REPL Workflow","text":"<p>Practical guide to the Clojure REPL workflow</p> <p></p> <ul> <li>Start REPL in terminal (or editor)</li> <li> <p>add custom <code>user</code> namespace</p> </li> <li> <p>Evaluate code in editor</p> </li> <li>Rich Comment block</li> <li> <p>Design journal</p> </li> <li> <p>Unit testing</p> </li> <li> <p>Specifications</p> </li> <li>data specs</li> <li> <p>function definition specs</p> </li> <li> <p>Start long running process or system components from REPL</p> </li> <li> <p>Inspect evaluation results in Portal</p> </li> <li> <p>Clean REPL state</p> </li> </ul>"},{"location":"code-of-respect/","title":"Practicalli Code Of Respect","text":"<p>A \"code of respect\" is a set of principles and guidelines outlining how individuals should interact with others, promoting courtesy, kindness, and consideration.</p> <p>The code emphasizes treating everyone with dignity and respect, regardless of differences or personal circumstances.</p> <p>Essentially, a code of respect aims to create a positive and inclusive environment where people feel valued and understood.</p> <p>The Practicalli code of respect is a simplification of the  Practicalli Code of Conduct</p>"},{"location":"code-of-respect/#key-elements-of-a-code-of-respect","title":"Key Elements of a Code of Respect:","text":"<ul> <li>Empathy and Kindness: Being mindful of others' feelings and showing compassion and understanding.</li> <li>Respect for Diverse Opinions: Acknowledging and valuing different viewpoints, even when they differ from one's own.</li> <li>Constructive Feedback: Giving and receiving feedback in a way that is helpful and respectful, rather than hurtful or dismissive.</li> <li>Taking Responsibility: Acknowledging mistakes and apologizing when necessary, learning from the experience.</li> <li>Focus on Community: Considering the well-being of the whole group and making decisions that are beneficial for everyone.</li> <li>Dignity and Fairness: Treating everyone with equal respect and fairness, regardless of their background or status.</li> <li>Professional Tone: Maintaining appropriate and respectful communication in written and verbal form.</li> <li>Non-Discrimination: Avoiding prejudice and bias in interactions.</li> <li>Ethical Conduct: Adhering to ethical principles and avoiding behaviors that could harm others</li> </ul>"},{"location":"code-of-respect/#related","title":"Related","text":"<ul> <li>Code Of Respect - Devoxx UK</li> <li>Code of Respect - SOOCon 2025</li> <li>Code of conduct - Wikipedia</li> <li>Code Of Conduct - Gov.UK</li> </ul>"},{"location":"commercial-projects/","title":"Commercial Projects","text":"<p>Experiences from Clojure related commercial projects.</p>"},{"location":"commercial-projects/#fraud-detection-data-pipeline","title":"Fraud Detection Data Pipeline","text":"<p>Clojure Engineering in financial services, working with amazing people to deliver Fraud Detection using Machine Learning models</p> <p>Building a data pipeline with a range of service orchestration (internal and external) to supply comprehensive, accurate and timely data for processing via scientific models. Enabling the data science models to be effectively trained and instantly detect fraudulent activity within Fintech transactions</p> <p>Supported improvements in DevOps and Engineering workflows and practices, defining a range of common practices across the organisation.</p> <p></p> <p></p>"},{"location":"commercial-projects/#sports-data","title":"Sports Data","text":"<p>Working with various stakeholders to create Clojure microservices and Kafka based data processing pipeline that generates a GraphQL API of sports statistics from live match events.</p> <p>Working closely with StatsBomb customer success and founders to meet the needs of our customers and provide technical assistance using the data API.</p> <p>Designed and constructed an Authorization and entitlement management system for the GraphQL API to secure our comprehensive sports statistics for customers and 3rd party applications. Wrote detailed user guides for customers to use the GraphQL API, configure 3rd party applications and generate tokens to access the service.</p>"},{"location":"commercial-projects/#data-enrichment-pipeline","title":"Data enrichment pipeline","text":"<p>Events in a sports match are scraped manually from video to create a baseline of play.</p> <p>Events data is enriched based on the surrounding events.</p> <p>A complete picture of all the actions in the game are generated for analytics.</p> <p>Individual match data is aggregated to provide player and team statistics throughout the sports year.</p> <p>All data is stored in a Postgresql database and Hasura used to generate a GraphQL API.</p> <p></p>"},{"location":"commercial-projects/#graphql-authentication","title":"GraphQL Authentication","text":"<p>Hasura has access rules to define which data can be accessed, however, there was no direct support for OAuth token validation.</p> <p>Hasura did provide a webhook so that each request could query an API to validate every request.</p> <p>A Clojure API was created using reitit and JWT middleware, checking customer tokens via OAuth.</p> <p>Hasura was used to generate rules to control access</p> <p>The Clojure API returned an x-hasura header if the access token was valid.  The hasura token contained data to be used by the hasura rules to control access to the graphql result.</p> <p>The Clojure API checked the token from every request made to the GraphQL API.</p> <p>Integrant was used to manage the software components in the Clojure web service.</p> <p></p>"},{"location":"commercial-projects/#data-ingestion-and-distribution","title":"Data ingestion and distribution","text":"<p>Leading a globally distributed set of developments, team building the next generation in data services to support the Equities business at Citi.</p> <p>Responsible for services consumed by dozens of other technical stakeholders, liaising with many other development teams to understand their requirements and challenges. Working closely with those teams to enhance solutions provided by the teams I was responsible for. </p> <p>Involved in software development, testing, DevOps and even operations resouce management (acquiring physical servers &amp; hard drives for Oracle database servers)</p> <p>I defined standards and practices for the team within Citi tooling and regulation constraints, shaping the use of development tools and services and driving architecture discussions that shaped technical decisions within the team. </p> <p>The main technology stack is based on Clojure along with a myriad of enterprise technology services and products to create a global system processing millions of transactions per day. I also advocate functional programming and the Clojure programming language throughout the organisation.</p> <p>Leading the move to Cloud Infrastructure for our systems and start to evolve the core product architecture into an immutable event stream with Kafka.</p> <p>Citi is a leading financial services company with a truly global reach \u2013 200 million customer accounts in more than 160 countries.</p>"},{"location":"contributing/","title":"Contributing to Practicalli","text":"<p> Practicalli Kanban board - GitHub Project</p> <p>Practicalli welcomes ideas and constructive feedback for content.  Please reach out to the Practicalli team before making a contribution to avoid disappointment.</p> <p>All content and interaction with any persons or systems must be done so with respect and within the Practicalli Code of Conduct.</p> <p>By submitting content ideas and corrections you are to that work becoming the copyright of Practicalli and published under the  Creative Commons Attribution ShareAlike 4.0 International license.  Attribution will be detailed via GitHub contributors, pull request and issue history.</p> <p>Reaching out to the Practicalli Team before creating a pull request</p> <p> Raise an issue,  start a GitHub discussion or post a message on the #practicalli channel of Clojurians Slack community to avoid disappointment.</p>"},{"location":"contributing/#content-tools","title":"Content Tools","text":"<p>Practicalli books and websites are written in markdown and uses  Material for MkDocs to  generate the published website via a GitHub workflow.  MkDocs can also run a local server using the <code>make docs</code> target from the <code>Makefile</code></p> <p>The README.md of each project contains install instructions for a local MkDocs server.</p>"},{"location":"contributing/#submit-and-issue-or-idea","title":"Submit and issue or idea","text":"<p>Each website and book has a link to its GitHub repository in the top-level navigation bar.</p> <p>Use the  Practicalli Kanban board to create an issue on any of the Practicalli GitHub repositories.</p>"},{"location":"contributing/#considering-a-pull-request","title":"Considering a Pull request?","text":"<p>Pull Request Commits must be cryptographically signed</p> <p>All commits contributed to Practicalli must be signed via a legitimate SSH or GPG key to avoid the risk of commit spoofing.</p> <p> Configure commit signing with SSH key - Practicalli Engineering</p> <p>All pull requests must include an entry in CHANGELOG.md or will not be merged.  A changelog entry allows the community to follow the changes.</p> <p>Each pull request will have a number of CI workflows run against the contribution, checking the format of the content and if a changelog entry has been provided.</p> <p>Please keep pull requests small and focused, as they are much quicker to review and easier to accept.  Ideally PR's should be for a specific page or at most a section.</p> <p>A PR with a list of changes across different sections will be closed without merging as these take considerable time to review.</p> <p>Issues such as grammar improvements are typically a sign of a rushed section that requires a rewrite, so a pull request to fix a typeographic error will probably not be merged.  Raise an issue, or post a thread in the  Clojurians Slack #practicall channel</p>"},{"location":"contributing/#thank-you-to-everyone-that-has-contributed","title":"Thank you to everyone that has contributed","text":"<p>A huge thank you to Rich Hickey and the team at Cognitect for creating and continually guiding the Clojure language.</p> <p>The Clojure community has been highly supportive of everyone using Clojure and I'd like to thank everyone for the feedback and contributions.  I would also like to thank everyone that has joined in with the London Clojurins community, ClojureBridgeLondon, Clojurians Slack community, Clojurians Zulip community and Clojureverse community.</p> <p>Thank you to everyone who sponsors the Practicalli websites and videos and for the Clojurists Together sponsorship, it helps me continue the work at a much faster pace.</p> <p>Special thanks to Bruce Durling for getting me into Cloure in the first place.</p> <p></p>"},{"location":"oss-projects/","title":"Practicalli Open Source Projects","text":"<p>Projects created and maintained by Practicalli, along with contributions to other Open Source Software projects.</p> <p>Work in progress</p>"},{"location":"oss-projects/#project-templates","title":"Project Templates","text":"<p>A series of production ready project templates for use with seancorfiled/deps-new.</p>"},{"location":"oss-projects/#clojure-cli-config","title":"Clojure CLI Config","text":"<p>Extensive set of aliases to extend the functionality of the Clojure CLI using Community libraries and tools.</p>"},{"location":"oss-projects/#neovim","title":"Neovim","text":"<p>Practicalli Neovim online book providing a guide to Neovim use, vim-style editing, source management and Clojure REPL workflow.</p>"},{"location":"oss-projects/#astro-5","title":"Astro 5","text":"<p>A Lua configuration for Neovim with a rich set of features and support for the complete Clojure Workflow.</p>"},{"location":"oss-projects/#othernvim","title":"Other.nvim","text":"<p>Added Clojure support with help from Dominic Monroe.</p>"},{"location":"oss-projects/#astro","title":"Astro","text":"<p>Neovim configuration with Clojure workflow support.</p>"},{"location":"oss-projects/#astrocommunity","title":"Astrocommunity","text":"<p>Clojure file runner (conjure) specification.</p> <p>Clojure pack specication with treesitter &amp; lsp support, nvim-treesitter-sexp (replaced after Neovim 0.11.0 released with parpar-nvim)</p> <p>Other.nvim specification</p> <p>parinfer-nvim specification</p> <p>paredit-nvim specification</p> <p>nvim-treesitter-sexp specification</p>"},{"location":"oss-projects/#nvim-config-fennel","title":"nvim-config-fennel","text":"<p>My initial use of Neovim was to write my own configuration, for which I chose the Fennel language as it was similar to Clojure and the author of Conjure had used Fennel to write it, using Aniseed plugin to make it easier.</p> <p>The Conjure author updated the approach to using Fennel by creating nfnl which generated lua files from fennel.  I chose not to re-write my config using nfnl as I had found AstroNvim provided far more features with a lot less effort and maintenance.</p>"},{"location":"oss-projects/#emacs","title":"Emacs","text":"<p>Emacs has several well-known community build configurations.  Spacemacs is the most used and has the most GitHub stars by a large margin.  Doom Emacs is popular when a very lean experience is preferred or heavy customisation.</p> <p>As an avid Emacs user when learning the Clojure programming language I wrote a comprehensive book on Software Development with Spacemacs, including a detailed section on Clojure REPL driven development.</p> <p>Practicalli Spacemacs book</p>"},{"location":"oss-projects/#spacemacs","title":"Spacemacs","text":"<p>Spacemacs is a community driven configuration for Emacs with a focus on consitent and discoverable use of all the Emacs features.</p> <p>Contributed 35 pull requests to the Spacemacs project and defined many of the Clojure key bindings.  Also updated the documentation around the use of Magit Forge and Git identity.</p> <p>Spacemacs remains the go-to configuration for Practicalli as its is so easy to use.</p>"},{"location":"oss-projects/#vs-code","title":"VS Code","text":""},{"location":"oss-projects/#vspacecode","title":"VSpaceCode","text":"<p>Clojure key bindings for Calva</p> <p>VSpaceCode book</p>"},{"location":"practicalli-editors/","title":"Practicalli Editor experiences","text":"<p>Many different editors have been used throughout the journey into Clojure since 2010.</p> <p>I first experienced Clojure at the London Clojurians code dojo events, first at Thoughworks and later at uSwitch hosted events too.</p> <p>Emacs has been the main tool for my own needs, although now Neovim has become my preferred experience.</p> <p>Emacs chorded key bindings was a skill I never mastered or developed an affection for and limited my initial adoption of Emacs until I discovered Evil and Spacemacs mnemonic key bindings</p>"},{"location":"practicalli-editors/#emacs-and-swank","title":"Emacs and Swank","text":"<p>In 2010 Cider had not been created, so Clojure REPL support was via swank-clojure, a Clojure specific implementation of server for Emacs SLIME.  Syntax highlighting was provided by clojure-mode and structural editing via Paredit.</p> Emacs Swank and Slime tooling <p>SLIME and swank form a client server architecture to run and debug lisp programs. SLIME is the emacs frontend and swank is the backend. In between they create a network socket and communicate by sending across messages (S-expressions). In short it is just an RPC mechanism between emacs and the actual lisp backend.</p> <p>The fact that the slime and swank are separate, are connected over a network and communicate via rpc messages means that they can be anywhere. So, slime can connect to a remote host/port to swank. All other forms you see (lein swank etc etc) do the same. They start swank on a port allowing for a remote connection of slime.</p> <p>swank-clojure is the clojure port of swank. originally swank-clojure came with a helper elisp file called swank-clojure.el. The job of this file was to enable manual setup of swank parameters like the classpaths, jvm parameters etc. Since other tools like lein came along later, swank-clojure.el was deprecated. But it still lives on at: http://github.com/vu3rdd/swank-clojure-extra and provides the M-x swank-clojure-project which enables starting swank on a lein project.</p> <p>SLIME originated in (and is still being actively developed for) Common Lisp. Infact, the clojure port of swank only has a subset of the features enjoyed by the original SLIME/swank versions. SLIME exists for all major variants of Common Lisp. There is a partial port of it for Scheme48. There are some partial implementations available under the contrib directory.</p> <p>A custom configuration for Eamcs was created, with the help of the London Clojurians.  The configuration has just enough to support coding at the code dojo events and very few other extra packages.</p> <p>There was a lot to learn about Emacs and the biggest challenge was understanding and remembering the Emac chorded key binding, e.g <code>C-x C-e</code> to evaluate an expression, <code>C-c C-k</code> to evaluate the source code buffer, <code>C-c C-d C-d</code> to view docs for a var, etc.</p> <p>Emacs with Clojure Swank overview - Stack Overflow 2010 </p>"},{"location":"practicalli-editors/#lighttable","title":"LightTable","text":"<p>LightTable was a wonderful editor that was excellent for those learning the Clojure language.</p> <p>LightTable was simple to use and feedback provided as you type each character.  So if a closing paren is missing or something is out of place, then an error was shown until the code was fixed.</p> <p>This instant feedback really helped me understand Clojure in the early part of my learning journey.</p> <p>LightTable was first editor that really helped me feel comforatable with Clojure and REPL driven development.</p> <p>The editor was not perfect, but was extremely simple to use and provided really useful feedback as code was typed.</p> <p></p> <p>LightTable was first released ,,, with a final 0.8.1 release on 22 January 2016. (in time to try it out at the London ClojureX conference)</p> <p>LightTable quickly became very popular with the community and at the time was the simplest editor to start Clojure with.</p> <p></p> <p>Unfortunately the LightTable editor was discontinued, even though there was an effort to revive it after the original maintainer passed.</p>"},{"location":"practicalli-editors/#emacs-live","title":"Emacs Live","text":"<p>Emacs &amp; CIDER with cyberpunk theme</p> <p>Personal Emacs config shared and contributed to by others.</p> <p></p>"},{"location":"practicalli-editors/#spacemacs-emacs-cider","title":"Spacemacs - Emacs &amp; CIDER","text":"<p>Contributed a range of key bindings to the Spacemacs project for Clojure, especially around evaluation.</p> <p>TODO: list of contributions</p>"},{"location":"practicalli-editors/#replit","title":"repl.it","text":"<p>https://repl.it/</p>"},{"location":"practicalli-editors/#klipse","title":"Klipse","text":"<p>Kipse is an embedded environment for evaluating ClojureScript code.</p> <p>Supports JavaScript interop.</p> <p>The runtime is ClojureScript, so there are a few clojure specific aspect that are not supported, e.g Java Interop.</p>"},{"location":"practicalli-editors/#nightcode-and-nightlight","title":"Nightcode and Nightlight","text":"<p>Nightcode provided some interesting project templates, with a focus on games and mobile apps.</p> <p></p> <p>Nightcode - ClojureBridge user guide </p> <p>Nighlight has replaced the original Nightcode project.</p> <p>Parvim has replaced nightlight, using the same embedded principle as Nightlight but with a richer Vim-style editing experience and an OpenGL desktop app rather than a local web-server.</p> <p></p> Minimal user documentation <p>These projects had a lot of promise, althought there were not enough documentation for students or volunteers to pick up the editors quickly.  If there is time to read the source code then there are many interesting features in each of these projects, especially Paravim.</p> <p>The projects were not completed, although do still provide some useful functionality.</p>"},{"location":"practicalli-editors/#mariacloud","title":"Maria.cloud","text":"<p>Maria.cloud learning page - ClojureBridge London </p>"},{"location":"practicalli-editors/#vs-code-calva","title":"VS Code &amp; Calva","text":"<p>VS Code was a common choice for many students attending the ClojureBridge London events, so learning to be effective with Calva was very useful.</p> <p>I created a essentials cheatsheet for each editor to support the students.</p> <p>I found Calva really simple and easy to use for small projects and challenges.  </p> <p>The Live feature of VS Code was the best collaboration tools I have seen within an editor.  Unfortunately trying to get experience developers to use VS Code for collaborative coding was a major blocker.  So </p> <p>Managing VS Code itself wasnt as key board driven as Emacs and there was no direct support for Multi-mode editing (which I had adopted from a few years of Spacemacs).  This mean the experience of Calva was hampered by the limitations of VS Code.</p> <p>The VSpaceCode demonstrated I was not the only person feeling the pain of keyboard control of VS Studio.  VSpaceCode is a well considered approach to driving everything from the keyboard.  I contributed key bindings for Clojure mode, calling the Calva commands.  It was a huge json file, so not very nice to edit (although VS Code did help a little). </p> <p>Calva was one of the first tools to implement Language Server Protocol and it was quickly integrated into the editor.  This really helped drive the development of Clojure LSP, although it also did move fast and break a lot of things and use huge amounts of memory.  I quickly stopped using Calva as this approach wasnt effective for me, although I assume helped those who were actively developing Calva.</p> <p>When switching to Clojure CLI I found Calva less convienient to use, as it does not directly support Clojure CLI user aliases. </p> <p>when calling jack-in it lists the available aliases in the project, but there was not a way to add a user alias to the jack-in command (as could be done with CIDER).</p> <p>The only way to include a user alias was to create a json mapping in the Calva config.  Given the size of my user configuration, this seemed to be a show-stopper for me.</p> <p>When I use Calva with Clojure CLI, I start a REPL from a terminal and then I am free to use which ever user and project aliases I prefer.  Then I can use Calva connect to the REPL process running in the terminal.</p> <p>There wasnt any advantage in using VS Code and Calva for my own workflow, and a slight disadvantage once I swiched to Clojure CLI.</p>"},{"location":"practicalli-editors/#emacs-doom","title":"Emacs-Doom","text":"<p>Many people were comenting on how much faster Doom Emacs was, so I spend 3 months working with it.</p> <p>I had used Emacs Live before so I was comfortable with using a config driven mainly by one person as Doom Emacs is.</p> <p>The Clojure setup in Doom Emacs was simple, althogh the experience and available key bindings were more limited than in Spacemacs.</p> <p>Doom also did not have a layouts feature which I had heavily using in Spacemacs.  There was a way to open projects, although there was not always a clear demarkation between project buffers, so things could easily get a bit messy.</p> <p>Although Doom Emacs config starts up really quickly, by the time it had loaded the few projects I typically work on it was not noticably any faster than Spacemacs.  In regular editing use, there was no perception of Emacs running faster.</p> <p>Practicalli Doom Emacs Config was created to share all the key binding definitions I had created (mostly copying from those I had contributed to Spacemacs).  As there were significant changes to the existing Doom Emacs key bingings, I did not submit a PR to add my changes.  I did share my config with the community to allow them to see if there were useful commands and key bindings to adopt.</p> <p>After the 3 months I didnt feel Doom Emacs offered any benefit to my workflow.  Startup time is irelevant to me so long as its less than 10 seconds (I spend more time coughing first thing in the morning).  I only close Emacs when I shut down the computer.</p>"},{"location":"practicalli-editors/#neovim-conjure","title":"Neovim &amp; Conjure","text":"<p>I started a role as Data Engineer &amp; Architect and the team was very Neovim centric.</p> <p>Neovim has started including Treesitter support and LSP client support, so it was a good time to dive into Conjure and start coding in a terminal.</p> <p>Kitty terminal was adopted and still used today.  Kitty is available for Linux and Mac and the same config works well for both (once Nerd fonts are installed)</p> <p>Initially a fennel based config was used, base on ... </p> <p>More features were desirable, to make it more of an experience I was used to.</p> <p>There was a challenge understanding how to do some of the basics of an editor, like creating and saving new file.</p> <p>After about 6 weeks in between getting work done, I had a very nice setup, although it was much more limited and not as smooth as the Spacemacs experience.</p> <p>Adopting AstroNvim community configuration really improved the Neovim experience and removed many of the shortfalls I had experienced with my own Fennel config.</p> <p>Adding Clojure via an AstroNvim Community pack was relativley easy, reusing some of the lessons learned from the fennel config.  The pack included Conjure and parinfer.</p> <p>Parinfer was a little strange at first, but quickly became more natural than using paredit.  Many of the structural editing features of paredit can be done with multi-mode editing commands, reducing the amount of information to retain for Clojure code wrangling.</p> <p>Neovide is a GUI layer on top of Neovim that provides additional polish to the experience.  Neovide can be started from the Desktop launcher without opening a terminal.  Using the telescope projects plugin allows Neovide to quickly swtich to the right project via the telesope list.</p>"},{"location":"practicalli-editors/#emacs-corgi","title":"Emacs Corgi","text":"<p>Core Clojure support for Emacs.</p> <p>Centralised key binding definitions configuration</p> <p>Too minimal for my worklfow and no interest in supporting Clojure LSP at the time of review.</p>"},{"location":"practicalli-team/","title":"Practicall Team","text":"<p>Practicalli founding principle</p> <p>Learning by doing, learn even more by teaching.</p> <p>Practicalli content is designed to be easy to understand.  If there is something that is not clear or could be described differently then please get in touch</p> <p>Practicalli is the result of many years \"learning by teaching\" in the community. The majority of learning was around Clojure and development tooling.</p>"},{"location":"practicalli-team/#vision","title":"Vision","text":"<p>Practicalli guides started with a focus on effective development with the Clojure functional programming language, along with development tools that support an effective Clojure REPL workflow (Repl Driven Development).</p> <p>The long term vision is to provide a complete set of practical guides for modern software engineering, covering principles, practices and tools.  The focus on Clojure will remain as it is seen as the move effective programming languages for most modern systems.</p>"},{"location":"practicalli-team/#sponsor-practicalli","title":"Sponsor Practicalli","text":"<p>The majority of my work is now focused on the Practicalli series of books and videos and an advisory role with several communities</p> <p>Thank you to Cognitect, Nubank and a wide range of other sponsors from the Clojure community for your continued support</p>"},{"location":"practicalli-team/#about-johnny-stevenson","title":"About Johnny Stevenson","text":"<p>Johnny Stevenson is the founder of Practical.li, using my experiences of teaching thousands of people over the last 3 decades.</p> <p>A presentation to introduce where I came from was captured from my time working for StatsBomb in 2021 (focusing on my life rather than career).</p> <p> </p>"},{"location":"practicalli-team/#community-outreach","title":"Community Outreach","text":"<p>I started community outreach with Linux, running install parties and workshops across London.  I introduced hundreds of people to Linux, mainly Ubuntu, covering a wide range of development tools and workflows.</p> <p>I joined forces with FossBox, which ran free workshops on Linux for the community in London.  I created a workshop on using Inkscape for creating graphics using Scaler Vector Graphics.</p> <p>Afternoon workshops on Wednesdays at University College London (UCL).  Event posters were designed and created by myself and posted around the University with help from their computer society.  This was mostly people curious coming along to ask questions, although a good percentage were installing Linux and many of the tools I recommended.  Demos of specific tools were done on request (and I also learned a lot from the questions that were asked).</p> <p>Install parties were run in a pub, using a booked area (or a quiet pub).  The first pub used was \"The Slaughtered Lamb\", which was near the SkillsMatter offices and a regular social venue for post presentation drinks</p> <p>Sharing code from dojo events</p> <p>Assembla GitHub</p> <p>Teaching engineers how to deploy from source on Heroku PaaS platform,</p>"},{"location":"practicalli-team/#personal-journey-into-clojure","title":"Personal Journey Into Clojure","text":"<p>Started looking at Haskell and Scala.</p> <p>Both languages seemed more focused on defining types than solving problems.  Many conepts felt quite academic and I was looking for something more pragmatic and generally simpler.</p>"},{"location":"practicalli-team/#london-clojurians-dojo","title":"London Clojurians dojo","text":"<p>Code dojo events are an excellent event for learning and developing skills with a coding language.</p> <p>Otfrom started running the London Clojurians code dojo in 2009 at the London based Thoughworks offices.  Thoughtworks kindly provided lots of pizza (and occasionally sandwiches &amp; quiche as a 'posh' alternative).</p> <p>I attended the code dojo events at first to learn how to run the same kind of event for the London Scala User Group (which ran a successful code dojo event from 2010 onwards, across many venues in London).</p> <p>A group of engineers at uSwitch also started their own code dojo event, so there were two Clojure events every month (which was a lot of pizza)</p> <p>I took over running the London Clojurians from Otfrom when they moved away from London.  Apart from a few nudges and some support, I was able to delegate all the work to each group of people hosting the event.</p> <p>I did go to every code dojo event up until the end of 2019 (only stopping due to COVID).</p>"},{"location":"practicalli-team/#clojurebridge-london","title":"ClojureBridge London","text":"<p>ClojureBridge is a community promoting education aimed at under-represented groups in our society.  The largest under-represented group in the software industry are women and this is the group that ClojureBridge London focuses on.</p> <p>ClojureBridge London website</p>"},{"location":"practicalli-team/#hack-the-tower","title":"Hack the Tower","text":"<p>After a very rewarding Hack day at The Guardian offices in the summer of 2012 I decided to use the Salesforce offices for a Saturday event that I called Hack The Tower, as the venue was Tower 42 in London (Its a tower of offices with 42 floors, hence the name).</p> <p>The Saleforce offices were used predominantly by the sales team, so they were completely empty at the weekends (although the cleaners didnt come until Monday morning, so there was a bit of cleaning of stale coffee cups required before the event).</p> <p>Salesforce kindly gave me a budget to buy food for the hack day, so we could all have lunch without having to leave the building (signing out and back in again would have been a hassle).  Before the event I would go for a shop in Tesco supermarket (it was the supermarket closest to the tower) and buy sandwiches, crisps and anything that looked tasty without needing to be cooked.</p> <p>The first event was surprisingly popular for a Saturday event at the start of winter, with 20 people signing up and 18 people turning up.</p> <p>After 5 months at Tower 42, we moved to the Heron Tower (aka The Salesforce Tower).  This was a huge space with 3 office levels and dozens of well equipped meeting rooms.</p>"},{"location":"practicalli-team/#commercial-experience","title":"Commercial Experience","text":"<ul> <li>Citi : running 6 Clojure teams across 6 geographical locations, creating an equity derivatives data store that ingested data from multiple financial services and distributed across 3 geographical locations in real-time. Used Clojure and Tibco (the message bus for serious enterprise systems)</li> <li>StatsBomb : real-time sports statistics service, using Clojure &amp; Kafka</li> <li>Billie : data ingestion system to feed data science models that analysed financial transactions for fraud in real-time</li> <li>Griffin : building a bank on Clojure (start-up)</li> </ul>"},{"location":"practicalli-team/#how-did-practicalli-start","title":"How did Practicalli start","text":"<p>Workshops at software conferences.</p> <p>Live broadcasts as part of 100 days of code</p> <p>Studying clojure every day, writing projects, solving challenges, helping others learn 1-2-1 and in community events.</p> <p>Created Practicalli YouTube channel and branded books as Pracitalli</p> <ul> <li>Practicalli Spacemacs</li> <li>Practicalli Clojure</li> <li>Practicalli Clojure Web Services</li> <li>Practicalli ClojureScript</li> </ul> <p>Continued to develop books as commercial and community experiences evolved.</p> <p>Conjure plugin and Neovim Treemacs and LSP support finally enticed me to try Neovim as a Clojure development.</p> <p>Practicalli Neovim Config was created using Fennel language, an interesting challenge but within 6 weeks I had learned a lot about Neovim, available package managers, teleport and how to write some fennel code.  There were some really nice parts to the config, but it did have challenges that I wasnt going to have time to solve.</p> <p>AstroNvim provided an opportunity to make Neovim as easy to use as Spacemacs, which worked our exceedingly well.  Adding Clojure support was relavitely easy, copying some of the work I had done previously but for Lua rather than fennel this time.</p> <p>A Clojure Pack was designed and contributed to AstroNvim Community.</p> <p>Thank you.</p> <p> Practical.li Website</p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>"},{"location":"video-guides/","title":"Practicalli Video Guides","text":"<p>Screencasts &amp; Live Broadcasts</p> <p></p> <ul> <li>All Live broadcasts</li> <li>Challenges</li> <li>4Ever Clojure </li> <li>Exercisim</li> <li>Clojure CLI</li> <li>Neovim -Spacemacs</li> </ul>"},{"location":"writing-tips/","title":"Writing tips for MkDocs","text":"<p>Making the docs more engaging using the mkdocs-material theme reference guide</p> Configuring Colors <p>Material for MkDocs - Changing the colors lists the primary and accent colors available.</p> <p>HSL Color Picker for codes to modify the theme style, overriding colors in <code>docs/assets/stylesheets/extra.css</code></p>"},{"location":"writing-tips/#hypertext-links","title":"Hypertext links","text":"<p>Links open in the same browser window/tab by default.</p> <p>Add <code>{target=_blank}</code> to the end of a link to configure opening in a new tab</p> <pre><code>[link text](url){target=_blank}\n</code></pre>"},{"location":"writing-tips/#buttons","title":"Buttons","text":"<p>Convert any link into a button by adding <code>{.md-button}</code> class names to end of the markdown for a link, which uses <code>.md-button-primary</code> by default.  Include <code>target=_blank</code> for buttons with links to external sites.</p> <pre><code>[link text](http://practical.li/blog){.md-button target=_blank}\n</code></pre> <p>Or specify a different class</p> <pre><code>[link text](http://practical.li/blog){.md-button .md-button-primary}\n</code></pre> <p>Add an icon to the button</p> <p> Practicalli Issues  Practicalli Blog</p> <pre><code>[:fontawesome-brands-github: Practicalli Issues](http://practical.li/blog){ .md-button .md-button-primary }\n[:octicons-heart-fill-24: Practicalli Blog](http://practical.li/blog){ .md-button .md-button-primary }\n</code></pre> <p>Search all supported icons</p>"},{"location":"writing-tips/#youtube-video","title":"YouTube video","text":"<p>Use an iframe element to include a YouTube video, wrapping in a paragraph tag with center alignment to place the video in a centered horizontal position</p> <pre><code>&lt;p style=\"text-align:center\"&gt;\n&lt;iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/rQ802kSaip4\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen&gt;&lt;/iframe&gt;\n&lt;/p&gt;\n</code></pre> <p>mkdocs material does not have direct support for adding a YouTube video via markdown.</p>"},{"location":"writing-tips/#admonitions","title":"Admonitions","text":"<p>Supported admonition types</p> <p>Note</p> <p>Use <code>!!!</code> followed by <code>NOTE</code></p> <p>Adding a title</p> <p>Use <code>!!!</code> followed by <code>NOTE</code> and a <code>\"title in double quotes\"</code></p> <p>Shh, no title bar just the text... Use <code>!!!</code> followed by <code>NOTE</code> and a <code>\"\"</code> empty double quotes</p> <p>Abstract</p> <p>Use <code>!!!</code> followed by <code>ABSTRACT</code></p> <p>Info</p> <p>Use <code>!!!</code> followed by <code>INFO</code></p> <p>Tip</p> <p>Use <code>!!!</code> followed by <code>TIP</code></p> <p>Success</p> <p>Use <code>!!!</code> followed by <code>SUCCESS</code></p> <p>Question</p> <p>Use <code>!!!</code> followed by <code>QUESTION</code></p> <p>Warning</p> <p>Use <code>!!!</code> followed by <code>WARNING</code></p> <p>Failure</p> <p>Use <code>!!!</code> followed by <code>FAILURE</code></p> <p>Danger</p> <p>Use <code>!!!</code> followed by <code>DANGER</code></p> <p>Bug</p> <p>Use <code>!!!</code> followed by <code>BUG</code></p> <p>Example</p> <p>Use <code>!!!</code> followed by <code>EXAMPLE</code></p> <p>Quote</p> <p>Use <code>!!!</code> followed by <code>QUOTE</code></p>"},{"location":"writing-tips/#collapsing-admonitions","title":"Collapsing admonitions","text":"Note <p>Collapse those admonitions using <code>???</code> instead of <code>!!!</code></p> Replace with a title <p>Use <code>???</code> followed by <code>NOTE</code> and a <code>\"title in double quotes\"</code></p> Expanded by default <p>Use <code>???+</code>, note the <code>+</code> character,  followed by <code>NOTE</code> and a <code>\"title in double quotes\"</code></p>"},{"location":"writing-tips/#inline-blocks","title":"Inline blocks","text":"<p>Inline blocks of text to make a very specific callout within text</p> <p>Info</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Adding something to then end of text is probably my favourite</p> <p>Info</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p>"},{"location":"writing-tips/#code-blocks","title":"Code blocks","text":"<p>Code blocks include a copy icon automatically</p> <p>Syntax highlighting in code blocks</p> <p>Available Lexers for syntax highlights</p> Lexers used by Practicalli <ul> <li><code>clojure</code> Clojure and ClojureScript code</li> <li><code>json</code> api data, etc.</li> <li><code>markdown</code> markdown text</li> <li><code>make</code> Makefile task definitions</li> <li><code>unixconfig</code> general configuration files</li> <li><code>yaml</code> .yaml / .yml configuration files, e.g. GitHub Workflow</li> <li><code>shell</code> scripts (alternatives <code>bash</code>, <code>zsh</code>)</li> <li><code>shell-session</code> prompt, command and output for one or more commands</li> <li><code>docker</code> and compose configs</li> <li><code>html</code></li> <li><code>mermaid</code> (Diagrams - Material for MkDocs)</li> </ul> <pre><code>(defn my-function  ; Write a simple function\n  \"With a lovely doc-string\"\n  [arguments]\n  (map inc [1 2 3]))\n</code></pre> <p>Give the code block a title using <code>title=\"\"</code> after the backtics and language name</p> src/practicalli/gameboard.clj<pre><code>(defn my-function\n  \"With a lovely doc-string\"\n  [arguments]\n  (map inc [1 2 3]))\n</code></pre> <p>We all like line numbers, especially when you can set the starting line</p> src/practicalli/gameboard.clj<pre><code>(defn my-function\n  \"With a lovely doc-string\"\n  [arguments]\n  (map inc [1 2 3]))\n</code></pre> <p>Add <code>linenums=42</code> to start line numbers from 42 onward</p> <pre><code>clojure linenums=\"42\" title=\"src/practicalli/gameboard.clj\"\n</code></pre>"},{"location":"writing-tips/#annotations","title":"Annotations","text":"<p>Annotations in a code block help to highlight important aspects.  Use the comment character for the language followed by a space and a number in brackets</p> <p>For example, in a shell code block, use <code># (1)</code> where 1 is the number of the annotation</p> <p>Use a number after the code block to add the text for the annotation, e.g. <code>1.</code>. Ensure there is a space between the code block and the annotation text.</p> <pre><code>ls -la $HOME/Downloads  # (1)\n</code></pre> <ol> <li> I'm a code annotation! I can contain <code>code</code>, formatted text, images, ... basically anything that can be written in Markdown.</li> </ol> <p>Code blocks with annotation, add <code>!</code> after the annotation number to suppress the <code>#</code> character, e.g. <code># (1)</code></p> <pre><code>(defn helper-function\n  \"Doc-string with description of function purpose\" ; (1)!\n  [data]\n  (merge {:fish 1} data)\n  )\n</code></pre> <ol> <li>Always include a doc-string in every function to describe the purpose of that function, identifying why it was added and what its value is.</li> </ol> <p>GitHub action example with multiple annotations</p> <pre><code>name: ci # (1)!\non:\n  push:\n    branches:\n      - master # (2)!\n      - main\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v4\n        with:\n          python-version: 3.x\n      - run: pip install mkdocs-material # (3)!\n      - run: mkdocs gh-deploy --force\n</code></pre> <ol> <li> <p>You can change the name to your liking.</p> </li> <li> <p>At some point, GitHub renamed <code>master</code> to <code>main</code>. If your default branch     is named <code>master</code>, you can safely remove <code>main</code>, vice versa.</p> </li> <li> <p>This is the place to install further [MkDocs plugins] or Markdown     extensions with <code>pip</code> to be used during the build:</p> <pre><code>pip install \\\n  mkdocs-material \\\n  mkdocs-awesome-pages-plugin \\\n  ...\n</code></pre> </li> </ol> <p>Annotations within an Admonition</p> <p>Codeblock annotations wrapped within an admonition should have the annotation description indented to be aligned with the admonition (i.e. 4 space indent)</p>"},{"location":"writing-tips/#highlight-lines-in-code-blocks","title":"Highlight lines in code blocks","text":"<p>Add highlight line meta data to a code block after the opening backticks and code block language.</p> <p><code>hl_lines=\"2\"</code> highlights line 2 in the codeblock</p> <pre><code>(defn my-function\n  \"With a lovely doc-string\"\n  [arguments]\n  (map\n   inc\n   [1 2 3]))\n</code></pre>"},{"location":"writing-tips/#embed-external-files","title":"Embed external files","text":"<p><code>--8&lt;--</code> in a code block inserts code from a source code file or other text file, e.g.</p> <p><code>--8&lt;-- \"https://github.com/practicalli/project-templates/blob/main/deps.edn?raw=true\"</code></p> <p>| NOTE: For GitHub, add <code>?raw=true</code> on the end of the url to the GitHub file or use the raw code link, i.e. <code>https://raw.githubusercontent.com/...</code></p> Practicalli Project Templates Emacs project configuration - .dir-locals.el<pre><code>{:paths [\"src\" \"resources\"]\n\n :deps\n {org.clojure/clojure {:mvn/version \"1.12.0\"}}\n\n :aliases\n {;; Add libraries and paths to support additional test tools\n  :test/env\n  {:extra-paths [\"test\"]\n   :extra-deps {org.clojure/test.check {:mvn/version \"1.1.1\"}\n                ;; https://github.com/seancorfield/deps-new/\n                io.github.seancorfield/deps-new\n                {:git/tag \"v0.8.0\" :git/sha \"2f96530\"}}}\n\n  ;; Test runner - local and CI\n  ;; call with `:watch? true` argument to start file watcher and re-run tests on saved changes\n  :test/run\n  {:extra-paths [\"test\"]\n   :extra-deps {lambdaisland/kaocha {:mvn/version \"1.91.1392\"}}\n   :main-opts   [\"-m\" \"kaocha.runner\"]\n   :exec-fn kaocha.runner/exec-fn\n   :exec-args {:randomize? false\n               :fail-fast? true}}}}\n</code></pre> <p>Specifying a local file from the root of the book project (the directory containing <code>mkdocs.yml</code>) only seems to work when running the server locally, e.g. <code>--8&lt;-- \".github/workflows/scheduled-version-check.yaml\"</code></p> LOCAL File: Only works when running mkdocs server locally scheduled version check<pre><code>\n</code></pre> FULL URL: Always works correctly scheduled version check<pre><code>---\n# ------------------------------------------\n# Scheduled check of versions\n# - use as non-urgent report on versions\n# - Uses POSIX Cron syntax\n#   - Minute [0,59]\n#   - Hour [0,23]\n#   - Day of the month [1,31]\n#   - Month of the year [1,12]\n#   - Day of the week ([0,6] with 0=Sunday)\n#\n# Using liquidz/anta to check:\n# - GitHub workflows\n# - deps.edn\n# ------------------------------------------\n\nname: \"Scheduled Version Check\"\non:\n  schedule:\n    # - cron: \"0 4 * * *\" # at 04:04:04 ever day\n    # - cron: \"0 4 * * 5\" # at 04:04:04 ever Friday\n    - cron: \"0 4 1 * *\" # at 04:04:04 on first day of month\n  workflow_dispatch: # Run manually via GitHub Actions Workflow page\n\njobs:\n  scheduled-version-check:\n    name: \"Scheduled Version Check\"\n    runs-on: ubuntu-latest\n    steps:\n      - run: echo \"\ud83d\ude80 Job automatically triggered by ${{ github.event_name }}\"\n      - run: echo \"\ud83d\udc27 Job running on ${{ runner.os }} server\"\n      - run: echo \"\ud83d\udc19 Using ${{ github.ref }} branch from ${{ github.repository }} repository\"\n\n      - name: Checkout Code\n        uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n          sparse-checkout: |\n            .github\n      - run: echo \"\ud83d\udc19 ${{ github.repository }} repository sparse-checkout to the CI runner.\"\n      - name: \"Antq Check versions\"\n        uses: liquidz/antq-action@main\n        with:\n          excludes: \"\"\n          skips: \"boot clojure-cli pom shadow-cljs leiningen\"\n\n      # Summary\n      - run: echo \"\ud83c\udfa8 library versions checked with liquidz/antq\"\n      - run: echo \"\ud83c\udf4f Job status is ${{ job.status }}.\"\n</code></pre> <p>Code example reuse</p> <p>Use an embedded local or external file (URL) when the same content is required in more than one place in the book.</p> <p>An effective way of sharing code and configuration mutliple times in a book or across multiple books.</p>"},{"location":"writing-tips/#content-tabs","title":"Content tabs","text":"<p>Create in page tabs that can also be</p> <p>Setting up a project</p> Clojure CLILeiningen <pre><code>clojure -T:project/new :template app :name practicalli/gameboard\n</code></pre> <pre><code>lein new app practicalli/gameboard\n</code></pre> <p>Or nest the content tabs in an admonition</p> <p>Run a terminal REPL</p> Clojure CLILeiningen <pre><code>clojure -T:repl/rebel\n</code></pre> <pre><code>lein repl\n</code></pre>"},{"location":"writing-tips/#diagrams","title":"Diagrams","text":"<p>Neat flow diagrams</p> <p>Diagrams - Material for MkDocs</p> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre> <p>UML Sequence Diagrams</p> <pre><code>sequenceDiagram\n  Alice-&gt;&gt;John: Hello John, how are you?\n  loop Healthcheck\n      John-&gt;&gt;John: Fight against hypochondria\n  end\n  Note right of John: Rational thoughts!\n  John--&gt;&gt;Alice: Great!\n  John-&gt;&gt;Bob: How about you?\n  Bob--&gt;&gt;John: Jolly good!</code></pre> <p>state transition diagrams</p> <pre><code>stateDiagram-v2\n  state fork_state &lt;&lt;fork&gt;&gt;\n    [*] --&gt; fork_state\n    fork_state --&gt; State2\n    fork_state --&gt; State3\n\n    state join_state &lt;&lt;join&gt;&gt;\n    State2 --&gt; join_state\n    State3 --&gt; join_state\n    join_state --&gt; State4\n    State4 --&gt; [*]</code></pre> <p>Class diagrams - not needed for Clojure</p> <p>Entity relationship diagrams are handy though</p> <pre><code>erDiagram\n  CUSTOMER ||--o{ ORDER : places\n  ORDER ||--|{ LINE-ITEM : contains\n  LINE-ITEM {\n    customer-name string\n    unit-price int\n  }\n  CUSTOMER }|..|{ DELIVERY-ADDRESS : uses</code></pre>"},{"location":"writing-tips/#keyboard-keys","title":"Keyboard keys","text":"<p>Represent key bindings with Keyboard keys. Each number and alphabet character has their own key.</p> <ul> <li>1 <code>++1++</code> for numbers</li> <li>l <code>++\"l\"++</code> for lowercase character</li> <li>U <code>++u++</code> for uppercase character or <code>++\"U\"++</code> for consistency</li> </ul> <p>Punctionation keys use their name</p> <ul> <li>Space <code>++spc++</code></li> <li>, <code>++comma++</code></li> <li>Left <code>++arrow-left++</code></li> </ul> <p>For key sequences, place a space between each keyboard character</p> <ul> <li>Space g s <code>++spc++ ++\"g\"++ ++\"s\"++</code></li> </ul> <p>For key combinations, use join they key identifies with a <code>+</code></p> <ul> <li>Meta+X <code>++meta+x++</code></li> <li>Ctrl+Alt+Del <code>++ctrl+alt+del++</code></li> </ul> <p>MkDocs keyboard keys reference</p>"},{"location":"writing-tips/#images","title":"Images","text":"<p>Markdown images can be appended with material tags to set the size of the image, whether to appear on light or dark theme and support lazy image loading in browsers</p> SizeLazy LoadingAlignTheme SpecificAll Image Attributes <p><code>{style=\"height:150px;width:150px\"}</code> specifies the image size <pre><code>![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-light.png#only-dark){style=\"height:150px;width:150px\"}\n</code></pre></p> <p></p> <p><code>{loading=lazy}</code> specifies an image should lazily load in the browser <pre><code>![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-light.png){loading=lazy}\n</code></pre></p> <p><code>{aligh=left}</code> or <code>{aligh=right}</code> specifies the page alignment of an image. <pre><code>![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-light.png#only-dark){align=right}\n![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-dark.png#only-light){align=right}\n</code></pre></p> <p>  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p><code>![Kitty Logo](image/kitty-light.png#only-dark)</code> or <code>![Kitty Logo](image/kitty-light.png#only-light)</code>  specifies the theme the image should be shown, allowing different versions of images to be shown based on the theme. <pre><code>![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-light.png#only-dark){style=\"height:150px;width:150px\"}\n![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-dark.png#only-light){style=\"height:150px;width:150px\"}\n</code></pre> Use the theme toggle in the top nav bar to see the icon change between light and dark.  </p> <p>Requires the color pallet toggle</p> <p>Alight right, lazy load and set image to 150x150</p> <pre><code>![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-light.png#only-dark){align=right loading=lazy style=\"height:64px;width:64px\"}\n![Kitty Logo](https://raw.githubusercontent.com/practicalli/graphic-design/live/icons/kitty-dark.png#only-light){align=right loading=lazy style=\"height:64px;width:64px\"}\n</code></pre> <p>  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p>"},{"location":"writing-tips/#lists","title":"Lists","text":"<p>Task lists</p> <ul> <li> Lorem ipsum dolor sit amet, consectetur adipiscing elit</li> <li> Vestibulum convallis sit amet nisi a tincidunt<ul> <li> In hac habitasse platea dictumst</li> <li> In scelerisque nibh non dolor mollis congue sed et metus</li> <li> Praesent sed risus massa</li> </ul> </li> <li> Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque</li> </ul> <p>Task List example</p> <pre><code>- [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit\n- [ ] Vestibulum convallis sit amet nisi a tincidunt\n    * [x] In hac habitasse platea dictumst\n    * [x] In scelerisque nibh non dolor mollis congue sed et metus\n    * [ ] Praesent sed risus massa\n- [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque\n</code></pre>"},{"location":"writing-tips/#tooltips","title":"Tooltips","text":"<p>The humble tool tip</p> <p>Hover me</p> <p>with references</p> <p>Hover me</p> <p>Icon tool tip with a title</p> <p></p>"},{"location":"writing-tips/#abreviations","title":"Abreviations","text":"<p>The HTML specification is maintained by the W3C.</p> <p>[HTML]: Hyper Text Markup Language [W3C]: World Wide Web Consortium</p>"},{"location":"writing-tips/#magic-links","title":"Magic links","text":"<p>MagicLink can auto-link HTML, FTP, and email links. It can auto-convert repository links (GitHub, GitLab, and Bitbucket) and display them in a more concise, shorthand format.</p> <p>Email Practicalli</p> <p>Practicalli Neovim</p>"},{"location":"assets/images/social/","title":"Social Cards","text":"<p>Social Cards are visual previews of the website that are included when sending links via social media platforms.</p> <p>Material for MkDocs is configured to generate beautiful social cards automatically, using the colors, fonts and logos defined in <code>mkdocs.yml</code></p> <p>Generated images are stored in this directory.</p>"},{"location":"blog/","title":"Practicalli Articles","text":""},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/","title":"Accessing AWS with Clojure from scratch - simple approach","text":"<p> Cognitect Labs AWS API is an excellent data driven Clojure library for interacting with AWS from code.  The project includes working code examples.</p> <p>The biggest challenge for those new to AWS is to configuring suitable AWS accounts, programmatic access and service permissions.</p> <p>This article starts with nothing and steps through the simplest and quickest AWS account and permission setup, using the  AWS Free Tier.  </p> <p>Service quota limits</p> <p>Each service has itos own quota limits and some services are only free for a period of time (free trials &amp; 12 months free).</p> <p>The approach outlined is not intended for commercial work, only the bare essentials to start exploring what is possible with the Cognitect Labs library.  Or try  LocalStack if docker is installed locally.</p> Avoid this approach for sensitive accounts <p>Avoid approach for personal or company projects containing sensitive information</p> Credit card required <p>A working credit card is required to setup a root account and AWS will charge the card $1 to verify identity and that the card is legitimate.  This amount will be returned within 3-5 days.</p> <p>Apart from the temporary charge, this approach should not incur any charges so long as the account stays within the free plan limits.  Recommend using a digital card that can be set to frozen when not explicitly used as a safety precaution.</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#create-root-account","title":"Create Root account","text":"<p>A root account is used for administration of an Amazon Web Service (AWS) account. This includes management of IAM accounts which are used for day to day work and programmatic (code) access.</p> <p>Create a root account by  signing up for an AWS account</p> <p>Enter an email for the root account and a name for the AWS account</p> <p></p> <p>An email is sent to the address entered with a verification code.  Enter the code and select Verify</p> <p></p> <p>Generate a secure password for the root account, e.g. using a Password Manager such as NordPass or 1Password</p> <p></p> <p>Save the account password with your favourite password manager</p> <p>Select Personal plan as this account is only used for personal projects &amp; hacking (not cracking).</p> <p>Complete contact information with your actual details (used when AWS confirms the credit card is legitimate) and confirm the  AWS Customer Agreement.</p> <p></p> <p>Enter details of a valid credit/debit card.  AWS will charge $1 to the card, which will be returned in 3-5 days.</p> <p></p> <p>Confirm identity</p> <p>NOTE: do not include spaces in the security code even if they are in the image</p> <p>Select Send SMS</p> <p></p> <p>Confirm identity pin number</p> <p>4 digit code (dont use the 5 digit phone number by mistake)</p> <p></p> <p>Select support plan - Basic support - Free</p> <p>Select Complete Sign up</p> <p></p> <p>Congratulations</p> <p>An email will be sent to the root account address once the account is ready, which make take a few minutes.</p> <p>Take a break from the form filling by stretching and taking some deep breaths.</p> <p></p> <p>IAM Multi-Factor Authentication (MFA)</p> <p>Visit the IAM dashboard and add Multi-Factor authentication (MFA) to the root user account for additional security.  Practicalli uses the Authy app for Multi-Factor authentication</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#iam-user-for-code-cli","title":"IAM User for Code &amp; CLI","text":"<p>Login to AWS Management Console with root account</p> <p>Search for and select IAM and create a new IAM user</p> <p></p> <p>Select Add user to group</p> <p>Create new group and assing it to the user</p> <p></p> <p>The group should be assigned Permission policies to access the relevant AWS services, e.g. AwsS3FullAccess</p> <p></p> <p>Ensure the new user is added to the group (I missed this step out initially and access was not allowed)</p> <p></p> <p>Once the IAM user has been created, create an Access Key (key and secret)</p> <p>Select the Security credentials tab in the user summary</p> <p>Select Command Line Interface (CLI) and tick the check box to understand this isnt the recommended approach.</p> <p></p> <p>Retrieve the access key details so they can be used when configuring the AWS CLI tool.</p> <p></p> <p>In a commercial environment, the operations team should create an IAM account for you, so this step is only relevant for your own education.</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#install-aws-cli-2","title":"Install AWS CLI 2","text":"<p> AWS Command Line Interface (AWS CLI) is a unified tool to control multiple AWS services from the command line and automate them through scripts.</p> <p>The AWS CLI configuration can also be used by Clojure code using the Cognitect Labs AWS API library.</p> <p>Download the install script archive file</p> <pre><code>curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\n</code></pre> <p>Extract the install script which extract to a directory called <code>aws</code></p> <pre><code>unzip awscliv2.zip\n</code></pre> <p>Run the install script, providing the user password when prompted</p> <pre><code>sudo ~/aws/install\n</code></pre> <p>The install script can also be used to update an existing version of the AWS CLI version 2 (but not AWS CLI version 1)</p> <pre><code>sudo ~/aws/install --bin-dir /usr/local/bin --install-dir /usr/local/aws-cli --update\n</code></pre>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#configure-aws-cli","title":"Configure AWS CLI","text":"<p>Use AWS CLI to create a configuration, using its wizard</p> <pre><code>aws configure\n</code></pre> <p>Enter the access key and access key secret from the IAM account when prompted</p> <p>Enter the default region, e.g. eu-west-1 for Ireland</p> <p>The wizard creates two files</p> <ul> <li><code>~/.aws/config</code> containing the <code>default</code> profile</li> <li><code>~/.aws/credentials</code> containing the AWS access key and secret (this is a plain text file, so not secure if someone hacks into your computer)</li> </ul> <p>An aws_session_token is not required, even though the AWS documentation mentions it repeatedly (but neglects to tell you how to create it)</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#install-clojure","title":"Install Clojure","text":"<p> Practicalli guide to install Clojure CLI, Java and Practicalli Clojure CLI Config for a wide range of community tools.</p> <p>Leiningen should also work, although this tool was not tested</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#cognitect-labs-aws-apis","title":"Cognitect Labs AWS API's","text":"<p>Now for the simpler part :)</p> <p>Create a new Clojure project, e.g. using the <code>:project/create</code> alias from Practicalli Clojure CLI Config.</p> <p>Create minimal Clojure CLI project</p> <pre><code>clojure -T:project/create :template :practicalli/minimal :name practicalli/bucket-of-data\n</code></pre> <p>Edit the <code>deps.edn</code> file and add the Cognitect Labs AWS API, Endpoints and S3 libraries</p> <p>Add Congnitect Labs AWS API libraries as project dependencies</p> Project deps.edn<pre><code>  com.cognitect.aws/api {:mvn/version \"0.8.692\"}\n  com.cognitect.aws/endpoints {:mvn/version \"1.1.12.504\"}\n  com.cognitect.aws/s3 {:mvn/version \"848.2.1413.0\"}\n</code></pre> <p> latest-release.edn listed all the libraries and their current version</p> <p>Start repl the repl, e.g. using the  Practicalli REPL Reloaded workflow or from an editor</p> <pre><code>clojure -M:repl/reloaded\n</code></pre> <p>Open <code>src/practicalli/bucket_of_data.clj</code> file in a Clojure aware editor &amp; connect to the REPL process (if the editor was not used to start the REPL process)</p> <p>Create a rich comment and start to experiment with the Cognitect Labs AWS API library.</p> <p>Example creating an S3 bucket, adding a file and reading the contents of a file.</p> <p>Require Cognitect Labs AWS API</p> <pre><code>(require '[cognitect.aws.client.api :as aws])\n</code></pre> <p>Define a client for the AWS S3 service</p> <pre><code>(def data-bucket (aws/client {:api :s3}))\n</code></pre> <p>Validate requests to the S3 service to report incorrect arguments (especially useful when starting out with the library).  Underlying this is a Clojure specification derived from the AWS specifications.</p> <p>Valicate S3 bucket requests</p> <pre><code>(aws/validate-requests data-bucket true)\n</code></pre> <p>Credentials are required for this request, so its a useful test to ensure the AWS CLI is configured correctly.</p> <p>List S3 buckets to check credentials are working</p> <pre><code>(aws/invoke data-bucket {:op :ListBuckets})\n</code></pre> <p>A REPL restart (stop/start) is required if the AWS environment variables are changed, otherwise the updated values in those environment variables will not be used.</p> <p>As Cognitect Labs AWS API has a complete specification for each service, all the available operations for a specific service can be listed (even if the credentials are not working)</p> <p>List the S3 Service operations.  Note, this returns a big data structure, so I find it useful to look at it in a data inspector, e.g. Portal, Cider Inspector or Morse</p> <p>List S3 service operations</p> <pre><code>(aws/ops data-bucket)\n</code></pre> <p>Once the name of the operation is know, view the documentation to see how it is used.</p> <p>Create S3 bucket</p> <pre><code>(aws/doc data-bucket :CreateBucket)\n</code></pre> <p>Portal provides an effective way to navigate </p> <p></p> <p>The Practicalli REPL Reloaded workflow launches Portal at startup and all evaluations are sent to the Portal UI, so its easy to navigate the large list of operations for an AWS service.</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#sso-account-approach","title":"SSO Account approach","text":"<p>Single sign-on access can be used for engineers and command line access.</p> <p>The recommended approach is to use the AWS IAM Identity Center as a Single Sign-On (SSO) service.  The IAM Identity Center can manage users and accounts in its own directory, useful for personal AWS accounts (and probably brand new startups too). The IAM Identity Center can use qn external identity provider instead, e.g. Okta, Google Workspace, Active Directory, etc.</p> <p>An AWS Organisation is required to enable IAM Identity Center. It can take up to 24 hours for AWS to create an organisation if one does not already exist for the AWS account.</p> <p>The IAM Identity Center approach will be covered in a future article.</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/accessing-aws-with-clojure-from-scratch---simple-approach/#summary","title":"Summary","text":"<p>This is only the start of using AWS from Clojure and almost all the work was to simply configuring AWS itself.</p> <p>There are lots of services to explore on AWS and with a working account and credentials and the excellent Cognitect Labs AWS API library it should be relatively straight forward (fingers crossed).</p> <p>Regularly review AWS usage</p> <p>Keep a considered eye on how much of AWS you are using.  </p> <p>Even when using a \"free plan\", it is possible to incur costs, e.g. forgetting to switch services off and exceeding quotas.  </p> <p>Its not clear as yet if AWS will stop the service or simply send a bill.  </p> <p>Being aware of the AWS quotas allowed for a service is a valuable step to ensure you can remain within the free plan.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["aws","clojure","cognitect-labs"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/","title":"FreeDesktop.org XDG standard for Clojure development tools","text":"<p>The  FreeDesktop.org XDG basedir standard defines specific locations to store all user configuration, data files and caches.</p> <p>Without the XDG standard, these files and directories are often mixed together and stored in the <code>$HOME</code>  of the users account, making it more challenging to backup or version control.</p> <p>Development tools such as NeoVim, Emacs, Clojure CLI  and Clojure LSP support the XDG specification, although some tools like Leiningen required a little help.  There are simple approaches to work-around the limitations of tools that don't conform.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#freedesktop-xdg-standards","title":"FreeDesktop XDG Standards","text":"<p>FreeDesktop.org produces standards under the Cross-Desktop Group, referred to as XDG.</p> <p>Two of the most relevant specifications for users are:</p> <ul> <li>Desktop base directories (basedir): defining the location of application configuration and data files</li> <li>Desktop entries (.desktop): to define executable, application name, icon and description, used by application launchers and desktop menus</li> </ul> <p>This article will focus on the basedir configuration and document the XDG locations for a range of common developer tools</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#xdg-environment-variables","title":"XDG Environment variables","text":"<p>The XDG Base Directory Specification defines specific environment variables to define each locations, usually set in the configuration file of the operating system shell, e.g. zsh, bash, fish.</p> <p>Each location contains application specific files within a directory of the same name as that application, e.g. <code>XDG_CONFIG_HOME/git</code> for Git version control client.</p> <ul> <li><code>XDG_CONFIG_HOME</code> user-specific configuration files, default <code>$HOME/.config</code></li> <li><code>XDG_DATA_HOME</code> user-specific data files. default <code>$HOME/.local/share</code></li> <li><code>XDG_STATE_HOME</code> user-specific state data <code>$HOME/.local/state</code></li> <li><code>XDG_CACHE_HOME</code> user-specific non-essential (cached) data, default <code>$HOME/.cache</code></li> <li><code>XDG_RUNTIME_DIR</code> runtime files bound to the login status of the user</li> </ul> <p><code>XDG_CONFIG_DIRS</code> and <code>XDG_DATA_DIRS</code> can be used to define an ordered set of directories to search for their respective files, rather than just a single directory.</p> <p>Environment variables must be set to an absolute path to be consider valid.  Values can include other environment variables, e.g. HOME, as long as the path resolves as absolute.</p> <p>A detailed description is covered in the freedesktop.org basedir specification.</p> MacOSX FreeDesktop.org XDG Standard Paths <p>According to Apple documentation, the XDG Base directory specifications should use these locations</p> <ul> <li><code>XDG_CONFIG_HOME</code> -\ufe0e <code>~/Library/Preferences/</code> using reverse domain name notation: <code>com.apple.AppStore.appname</code></li> <li><code>XDG_DATA_HOME</code> -\ufe0e <code>~/Library/</code></li> <li><code>XDG_CACHE_HOME</code> -\ufe0e <code>~/Library/Caches/</code></li> </ul> <p>See the Mac OS X Reference Library: Where to Put Application Files and Mac OS X Reference Library: Important Java Directories on Mac OS X</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#configuring-linux-unix-operating-system","title":"Configuring Linux / Unix operating system","text":"<p>The XDG basedir specification is used by many Unix distributions, although the <code>XDG_CONFIG_HOME</code> is rarely set as it may break older applications.  Instead the OS uses the default locations in the specifications and expects applications to do the same.</p> <p>Some tools already use the default location of <code>XDG_CONFIG_HOME</code>. Most maintained tools will use the XDG locations if the environment variables are set.</p> <p>Defining <code>XDG_CONFIG_HOME</code> before installing development tools and applications helps ensure that the right locations are used.</p> <p>Existing configurations are easily migrated to the <code>XDG_CONFIG_HOME</code> directory, either all at once or application by application.  If the configuration is not found in <code>XDG_CONFIG_HOME</code> the application should look for the configuration in the <code>HOME</code> directory.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#where-to-set-environment-variables","title":"Where to Set environment variables","text":"<p>For desktop launchers, edit the <code>.profile</code> file and export a value for <code>XDG_CONFIG_HOME</code>, which should then be used by all applications launched in this way.</p> <p>For example, the <code>XDG_CONFIG_HOME</code> is defined for all applications and <code>SPACEMACSDIR</code> is defined specifically for Spacemacs configuration for Emacs.</p> <p>Set XDG Locations</p> <pre><code># Ensure XDG_CONFIG_HOME is set when launching apps from destktop\nexport XDG_CONFIG_HOME=$HOME/.config\n\n# Application specific\nexport SPACEMACSDIR=$XDG_CONFIG_HOME/spacemacs\n\n\n# Recommended locations\nexport XDG_DATA_HOME=$HOME/.local/share\nexport XDG_CACHE_HOME=$HOME/.cache\nexport XDG_STATE_HOME=$HOME/.local/state\n</code></pre> <p>To apply these environment variables, logout of the desktop environment, then login again.  Now the environment variables are set.</p> <p>To test before logout/login, in a terminal run the command <code>source ~/.profile</code> and the environment variables will be available in that terminal session.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#command-line","title":"Command Line","text":"<p>The shell and all command line tools will use environment variables in <code>~/.profile</code>.  Or they can be set in the respective resource files for the terminal shell to add environment variables</p> <ul> <li>bash - use <code>~/.bashrc</code></li> <li>zsh - use <code>~/.zprofile</code> or <code>.zshenv</code></li> </ul> <p>For example, in <code>~/.zprofile</code>:</p> <p>Set XDG Config Home</p> <pre><code># Set XDG_CONFIG_HOME for clean management of configuration files\nexport XDG_CONFIG_HOME=\"$XDG_CONFIG_HOME=$HOME/.config\"\n</code></pre>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#zsh-prezto","title":"Zsh - prezto","text":"<p>Prezto is an rich configuration for Zsh that provides aliases, functions, auto completion and prompt themes including the popular Powerline10k theme. Prezto includes a wide range of optional modules such as git status, autosuggestions (fish shell completion), GPG, etc.</p> <p></p> <p>Install prezto in the <code>XDG_CONFIG_HOME/zsh</code> directory.</p> <p>Clone Prezto</p> <pre><code>git clone --recursive https://github.com/sorin-ionescu/prezto.git \"${XDG_CONFIG_HOME}/prezto\"\n</code></pre> <p>Prezto requires <code>~/.zshenv</code> to bootstrap the location of prezto configuration.  The <code>~/.zshenv</code> file can be a symbolic link to <code>XDG_CONFIG_HOME/zsh/.zshenv</code></p> <p>Set the <code>XDG_CONFIG_HOME</code> location to <code>HOME/.config</code> for all applications if not set in <code>~/.profile</code></p> <p>Set the <code>ZDOTDIR</code> location so Zsh can find the Prezto configuration.</p> <p>Zsh XDG config</p> <pre><code># Set XDG_CONFIG_HOME for clean management of configuration files\nexport XDG_CONFIG_HOME=\"${XDG_CONFIG_HOME:=$HOME/.config}\"\nexport ZDOTDIR=\"${ZDOTDIR:=$XDG_CONFIG_HOME/zsh}\"\n</code></pre> <p>Other application specific environment variables should be added to <code>.zshevn</code> file as well, e.g. <code>SPACEMACSDIR</code> for Spacemacs configuration.</p> Copy Prezto files that will be changed <p>Once installed, any prezto configuration files that will be added can be copied from the <code>.zprezto/runcoms</code> directory to <code>XDG_CONFIG_HOME/zsh</code>, rather than linking as the documentation suggests. </p> <p>This approach minimises the need to merge changes when updating prezto.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#neovim","title":"Neovim","text":"<p>Neovim supports the XDG basedir specification and will use <code>~/.config/nvim</code> directory by default.</p> <p>All the packages installed, such as the excellent Conjure for Clojure development (and many other fun languages), will therefore be part of the <code>~/.config/neovim</code> configuration.</p> <p>Vim does not support the basedir.  However, when Neovim is installed as a .deb package it will be used for the vim command (set via <code>/etc/alternatives/vim</code>)</p> Practicalli Neovim book <p>Practicalli Neovim provides guides for setting up Neovim with Clojure, LSP, Treesitter and many other packages</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#emacs-and-spacemacs-configuration","title":"Emacs and Spacemacs Configuration","text":"<p>Emacs will use <code>XDG_CONFIG_HOME/emacs</code> location if it contains an <code>init.el</code> file.</p> <p><code>SPACEMACSDIR</code> environment variable is used by Spacemacs to set the <code>dotspacemacs-directory</code>, defining where to look for the Spacemacs specific <code>init.el</code> file.</p> <p>Set <code>SPACEMACSDIR</code> to <code>XDG_CONFIG_HOME/spacemacs</code></p> <p>Spacemacs alternate location</p> <pre><code># Ensure XDG_CONFIG_HOME is set when launching apps from destktop\nexport XDG_CONFIG_HOME=\"$HOME/.config\"\n\n# Ensure Emacs can find the location of Spacemacs configuration\n# when using a desktop launcher\nexport SPACEMACSDIR=\"$XDG_CONFIG_HOME/spacemacs\"\n</code></pre> <p>Move the <code>.spacemacs</code> file to <code>XDG_CONFIG_HOME/spacemacs/init.el</code>.  Or if using <code>~/.spacemacs.d/</code> then move that directory to be the <code>XDG_CONFIG_HOME/spacemacs/</code> directory.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#authinfo-secure-credentials","title":"authinfo secure credentials","text":"<p>Connection credentials that include sensitive data (passwords, developer tokens) can be stored in <code>authinfo.pgp</code>, a PGP encrypted file. This providing an extra level of security for sensitive data.</p> <p>For example, Magit Forge uses authinfo.gpg to define a connection to GitHub or GitLab that includes a developer token.</p> <p>authinfo locations</p> <pre><code>  ;; Use XDG_CONFIG_HOME location or HOME\n  (setq auth-sources (list\n                      (concat (getenv \"XDG_CONFIG_HOME\") \"/authinfo.gpg\")\n                      \"~/.authinfo.gpg\"))\n</code></pre>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#doom-emacs","title":"Doom Emacs","text":"<p>If Emacs configuration is detected in <code>$HOME/.config/emacs</code> then Doom will install its configuration in <code>$HOME/.config/doom</code>, so long as <code>DOOMDIR</code> has not already been configured to a different location by the user.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#git","title":"Git","text":"<p>Git will write to and read from <code>XDG_CONFIG_HOME/git/config</code> as its configuration, if that file exists and <code>~/.gitconfg</code> does not exist.  Otherwise <code>~/.gitconfg</code> is used.</p> <p>Before running any <code>git</code> commands, create a config file in the XDG location</p> <p>Note</p> <pre><code>mkdir  $XDG_CONFIG_HOME/git &amp;&amp; touch  $XDG_CONFIG_HOME/git/config\n</code></pre> <p><code>git config</code> commands will now update the XDG configuration file, e.g. setting the user identity and configure diff to use the diff3 (shared parent) for merge conflicts</p> <p>Git Configuration</p> <pre><code>git config --global user.name \"John Practicalli\"\ngit config --global user.email \"******+account-name@users.noreply.github.com\"\ngit config --global merge.conflictstyle diff3\n</code></pre> <p>Add an ignore-global file to the <code>XDG_CONFIG_HOME/git</code> directory. Example excludes files can be found at github/gitignore repository or at practicalli/dotfiles</p> <p>Add an excludes file to the Git config file containing the patterns used across all the users projects.</p> <pre><code>git config --global core.excludesFile ~/.config/git/ignore-global\n</code></pre> <p>The git ignore file should be defined with the full path so tools like projectile can find that ignore file.</p> <p><code>XDG_CONFIG_HOME/git/template</code> is a common location for scripts and hooks that should be added to a newly created Git repository, in the <code>.git</code> directory.  The template location is set by <code>init.templatedir</code></p> <pre><code>mkdir  $XDG_CONFIG_HOME/git/template\n\ngit config --global init.templatedir template\n</code></pre>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#clojure-cli","title":"Clojure CLI","text":"<p>The <code>XDG_CONFIG_HOME/clojure</code> directory is the location for the Clojure CLI user level configuration files (e.g. <code>deps.edn</code>, <code>tools/tools.edn</code>).</p> <p>If <code>XDG_CONFIG_HOME</code> is not set or that location is not found, then <code>HOME/.clojure</code> is used instead.</p> <p>If <code>CLJ_CONFIG</code> is set to a value, then Clojure CLI commands will use that instead.</p> <p>Also see Maven and dependencies to manage the <code>$HOME/.m2/repository</code> directory</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#maven-and-dependencies","title":"Maven and dependencies","text":"<p>Clojure CLI and Leiningen use the Maven configuration directory to store Jar files from project (and tooling) dependencies, by default this is located in <code>$HOME/.m2/repository</code>.</p> <p>Jar files from dependencies are considered non-essential (to the Clojure CLI tool) so should be written to the $XDG_CACHE_HOME location, typically <code>$HOME/.cache</code></p> <p>Add the <code>:mvn/local-repo</code> top-level key in the user level deps.edn file to set a location for the Maven repository.  The value should be the full directory path.</p> <pre><code>:mvn/local-repo \"/home/practicalli/.cache/maven/repository\"\n</code></pre> <p>The <code>:mvn/local-repo</code> can also be used in a project deps.edn file or on the command line, i.e. <code>clojure -Sdeps '{:mvn/local-repo \".cache/temp-deps\"}'</code> if the Maven dependencies should be kept separate from all other projects (this scenario is not common).</p> <p>The Maven <code>$HOME/.m2</code> directory also contains several configuration files, <code>maven.config</code>, <code>jvm.config</code> and <code>extensions.xml</code>, so unfortunately conflates configuration files with data files.  Although Clojure CLI does not use these configuration files, it is useful to separate the jar files into a cache.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#clojure-gitlibs","title":"Clojure Gitlibs","text":"<p>Clojure CLI can used dependencies from Git repositories.  To do so, the repository is downloaded into a <code>$HOME/.gitlibs</code> directory, unless the <code>GITLIBS</code> environment variable is set.  As the <code>gitlibs</code> directory contains data for the application, then ideally this would be placed in <code>XDG_CACHE_HOME</code>, under a <code>clojure-gitlibs</code> directory</p> <p>Set the <code>GITLIBS</code> environment variable to determine the location of the local cache directory used to clone dependencies that are Git repositories.</p> <pre><code>export $GITLIBS=$XDG_CACHE_HOME/clojure-libs\n</code></pre> <p>Optionally move the existing <code>$HOME/.gitlibs</code> to the Cache home.</p> <pre><code>mv $HOME/.gitlibs $XDG_CACHE_HOME/clojure-gitlibs\n</code></pre>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#clojure-lsp","title":"Clojure LSP","text":"<p><code>XDG_CONFIG_HOME/clojure-lsp</code> directory is used as the location for Clojure LSP configuration if <code>XDG_CONFIG_HOME</code> is set.  Otherwise, <code>$HOME/.clojure-lsp</code> is used as the configuration.</p> <p>If Clojure LSP was used for for a while, configuration may be in the deprecated <code>~/.lsp</code> directory.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#intellij-idea-and-cursive","title":"Intellij Idea and Cursive","text":"<p>Intellij Idea from version 2020.1 uses the XDG basdir specification locations without the need to set XDG_CONFIG_HOME.</p> <p>Configuration is organised under the ~/.config/JetBrains/ directory with product and version sub-directories, for example:</p> <pre><code>~/.config/JetBrains/IntelliJIdea2022.1\n</code></pre> <p>Intellij IDEA 2020.1 documentation - configuration directories</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#leiningen","title":"Leiningen","text":"<p>Leiningen does not support configuration in <code>XDG_CONFIG_HOME</code>, although there is an outstanding issue to add this as an enhancement from 2016.</p> <p>Once Leiningen is installed, a temporary work-around would be to move the <code>~/.lein</code> directory to <code>XDG_CONFIG_HOME/leiningen</code> and create a symbolic link called <code>~/.lein</code></p> <pre><code>mv ~/.lein $XDG_CONFIG_HOME/leiningen\n\nln -s $XDG_CONFIG_HOME/leiningen ~/.lein\n</code></pre> <p>The <code>lein</code> script uses <code>LEIN_HOME</code> variable, although this is hard-coded in the script to <code>$HOME/.lein</code> and therefore is not usable to set as an operating system environment variable to change the configuration directory location.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#vs-code-and-calva","title":"VS Code and Calva","text":"<p>Unfortunately XDG basedir specification is not currently supported by VS Code and therefore Calva (although I assume the Clojure LSP tooling in Calva will use XDG_CONFIG_HOME)</p> <p>There is an outstanding issue on the VS Code, also from 2016, to revisit the configuration structure and support XDG_CONFIG_HOME.</p> <p>Using the symbolic link workaround, as with Leiningen, should work for VS Code too.</p> <pre><code>mv $HOME/.vscode $XDG_CONFIG_HOME/vscode\nln -s $XDG_CONFIG_HOME/vscode $HOME/.vscode\n</code></pre> <p>It is advisable to close VS Code before moving the configuration, to ensure the configuration has been saved.</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/freedesktoporg-xdg-standard-for-clojure-development-tools/#summary","title":"Summary","text":"<p>The XDG basedir specification makes it simple to back up and version a users configuration files as they are all under the one directory, i.e. <code>$HOME/.config</code></p> <p>As data and cache files are in different locations, then few if any ignore files are required to version the configuration files.</p> <p>Migrating is relatively quick and painless and applications can be migrated over time if required.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["debian","emacs","neovim","clojure-cli"]},{"location":"blog/advantages-of-writing-documentation-for-code/","title":"Advantages of writing documentation for code","text":"<p>Code that executes correctly and provides only limited value to the business can still be a huge maintenance burden.</p> <p>Code is very rarely written to include why is was added, what is the purpose of this code.</p> <p>Dismiss the value of adding documentation that describes the why of the code significantly increases the cost of maintaining and extending that code.  Skipping documentation adds to the engineering debt of any solution (even when the intention is to re-write that code).</p>","tags":["documentation"]},{"location":"blog/advantages-of-writing-documentation-for-code/#value-of-regular-documentation","title":"Value of regular documentation","text":"<p>As well as making the code base more useful, creating documentation on a regular basis:</p> <ul> <li>communicate more effectively with the wider business</li> <li>increases communication skills</li> <li>opportunity to learn more words</li> <li>get better at writing documentation</li> <li>become faster at writing documentation</li> <li> <p>becomes easier to update and extend documentation</p> </li> <li> <p>write better code - code tends to be much clearer if the person writing it has writing skills (better choice of names, smoother flow, more organised)</p> </li> <li>retain more knowledge in a persistent storage service (blog, tutorial, notes)</li> <li>share knowledge with others effectively</li> <li>minimise the need to answer the same questions over again</li> <li>get feedback from others</li> <li>become a more productive team as learning is shared and not redone over and over again</li> </ul> <p>Overhead of poor or no documentation</p> <p>Figuring out someone else's code by itself adds a lot of overhead and that someone else can also be you a few months (or even weeks) ago.</p>","tags":["documentation"]},{"location":"blog/advantages-of-writing-documentation-for-code/#typical-excuses","title":"Typical excuses","text":"<p>Most excuses not to write documentation really come from discomfort and even fear about a persons writing ability.  Ironically this is often quite a rational fear as writing good documentation is another skill to learn.</p> <ul> <li>dont have time  - documentation saves a huge amount of time overall</li> <li> <p>not paid to write docs - actually you are paid to create projects that other people can work on readily (without docs then people on-boarding to a project spend a lot more time reading the code - and probably end up rewriting it so they understand it)</p> </li> <li> <p>documentation doesnt keep up with code changes - an extension to the dont have time excuse.  If the thoughts in a persons head are written down succinctly or a summary of changes to be done to code then is just as easy to update the docs when changing the code.  Actually updating the docs is a valuable way to ensure a person understands the changes they are going to make (saving time debugging a system or dealing with issues by lack of understanding)</p> </li> <li> <p>dont like tool x, its slow - a very poor excuse.  Notes can be written as text / markdown / org whist writing code and then pushed to what ever collaborative knowledge share tool is used.  Doc tools are like any other coding tools,</p> </li> <li> <p>I dont get paid enough - a systemic problem meaning a person feels significantly undervalued within the company, therefore it is likely that most of their work will be of just enough quality to work but relatively challenging to work with.</p> </li> <li> <p>code is the documentation - a mixture of insecurity about docs and/or lack of experience of software development overall.  They have not make the connection that documentation provides a way to quickly recall previous experiences and build a greater level of skills.</p> </li> </ul> <p>Practicing writing skills overcomes excuses</p> <p>When developers take on the challenge of learning the skill of writing good documentation, to the same extent they do writing code, then writing good quality code becomes far easier very quickly.  Then all of the common excuses become mute.</p> <p>Thank you.</p> <p> Practical.li Website</p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["documentation"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/","title":"Advent Of Parens 2019 - feast on Clojure this holiday season","text":"<p>The holiday season is know for over indulge, so why not stuff your head full of Clojure and functional programming.  Its far healthier than the alternatives :)</p> <p>To help you indulge, Arne from LambdaIsland, Bobby Towers, Alexander Oloo and I are writing a blog post each day as part of the Advent Of Parens 2019 celebration.  Every day we plan to publish a short posts that share tips and experiences with functional programming and Clojure.</p> <p>You can find the articles I am planning to write on the  practicalli blog project board.</p> <p>While you wait to open these posts each day of December, I am kickstarting your feast of Clojure in this article.</p> <p>I also encourage you to take some time over the holiday season to practice Clojure</p> <ul> <li>Clojure Advent of Code</li> <li> Practicalli Clojure study group</li> </ul>","tags":["clojure","advent-of-parens"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/#discover-new-ideas-with-clojure-videos","title":"Discover new ideas with Clojure videos","text":"<p> Clojure TV YouTube channel has hundreds of videos from Clojure Conj conferences over the last 6 years.  Some of my favourites include</p> <ul> <li> Follow the Data: Product Development in Clojure - Derek Troy-West</li> <li> From Lazy Lisper to Confident Clojurist - Alexander Oloo</li> <li> Interactive Programming for Artificial Intelligence - Dragan Djuric</li> <li> Sherlock Holmes, Consulting Developer - Stuart Halloway</li> </ul> <p>Or just sit back and watch  all the amazing Clojure/conj 2019 talks back to back</p> <p>reClojure Conference videos</p> <p> reClojure conference videos will be available soon, subscribe to find out when the are published</p>","tags":["clojure","advent-of-parens"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/#studying-clojure","title":"Studying Clojure","text":"<p>For the last year I have run a YouTube based study and there are over 50 hours of video,  introducing Clojure concepts and building applications with Clojure and ClojureScript.</p> <p>See the Clojure Study group playlist for all the videos.  I am currently creating videos to introduce Clojure CLI and tools.deps approach to Clojure and ClojureScript projects.</p> <p>4Clojure solutions</p> <p>start learning Clojure CLI and tools.deps approach for Clojure</p> <p>Discuss any of the content that Practicalli creates on the #practicalli channel of the Clojurians Slack community.</p> <p>There are several excellent professional courses and tutorials available to help you deep dive into specific areas.  Take some time out and learn something new for the new year.</p> <ul> <li>Lambda Island - high quality and effective video tutorials on Clojure, with detailed transcripts</li> <li>Purelyfunctional.tv - comprehensive training courses for Clojure</li> <li>Learn re-frame - a detailed video-based course from an experienced JavaScript &amp; ClojureScript developer, Jacek Schae</li> </ul>","tags":["clojure","advent-of-parens"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/#cool-projects-to-try-out","title":"Cool projects to try out","text":"<p> Bobby Towers has some excellent projects that are very creative and inspiring projects, so great fun for all over the holiday season.</p> <ul> <li>Games: Conways Game of Life, Sudoku, Minesweeper, Tic-tac on my toe</li> <li>Music:  MECCA Music Platform, Exploring MIDI files,</li> <li>Graphics:  Convert images into SVG</li> </ul> <p> Michiel Borkent has been a prolific developer in the Clojure community, creating many excellent projects this year.  It is definitely worth investing a little time getting to know these projects</p> <ul> <li> re-find - to find a function based on arguments and expected return value.  Try the  re-find website too.</li> <li>clj-kondo - my favourite Clojure lint tool that can be used interactively in your editor or as a script in a CI or other batch process.</li> <li> jet - a command line tool to transform between JSON, EDN and Transit</li> <li> babashka - when you want to write Clojure rather than a bash script</li> </ul>","tags":["clojure","advent-of-parens"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/#clojure-podcasts","title":"Clojure podcasts","text":"<p>There are many engaging discussions on Clojure and functional programming in the following podcasts.</p> <ul> <li> <p> Apropos cast - an eclectic discussion and collaborative hack session with Clojure.</p> </li> <li> <p>clojurescript podcast - with many Clojure and ClojureScript contributors, giving a deep insight into the language and development aproach.</p> </li> <li> <p>clojure design club - a very enjoyable discussion between two experienced developers working with Clojure, discussing issues raised by the community.</p> </li> <li> <p>cognicast - a long running podcast from the stewards of the Clojure language</p> </li> <li> <p>defn podcast - an enjoyable but occasionally sweary podcast by one of the characters in the Clojure community.</p> </li> <li> <p> The REPL - regular news about Clojure and activities in the community (also a mailing list)</p> </li> <li> <p> JUXT Cast - a new broadcasts from the development team at JUXT, a very active Clojure consultancy company</p> </li> </ul> <p>I listen to these podcasts when I go for a walk in the park or shopping for fresh fruit and vegetables.</p>","tags":["clojure","advent-of-parens"]},{"location":"blog/advent-of-parens-2019---feast-on-clojure-this-holiday-season/#summary","title":"Summary","text":"<p>I hope you enjoy the rich content available in the Clojure community and have a very merry Clojure holiday season.</p> <p>If there are any topics or tips you need help with, please get in touch via the Clojurians Slack community.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["clojure","advent-of-parens"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/","title":"Automate Cryogen Clojure blog with GitHub Actions","text":"<p>Practicalli uses Cryogen static site generator for its blog website.  Cryogen is fast and simple to use thanks to the Clojure EDN file used for configuration.</p> <p>Cryogen documentation shows how to publish a Cryogen blog to GitHub pages using Git command.  The deployment can be automated using GitHub actions, so that a new version of the site is deployed when Pull Requests are merged to the specified branch (or on direct commits to that branch).</p>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#what-does-the-github-workflow-do","title":"What does the GitHub workflow do?","text":"<p>This is a combination of GitHub actions, each doing a specific part of the automated workflow.</p> <p>The publish job runs on an Ubuntu docker image and the Checkout step performs a git checkout of the project into the docker image.</p> <p>Prepare Java step uses the setup-java action to add Java 11 to the docker image, using the Eclipse Foundation <code>temurin</code> image </p> OpenJDK manged by Eclipse Foundation <p>OpenJDK / AdoptOpenJDK is now part of the Eclipse Foundation).</p> <p>Install clojure tools step uses the setup-clojure action to add the specified version of Clojure CLI tools (Leiningen and Boot build tools are also supported)</p> <p>Build blog site step calls the Cryogen function using Clojure CLI tools to build the static site</p> <p>Publish to GitHub pages step uses the github-pages-deploy-action to deploy a specific directory, the directory built by Cryogen, to another branch of the original repository or a different repository. If the branch does not exist, the action will create it.</p>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#deploying-to-other-repositories","title":"Deploying to other repositories","text":"<p>When deploying the Cryogen site to the same GitHub repository as the source files, the github-pages-deploy-action does not require an explicit token to be added. The action uses the default repository scoped GitHub token.</p> <p>If deploying the site to another repository from that of its source files, create a GitHub secret with a value of a Personal Access Token (PAT). The personal access token should have the least permissions necessary, usually only <code>repo</code>.</p> <p>A GitHub secret can be added at user or organisation level and configured for specific repositories.</p>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#add-github-action","title":"Add GitHub Action","text":"<p>Create a file called <code>.github/workflows/cryogen-publish.yml</code> and add a workflow configuration.</p> <pre><code>name: Publish Blog\non:\n  push:\n    branches:\n    - live\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n\n      - name: Prepare java\n        uses: actions/setup-java@v2\n        with:\n          distribution: 'temurin'\n          java-version: '11'\n\n      - name: Install clojure tools\n        uses: DeLaGuardo/setup-clojure@3.5\n        with:\n          cli: 1.10.3.943\n\n      - name: Build Blog site\n        run: clojure -M:build\n\n      - name: Publish to GitHub Pages\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          commit-message: ${{ github.event.head_commit.message }}\n          branch: gh-pages                                      # branch to deploy to\n          single-commit: yes                                    # no commit history\n          folder: public/blog                                   # directory to deploy from\n</code></pre>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#github-action-configuration-with-token","title":"GitHub Action configuration with token","text":"<p>If deploying to a different repository than the source, then add a token to either a repository, account or organisation secret.  Use a GitHub Personal Access Token for the value of the token secret.</p> <pre><code>      - name: Publish to GitHub Pages\n        uses: JamesIves/github-pages-deploy-action@4.1.4\n        with:\n          commit-message: ${{ github.event.head_commit.message }}\n          token: ${{ secrets.PRACTICALLI_BLOG_PUBLISH_TOKEN }}  # GitHub secret\n          repository-name: practicalli/deployed-blog            # repository to deploy to\n          branch: gh-pages                                      # branch to deploy to\n          single-commit: yes                                    # no commit history\n          folder: public/blog                                   # directory to deploy from\n</code></pre>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#deploying-to-aws-s3-bucket","title":"Deploying to AWS S3 bucket","text":"<p>Cryogen can also be published to an Amazon S3 bucket by taking the above GitHub action and replacing the Publish to GitHub Pages step.</p> <p>Add the following step in its place and add GitHub secrets to the Git Repository for AWS access and the name of the AWS bucket.</p> <pre><code>    - name: Publish to AWS S3\n      uses: jakejarvis/s3-sync-action@master\n      with:\n        args: --follow-symlinks --delete --acl public-read\n      env:\n        AWS_S3_BUCKET: ${{ secrets.AWS_S3_BUCKET }}\n        AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n        AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        AWS_REGION: 'eu-west-2'\n        SOURCE_DIR: 'public/blog'\n</code></pre> <p>NOTE: also check the AWS region is the correct one for your needs</p>","tags":["static-site","github-action"]},{"location":"blog/automate-cryogen-clojure-blog-with-github-actions/#summary","title":"Summary","text":"<p>Once the <code>.github/workflows/cryogent-publish.yml</code> file is committed to the default branch of the repository, any commits to that branch or merged pull requests to that branch will trigger the workflow and publish a new version of the Cryogen static website.</p> <p>Consider adding linters and other GitHub Actions to check for potential issues with markdown and other aspects of the website, to avoid checking in content that may break the website.</p> <p>Setting up monitoring of the website is also recommended, using simple monitoring tools such as StatusCake.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["static-site","github-action"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/","title":"Build and run Clojure with Multi-stage Dockerfile","text":"<p>Deployment of a Clojure service is very simple, requiring only an Uberjar (archive file containing the Clojure Project and Clojure run-time) and the Java Run-time Environment (JRE).</p> <p>A Clojure service rarely works in isolation and although many services are access via a network connection (defined in Environment Variables), provisioning containers to build and run Clojure along with any other services can be valuable as complexity of the architecture grows.</p> <p>A Multi-stage <code>Dockerfile</code> is an effective way to build and run Clojure projects in continuous integration pipelines and during local development where multiple services are required for testing.</p> <p>Docker Hub provides a wide range of images, supporting development, continuous integration and system integration testing.</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#multi-stage-dockerfile","title":"Multi-stage Dockerfile","text":"<p>A multi-stage <code>Dockerfile</code> contains builder stage and a run-time stage (usually unnamed).  There may also be a common stage used by both bulder and run-time states.</p> <p>The builder stage should be optimised for building the Clojure project, i.e. caching dependencies and layers, building only layers that change.</p> <p>The run-time stage should be optimised for running the service efficiently and securely, including only essential files for a minimal size.</p> <p>The uberjar created by the builder image is copied over to the run-time image to keep that image as clean and small as possible (to minimise resource use).</p> <p> Example  Multi-stage <code>Dockerfile</code> for Clojure projects derived from the configuration currently used for commercial and open source work.  The example uses make targets, which are Clojure commands defined in the example Makefile</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#official-docker-images","title":"Official Docker images","text":"<p>Docker Hub contains a large variety of images, using those tagged with Docker Official Image is recommended.</p> <ul> <li> Clojure - official Docker Image - provides tools to build Clojure projects (Clojure CLI, Leiningen, Boot)</li> <li> Eclipse temurin OpenJDK - official Docker image - built by the  community - provides the Java run-time</li> </ul> <p>Ideally a base image should be used where both builder and run-time images share the same ancestor, this helps maintain consistency between build and run-time environments.</p> <p>The Eclipse OpenJDK image is used by the Clojure docker image, so they implicitly use the same base image without needed to be specified in the project <code>Dockerfile</code>.  The Eclipse OpenJDK image could be used as a base image in the <code>Dockerfile</code> but it would mean repeating (and maintaining) much the work done by the official Clojure image)</p> Alternative Docker images <ul> <li>CircleCI Convenience Images =&gt; Clojure - an optimised Clojure image for use with the CircleCI service</li> <li>Amazon Corretto is an alternative version of OpenJDK</li> </ul> Official Docker Image definition <p>An Official Docker Image means the configuration of that image follows the Docker recommended practices, is well documented and designed for common use cases.</p> <p>There is no implication as to the correctness of tools, languages or service that image provides, only in the means in which they are provided.</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#clojure-image-as-builder-stage","title":"Clojure image as Builder stage","text":"<p>Practicalli uses the latest Clojure CLI release and the latest Long Term Support (LTS) version of Eclipse Temurin (OpenJDK).  Alpine Linux is used to keep the image file size as small as possible, reducing local resource requirements (and image download time).</p> <p>Builder Image</p> <pre><code>FROM clojure:temurin-17-alpine AS builder\n</code></pre> <p><code>CLOJURE_VERSION</code> will over-ride the version of Clojure CLI in the Clojure image (which defaults to latest Clojure CLI release). Or choose an image that has a specific Clojure CLI version, e.g. <code>temurin-17-tools-deps-1.11.1.1182-alpine</code></p> <p>Builder Image with Clojure CLI version</p> <pre><code>FROM clojure:temurin-17-alpine AS builder\nENV CLOJURE_VERSION=1.11.1.1182\n</code></pre> <p>Create directory for building the project code and set it as the working directory within the Docker container to give RUN commands a path to execute from.</p> <p>Create working directory</p> <pre><code>RUN mkdir -p /build\nWORKDIR /build\n</code></pre>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#cache-dependencies","title":"Cache Dependencies","text":"<p>Clojure CLI is used to download dependencies for the project and any other tooling used during the build stage, e.g. test runners, packaging tools to create an uberjar.  Dependency download should only occur once, unless the <code>deps.edn</code> file changes.</p> <p>Copy the <code>deps.edn</code> file to the build stage and use the <code>clojure -P</code> prepare (dry run) command to download the dependencies without running any Clojure code or tools.</p> <p>Prepare dependencies</p> <pre><code>COPY deps.edn /build/\nRUN clojure -P -X:build\n</code></pre> <p>The dependencies are cached in the Docker overlay (layer) and this cache will be used on successive docker builds unless the <code>deps.edn</code> file is change.</p> <p><code>deps.edn</code> in this example contains the project dependencies and <code>:build</code> alias used build the Uberjar.</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#build-uberjar","title":"Build Uberjar","text":"<p>Copy all the project files to the docker builder working directory, creating another overlay.</p> <p>Copying the src and other files in a separate overlay to the <code>deps.edn</code> file ensures that changes to the Clojure code or configuration files does not trigger downloading of the dependencies again.</p> <p>Run the <code>tools.build</code> command to generate an Uberjar.</p> <p>Build Project Uberjar</p> <pre><code>COPY ./ /build\nRUN clojure -T:build uberjar\n</code></pre> <p><code>:build</code> is an alias to include Clojure tools.build dependencies which is used to build the Clojure project into an Uberjar.</p> Using make task for build <p>When using make for the build, also copy the <code>Makefile</code> to the builder stage and call the <code>deps</code> target to download the dependencies</p> <p>Ensure <code>deps</code> target in the <code>Makefile</code> depends on the <code>deps.edn</code> file so the target is skipped if that file has not changed.</p> <p><pre><code>COPY deps.edn Makefile /build/\nRUN make deps\n</code></pre> call the <code>dist</code> target to build the Uberjar <pre><code>COPY ./ /build\nRUN RUN make dist\n</code></pre></p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#docker-ignore-patterns","title":"Docker Ignore patterns","text":"<p><code>.dockerignore</code> file in the root of the project defines file and directory patterns that Docker will ignore with the COPY command.  Use <code>.dockerignore</code> to avoid copying files that are not required for the build</p> <p>Keep the <code>.dockerignore</code> file simple by excluding all files with <code>*</code> pattern and then use the <code>!</code> character to explicitly add files and directories that should be copied</p> <p>Docker ignore patterns</p> <pre><code># Ignore all files\n*\n\n# Include Clojure code and config\n!deps.edn\n!Makefile\n!src/\n!test/\n!test-data/\n!resources/\n</code></pre> <p><code>Makefile</code> and <code>test-data</code> directories are commonly used by Practicalli, although in general are not widely needed.</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#openjdk-for-run-time-stage","title":"OpenJDK for Run-time stage","text":"<p>The Alpine Linux version of the Eclipse Temurin image is used as it is around 5Mb in size, compared to 60Mb or more of other operating system images.</p> <p>Alpine Linux image with OpenJDK for Run-time stage</p> <pre><code>FROM eclipse-temurin:17-alpine\n</code></pre> <p>Run-time containers are often cached in a repository, e.g. AWS Container Repository (ECR).  <code>LABEL</code> adds metadata to the container helping it to be identified in a repository or in a local development environment.</p> <p>Add meta data to the docker configuration</p> <pre><code>LABEL org.opencontainers.image.authors=\"nospam+dockerfile@practicall.li\"\nLABEL io.github.practicalli.service=\"Gameboard API Service\"\nLABEL io.github.practicalli.team=\"Practicalli Engineering Team\"\nLABEL version=\"1.0\"\nLABEL description=\"Gameboard API service\"\n</code></pre> <p>Use <code>docker inspect</code> to view the metadata</p> <p>Optionally, add packages to support running the service or helping to debug issue in the container when it is running.  For example, add <code>dumb-init</code> to manage processes, <code>curl</code> and <code>jq</code> binaries for manual running of system integration testing scripts for API testing.</p> <p><code>apk</code> is the package tool for Alpine Linux and <code>--no-cache</code> option ensures the install file is not part of the resulting image, saving resources.  Alpine Linux recommends setting versions to use any point release with the <code>~=</code> approximately equal version, so any same major.minor version of the package can be used.</p> <p>Additional Alpine Packages</p> <pre><code>RUN apk add --no-cache \\\n    dumb-init~=1.2.5 \\\n    curl~=8.0.1 \\\n    jq~=1.6\n</code></pre> <p>Check Alpine packages if new major versions are no longer available (low frequency)</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#create-non-root-group-and-user-to-run-service-securely","title":"Create Non-root group and user to run service securely","text":"<p>Docker runs as root user by default and if a container is compromised the root permissions and could lead to a compromised system.  Add a user and group to the run-time image and create a directory to contain service archive, owned by the non-root user.  Then instruct docker that all future commands should run as the non-root user</p> <p>Non-root account creation</p> <pre><code>RUN addgroup -S practicalli &amp;&amp; adduser -S practicalli -G practicalli\nRUN mkdir -p /service &amp;&amp; chown -R practicalli. /service\nUSER practicalli\n</code></pre>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#copy-uberjar-to-run-time-stage","title":"Copy Uberjar to run-time stage","text":"<p>Create a directory to run the service or use a known existing path that will not clash with any existing files from the image.</p> <p>Set the working directory and copy the uberjar archive file from Builder image</p> <p>Copy Uberjar to run-time stage</p> <pre><code>RUN mkdir -p /service\nWORKDIR /service\nCOPY --from=builder /build/practicalli-service.jar /service/practicalli-service.jar\n</code></pre> <p>Optionally, add system integration testing scripts to the run-time stage for testing from within the docker container.</p> <p>Copy test scripts</p> <pre><code>RUN mkdir -p /service/test-scripts\nCOPY --from=builder /build/test-scripts/curl--* /service/test-scripts/\n</code></pre>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#set-service-environment-variables","title":"Set Service Environment variables","text":"<p>Define values for environment variables should they be required (usually for debugging), ensuring no sensitive values are used. Environment variables are typically set by the service provisioning the containers (AWS ECS / Kubernettes) or on the local OS host during development (Docker Desktop).</p> <p>Environment Variables</p> <pre><code># optional over-rides for Integrant configuration\n# ENV HTTP_SERVER_PORT=\n# ENV MYSQL_DATABASE=\nENV SERVICE_PROFILE=prod\n</code></pre>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#optimising-the-container-for-java-virtual-machine","title":"Optimising the container for Java Virtual Machine","text":"<p>Clojure Uberjar runs on the Java Virtual Machine which is a highly optimised environment that rarely needs adjusting, unless there are noticeable performance or resource issue use.  The most likely option to set is the minimum and maximum heap sizes, i.e. <code>-XX:MinRAMPercentage</code> and <code>-XX:MaxRAMPercentage</code>.</p> <p><code>java -XshowSettings -version</code> displays VM settings (vm), Property settings (property), Locale settings (locale), Operating System Metrics (system) and the version of the JVM used.  Add the category name to show only a specific group of settings, e.g. <code>java -XshowSettings:system -version</code>.</p> <p><code>JDK_JAVA_OPTIONS</code> can be used to tailor the operation of the Java Virtual Machine, although the benefits and constraints of options should be well understood before using them (especially in production).</p> <p>Example: show system settings on startup, force container mode and set memory heap maximum to 85% of host memory size.</p> <p>Java Virtual Machine (JVM) options</p> <pre><code>ENV JDK_JAVA_OPTIONS \"-XshowSettings:system -XX:+UseContainerSupport -XX:MaxRAMPercentage=85\"\n</code></pre> <p>Relative heap memory settings (<code>-XX:MaxRAMPercentage</code>) should be used for containers rather than the fixed value options (<code>-Xmx</code>) as the provisioning service for the container may control and change the resources available to a container on deployment (especially a Kubernettes system).</p> <p>Options that are most relevant to running Clojure &amp; Java Virtual Machine in a container include:</p> <ul> <li><code>-XshowSettings:system</code> display (container) system resources on JVM startup</li> <li><code>-XX:InitialRAMPercentage</code> Percentage of real memory used for initial heap size</li> <li><code>-XX:MaxRAMPercentage</code> Maximum percentage of real memory used for maximum heap size</li> <li><code>-XX:MinRAMPercentage</code> Minimum percentage of real memory used for maximum heap size on systems with small physical memory</li> <li><code>-XX:ActiveProcessorCount</code> specifies the number of CPU cores the JVM should use regardless of container detection heuristics</li> <li><code>-XX:\u00b1UseContainerSupport</code> force JVM to run in container mode, disabling container detection (only useful if JVM not detecting container environment)</li> <li><code>-XX:+UseZGC</code> low latency Z Garbage collector (read the Z Garbage collector documentation and understand the trade-offs before use) - the default Hotspot garbage collector is the most effective choice for most services</li> </ul> <p>Without performance testing of a specific Clojure service and analysis of the results, let the JVM use its own heuristics to determine the most optimum strategies it should use</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#provide-access-to-running-clojure-service","title":"Provide Access to running Clojure service","text":"<p>If Clojure service listens to network requests when running, then the port it is listening on should be exposed so the world outside the container can communicate to the Clojure service.</p> <p>e.g. expose port of HTTP Server that runs the Clojure service</p> <p>Expose Port of Clojure service</p> <pre><code>EXPOSE 8080\n</code></pre>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#command-to-run-the-service","title":"Command to run the service","text":"<p>Finally define how to run the Clojure service in the container.  The <code>java</code> command is used with the <code>-jar</code> option to run the Clojure service from the Uberjar archive.</p> <p>The <code>java</code> command will use arguments defined in <code>JDK_JAVA_OPTIONS</code> automatically.</p> <p>ENTRYPOINT directive defines the command to run the service</p> <p>Define entrypoint to run the Clojure service</p> <pre><code>ENTRYPOINT [\"java\", \"-jar\", \"/service/practicalli-service.jar\"]\n</code></pre> Understanding the Docker image ENTRYPOINT <p><code>ENTRYPOINT</code> is the recommended way to run a service in Docker.  <code>CMD</code> can be used to pass additional arguments to the <code>ENTRYPOINT</code> command, or used instead of <code>ENTRYPOINT</code>.</p> <p><code>jshell</code>is the default <code>ENTRYPOINT</code> for the Eclipse Temurin image, so <code>jshell</code> will run if an <code>ENTRYPOINT</code> of <code>CMD</code> directive is not included in the run-time stage of the <code>Dockerfile</code>.</p> <p>The <code>ENTRYPOINT</code> command runs as process id 1 (PID 1) inside the docker container.  In a Linux system PID 1 should respond to all TERM and SIGTERM signals.</p> <p>dump-init provides a simple process supervisor and init system, designed to run as PID 1 and manage all signals and child processes effectively.</p> <p>Use <code>dumb-init</code> as the <code>ENTRYPOINT</code> command and <code>CMD</code> to pass the java command to start the Clojure service as an argument.  <code>dumb-init</code> ensures <code>TERM</code> signals are sent to the Java process and all child processes are cleaned up on shutdown.</p> <pre><code>ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\nCMD [\"java\", \"-jar\", \"/service/practicalli-service.jar\"]\n</code></pre> <p>Alternatively, run dumb-jump and java within the <code>ENTRYPOINT</code> directive, <code>ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\", \"java\", \"-jar\", \"/service/practicalli-service.jar\"]</code></p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#build-and-run-with-docker","title":"Build and Run with docker","text":"<p>Ensure docker services are running, i.e. start docker desktop.</p> <p>Build the service and create an image to run the Clojure service in a container with <code>docker build</code>.  Use a <code>--tag</code> to help identify the image and specify the context (in this example the root directory of the current project, <code>.</code>)</p> <pre><code>docker build --tag practicalli/service-name:1.1 .\n</code></pre> <p>After the first time building the docker image, any parts of the build that havent changed will use their respective cached layers in the builder stage.  This can lead to very fast, even zero time builds.</p> <p></p> <p>Maximising the docker cache by careful consideration of command order and design in a <code>Dockerfile</code> can have a significant positive affect on build speed. Each command is effectively a layer in the Docker image and if its respective files have not changed, then the cached version of the command will be run</p> <p>Run the built image in a docker container using <code>docker run</code>, publishing the port number so it can be used from the host (developer environment or deployed environment).  Use the name of the image created by the tag in the docker build command.</p> <pre><code>docker run --publish 8080:8080 practicalli/service-name\n</code></pre> <p>Docker Compose to orchestrate services locally</p> <p>Consider creating a Docker <code>compose.yml</code> file that defines all the services that should be run to support local development</p> <p>run <code>docker compose up</code> to start all the services, including pauses for heath checks where service startup depends on other services.</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/build-and-run-clojure-with-multi-stage-dockerfile/#summary","title":"Summary","text":"<p>A Multi-stage <code>Dockerfile</code> is an effective way of building and running Clojure projects, especially as the architecture grows in complexity.</p> <p>Organising the commands in the <code>Dockerfile</code> to maximise the use of docker cache will speed up the build time by skipping tasks that would not change the resulting image.</p> <p>Consider creating a <code>docker-compose.yaml</code> file to orchestrate services that are required for development of the project and local system integration testing.</p> <p>Thank you.</p> <p> Practical.li Website</p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["docker","clojure","java","jvm"]},{"location":"blog/building-emacs-28-on-ubuntu-linux/","title":"Building Emacs 28 on Ubuntu Linux","text":"<p>Emacs 28.1 is a feature packed release and includes native compilation to significantly increase the speed of all Emacs software packages installed.  This is a very noticeable difference, especially when Emacs is at the center of your developer workflow.</p> <p>Ubuntu hasn't packaged Emacs 28.1 yet, although its usually straight forward to build Emacs yourself.</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#a-very-brief-summary","title":"A very brief summary","text":"<pre><code>sudo apt build-dep emacs &amp;&amp; /\nsudo apt install libgccjit0 libgccjit-10-dev libjansson4 libjansson-dev gnutls-bin\n</code></pre> <p>Download Emacs 28 source code and open a terminal in the root of the extracted emacs28-1 directory</p> <pre><code>export CC=/usr/bin/gcc-10  &amp;&amp; export CXX=/usr/bin/gcc-10 &amp;&amp; ./autogen.sh &amp;&amp; ./configure --with-native-compilation &amp;&amp; /\nmake -j$(proc)  &amp;&amp; /\nsudo make install\n</code></pre> <p>Read the rest of the article for a more detailed description</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#prepare-ubuntu","title":"Prepare Ubuntu","text":"<p>Open <code>Software &amp; Updates</code> and ensure the Source Code source is enabled and reload the package list (or run <code>sudo apt update</code> in a terminal after adding Source Code)</p> <p></p> <p>Ask Ubuntu to install the packages required to build Emacs (there will be quite a few packages if this is the first software built with GCC on the operating system)</p> <pre><code>sudo apt build-dep -y emacs\n</code></pre> <p>The previous approach was to use <code>sudo apt-get install build-essential gcc git-core</code>. Using build-deps manages the set of packages required as Emacs evolves.</p> <p>Install some additional libraries to support the newest features of Emacs, native compilation of Emacs packages (<code>libgccjit</code>) and fast JSON processing (<code>libjansson</code>).  These really boost performance, so are important to add.</p> <pre><code>sudo apt install libgccjit0 libgccjit-10-dev libjansson4 libjansson-dev\n</code></pre> <p>On Ubuntu 20.04 <code>sudo apt-get install gnutls-bin</code>  removes a potential issue from an older certificates library</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#preparing-emacs-source-code","title":"Preparing Emacs source code","text":"<p>Download Emacs 28.1 source from a nearby GNU mirror, either tar.gz or tar.xz</p> <p>Extract the source code using nautilus, file-roller or in a terminal with the command <code>tar zvxf emacs-28.1.tar.xz</code></p> <p>In a terminal window, change into the emacs28.1 directory</p> <pre><code>cd emacs28-1\n</code></pre> <p>Set <code>CC</code> and <code>CXX</code> environment variables to inform the Emacs configuration script as to the location of gcc-10, otherwise it fails to find libgccjit</p> <pre><code>export CC=/usr/bin/gcc-10 &amp;&amp; export CXX=/usr/bin/gcc-10\n</code></pre> <p>If CC and CXX environment variables are not set, the configure script will not find important libraries and report errors such as: <code>configure: error: ELisp native compiler was requested, but libgccjit was not found.</code></p> <p>Run the autogen script to create a configure script specific to your operating system.</p> <pre><code>./autogen.sh\n</code></pre> <p>Run the configuration script with the native compilation flag.  This script will check the operating system for tools and libraries needed to build Emacs on your operating system.</p> <pre><code>./configure --with-native-compilation\n</code></pre> <p>Check the output of <code>./configure</code> was successful, see the end of this article for an example.  Ignore warnings about movemail if not using Emacs for local email management.</p> <p><code>./configure --help</code> lists available flags. Generally features are enabled if the required libraries are installed on the operating system. A noticeable exception is native compilation, as its a relatively new feature and not enabled by default.</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#building-emacs-locally","title":"Building Emacs locally","text":"<p>Build Emacs using all the CPU's of your computer.  <code>-j</code> flag specifies the number of CPU's to use, <code>nproc</code> command returns the total number of CPU's for the computer (real and virtual cores combined).</p> <pre><code>make -j$(nproc)\n</code></pre> <p>Run Emacs using the <code>-Q</code> option to check Emacs runs without using a users configuration file (e.g. without loading an `~/.emacs.d/ configuration)</p> <pre><code>./src/emacs -Q\n</code></pre> <p><code>C-x C-c</code> to quit Emacs.</p> <p>If Emacs runs then it is ready to install.</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#install-emacs-system-wide","title":"Install Emacs system wide","text":"<p>Install <code>emacs</code> and <code>emacsclient</code> to <code>/usr/local/bin</code> along with supporting libraries and man pages using the Makefile</p> <pre><code>sudo make install\n</code></pre> <p>To install in a different location, pass the full path using the <code>--prefix</code> option to make, e.g <code>make install --prefix /opt/emacs</code></p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#running-emacs","title":"Running Emacs","text":"<p>If the default <code>/usr/local</code> path was used to install Emacs, then the <code>emacs</code> and <code>emacsclient</code> binary files are already on the executable path</p> <p>In a terminal, run the emacs command</p> <pre><code>emacs\n</code></pre> <p>If using Emacs 28 with Spacemacs for the first time, all Spacemacs packages in your configuration will be downloaded and compiled.  This may take 5-15 minutes and Emacs may make full use of your CPU (spawning several emacs processes on multi-core computers)</p> <p>Leave Emacs for a few minutes running until the CPU activity has subsided and then consider restarting Emacs to ensure the packages have been loaded in the correct order.</p> <p>Expect to see lots of warning messages when installing more than 250 emacs packages.  Ignore these warnings until all packages have been installed.  If warnings still occur after restarting Emacs, then start investigating (or ask questions on #spacemacs channel in the Clojurians Slack community)</p>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#removing-emacs","title":"Removing Emacs","text":"<p>In the Emacs source code directory where Emacs was built, use the Makefile to remove the Emacs binaries, libraries and man pages.</p> <pre><code>sudo make uninstall\n</code></pre>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#emacs-build-configure-output","title":"Emacs build configure output","text":"<p>Typical output of  <code>./configure --with-native-compilation</code></p> <p>Almost all configuration options should be yes, although there are a few legacy libraries or settings for other OSs that should be no.</p> <pre><code>Configured for 'x86_64-pc-linux-gnu'.\n\n  Where should the build process find the source code?    .\n  What compiler should emacs be built with?               /usr/bin/gcc-10 -g3 -O2\n  Should Emacs use the GNU version of malloc?             no\n    (The GNU allocators don't work with this system configuration.)\n  Should Emacs use a relocating allocator for buffers?    no   (use operating system allocator)\n  Should Emacs use mmap(2) for buffer allocation?         no  (use operating system mmap)\n  What window system should Emacs use?                    x11\n  What toolkit should Emacs use?                          GTK3\n  Where do we find X Windows header files?                Standard dirs\n  Where do we find X Windows libraries?                   Standard dirs\n  Does Emacs use -lXaw3d?                                 no  (superseded by gtk)\n  Does Emacs use -lXpm?                                   yes\n  Does Emacs use -ljpeg?                                  yes\n  Does Emacs use -ltiff?                                  yes\n  Does Emacs use a gif library?                           yes -lgif\n  Does Emacs use a png library?                           yes -lpng16 -lz\n  Does Emacs use -lrsvg-2?                                yes\n  Does Emacs use cairo?                                   yes\n  Does Emacs use -llcms2?                                 yes\n  Does Emacs use imagemagick?                             no  (deprecated Emacs 27.1 - security issues)\n  Does Emacs use native APIs for images?                  no  (only for MS-Windows)\n  Does Emacs support sound?                               yes\n  Does Emacs use -lgpm?                                   yes\n  Does Emacs use -ldbus?                                  yes\n  Does Emacs use -lgconf?                                 no\n  Does Emacs use GSettings?                               yes\n  Does Emacs use a file notification library?             yes -lglibc (inotify)\n  Does Emacs use access control lists?                    yes -lacl\n  Does Emacs use -lselinux?                               yes\n  Does Emacs use -lgnutls?                                yes\n  Does Emacs use -lxml2?                                  yes\n  Does Emacs use -lfreetype?                              yes\n  Does Emacs use HarfBuzz?                                yes\n  Does Emacs use -lm17n-flt?                              yes\n  Does Emacs use -lotf?                                   yes\n  Does Emacs use -lxft?                                   no\n  Does Emacs use -lsystemd?                               yes\n  Does Emacs use -ljansson?                               yes\n  Does Emacs use the GMP library?                         yes\n  Does Emacs directly use zlib?                           yes\n  Does Emacs have dynamic modules support?                yes\n  Does Emacs use toolkit scroll bars?                     yes\n  Does Emacs support Xwidgets?                            no  (deprecated)\n  Does Emacs have threading support in lisp?              yes\n  Does Emacs support the portable dumper?                 yes\n  Does Emacs support legacy unexec dumping?               no\n  Which dumping strategy does Emacs use?                  pdumper\n  Does Emacs have native lisp compiler?                   yes\n</code></pre>"},{"location":"blog/building-emacs-28-on-ubuntu-linux/#references","title":"References","text":"<ul> <li>Emacs 28.1 whats new - a very detailed description of new features in Emacs 28.1</li> <li>Emacs Wiki - Building Emacs - base instructions for building Emacs</li> <li>Ubuntu Emacs LISP team PPA - nightly builds from the latest Emacs commits</li> </ul> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>"},{"location":"blog/build-emacs-from-source-on-debian-linux/","title":"Build Emacs from source on Debian Linux","text":"<p>Emacs 29 is the current stable release, adding major features: Eglot LSP client, Tree-Sitter language parser and <code>package.el</code> package install from Git repositories. </p> <p>Building from source is a convenient way to try Emacs features in advance, especially useful for those maintaining or developing new tools on top of Emacs.</p> Emacs 29 Features <p>Emacs 29 - what to expect - a brief summary of the major features</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#building-steps-for-the-impatient","title":"Building steps for the impatient","text":"<p>Open a terminal and switch to the adminstrator account</p> <pre><code>su -\n</code></pre> <p>Add debian packages to support building Emacs</p> <pre><code>apt build-dep emacs &amp;&amp; \\\napt install libgccjit0 libgccjit-10-dev libjansson4 libjansson-dev gnutls-bin libtree-sitter-dev\n</code></pre> <p>Clone Emacs 29 source code, configure and build emacs and then install (in /usr/local/bin/)</p> <pre><code>git clone --branch emacs-29 git://git.savannah.gnu.org/emacs.git emacs-29 &amp;&amp; \\\ncd emacs-29 &amp;&amp; \\\nexport CC=/usr/bin/gcc-10 &amp;&amp; \\\nexport CXX=/usr/bin/gcc-10 &amp;&amp; \\ \n./autogen.sh &amp;&amp; \\\n./configure --with-native-compilation=aot &amp;&amp; \\\nmake -j$(proc)  &amp;&amp; \\\nmake install\n</code></pre> <p>Skip the <code>--branch</code> argument for the very latest commits to Emacs which will effectively become Emacs 30 some time in the next year or so</p> <p>Read the rest of the article for a detailed description of this workflow</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#prepare-debian","title":"Prepare Debian","text":"<p>Open a terminal and switch to the adminstrator account</p> <pre><code>su -\n</code></pre> <p>Use the Debian package manager to install the build dependencies for the Emacs package. </p> <p>Debian installs the packages required to build Emacs, there will be many package to install if this is the first software is being built with GCC on the operating system.</p> <pre><code>apt build-dep -y emacs\n</code></pre> <p>Using build-deps manages the set of packages required as Emacs evolves.</p> <p>Install library packages to support the newest features of Emacs, e.g. native compilation of Emacs packages (<code>libgccjit</code>), fast JSON processing (<code>libjansson</code>) and tree-sitter support.  These features can significantly boost performance.</p> <pre><code>sudo apt install libgccjit0 libgccjit-10-dev libjansson4 libjansson-dev libtree-sitter-dev\n</code></pre> <p><code>sudo apt-get install gnutls-bin</code> removes a potential issue from an older certificates library install</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#preparing-emacs-source-code","title":"Preparing Emacs source code","text":"<p>Use a Git client to clone the latest code from the Emacs repository, or open a terminal and use the Git command line client</p> <pre><code>git clone git://git.savannah.gnu.org/emacs.git\n</code></pre> <p>To build version of Emacs that is already release, Download source from a nearby GNU mirror, either tar.gz or tar.xz</p> <p>Change into the cloned directory</p> <pre><code>cd emacs\n</code></pre> <p>Set <code>CC</code> and <code>CXX</code> environment variables to inform the Emacs configuration script as to the location of gcc-10, otherwise it fails to find libgccjit</p> <pre><code>export CC=/usr/bin/gcc-10 &amp;&amp; export CXX=/usr/bin/gcc-10\n</code></pre> <p>If CC and CXX environment variables are not set, the configure script will not find important libraries and report errors such as: <code>configure: error: ELisp native compiler was requested, but libgccjit was not found.</code></p> <p>Run the autogen script to create a configure script specific to your operating system.</p> <pre><code>./autogen.sh\n</code></pre> <p>Run the configuration script with the native compilation flag, to compile Emacs native Elisp files during the Emacs compilation rather than when first running Emacs.  This script will check the operating system for tools and libraries needed to build Emacs on your operating system.</p> <pre><code>./configure --with-native-compilation=aot\n</code></pre> <p>Check the output of <code>./configure</code> was successful, see the end of this article for an example.  Ignore warnings about movemail if not using Emacs for local email management.</p> List available Emacs build flags <p><code>./configure --help</code> lists available flags. Generally features are enabled if the required libraries are installed on the operating system.</p> <p>A noticeable exception is native compilation, as its a relatively new feature and not enabled by default.</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#building-emacs-locally","title":"Building Emacs locally","text":"<p>Build Emacs using all the CPU's of your computer.  <code>-j</code> flag specifies the number of CPU's to use, <code>nproc</code> command returns the total number of CPU's for the computer (real and virtual cores combined).</p> <pre><code>make -j$(nproc)\n</code></pre> <p>Run Emacs using the <code>-Q</code> option to check Emacs runs without using a users configuration file (e.g. without loading an `~/.emacs.d/ configuration)</p> <pre><code>./src/emacs -Q\n</code></pre> <p><code>C-x C-c</code> to quit Emacs.</p> <p>If Emacs runs then it is ready to install.</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#install-emacs-system-wide","title":"Install Emacs system wide","text":"<p>Install <code>emacs</code> and <code>emacsclient</code> to <code>/usr/local/bin</code> along with supporting libraries and man pages using the Makefile</p> <pre><code>make install\n</code></pre> <p>To install in a different location, pass the full path using the <code>--prefix</code> option to make, e.g <code>make install --prefix /opt/emacs</code></p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#running-emacs","title":"Running Emacs","text":"<p>If the default <code>/usr/local</code> path was used to install Emacs, then the <code>emacs</code> and <code>emacsclient</code> binary files are already on the executable path</p> <p>In a terminal, run the emacs command</p> <pre><code>emacs\n</code></pre> Spacemacs installs packages for a version of Emacs <p>Using a different version of Emacs with Spacemacs for the first time will download and compile all the pages in the Spacemacs configuration.  </p> <p>When native compliation is enabled, many minutes are required to navitvely compile each and every Emacs package.</p> <p>Leave Emacs for a few minutes running until the CPU activity has subsided and then consider restarting Emacs to ensure the packages have been loaded in the correct order.</p> <p>Expect to see lots of warning messages when installing more than 250 emacs packages.  Ignore these warnings until all packages have been installed.  If warnings still occur after restarting Emacs, then start investigating (or ask questions on #spacemacs channel in the Clojurians Slack community)</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#removing-emacs","title":"Removing Emacs","text":"<p>In the Emacs source code directory where Emacs was built, use the Makefile to remove the Emacs binaries, libraries and man pages.</p> <pre><code>make uninstall\n</code></pre>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#emacs-build-configure-output","title":"Emacs build configure output","text":"<p>Typical output of  <code>./configure --with-native-compilation</code></p> <p>Almost all configuration options should be yes, although there are a few legacy libraries or settings for other OSs that should be no.</p> <pre><code>Configured for 'x86_64-pc-linux-gnu'.\n\n  Where should the build process find the source code?    .\n  What compiler should emacs be built with?               /usr/bin/gcc-10 -g3 -O2\n  Should Emacs use the GNU version of malloc?             no\n    (The GNU allocators don't work with this system configuration.)\n  Should Emacs use a relocating allocator for buffers?    no\n  Should Emacs use mmap(2) for buffer allocation?         no\n  What window system should Emacs use?                    x11\n  What toolkit should Emacs use?                          GTK3\n  Where do we find X Windows header files?                Standard dirs\n  Where do we find X Windows libraries?                   Standard dirs\n  Does Emacs use -lXaw3d?                                 no\n  Does Emacs use -lXpm?                                   yes\n  Does Emacs use -ljpeg?                                  yes\n  Does Emacs use -ltiff?                                  yes\n  Does Emacs use a gif library?                           yes -lgif\n  Does Emacs use a png library?                           yes -lpng16 -lz\n  Does Emacs use -lrsvg-2?                                yes\n  Does Emacs use -lwebp?                                  no\n  Does Emacs use -lsqlite3?                               yes\n  Does Emacs use cairo?                                   yes\n  Does Emacs use -llcms2?                                 yes\n  Does Emacs use imagemagick?                             no\n  Does Emacs use native APIs for images?                  no\n  Does Emacs support sound?                               yes\n  Does Emacs use -lgpm?                                   yes\n  Does Emacs use -ldbus?                                  yes\n  Does Emacs use -lgconf?                                 no\n  Does Emacs use GSettings?                               yes\n  Does Emacs use a file notification library?             yes -lglibc (inotify)\n  Does Emacs use access control lists?                    yes -lacl\n  Does Emacs use -lselinux?                               yes\n  Does Emacs use -lgnutls?                                yes\n  Does Emacs use -lxml2?                                  yes\n  Does Emacs use -lfreetype?                              yes\n  Does Emacs use HarfBuzz?                                yes\n  Does Emacs use -lm17n-flt?                              yes\n  Does Emacs use -lotf?                                   yes\n  Does Emacs use -lxft?                                   no\n  Does Emacs use -lsystemd?                               yes\n  Does Emacs use -ljansson?                               yes\n  Does Emacs use -ltree-sitter?                           yes\n  Does Emacs use the GMP library?                         yes\n  Does Emacs directly use zlib?                           yes\n  Does Emacs have dynamic modules support?                yes\n  Does Emacs use toolkit scroll bars?                     yes\n  Does Emacs support Xwidgets?                            no\n  Does Emacs have threading support in lisp?              yes\n  Does Emacs support the portable dumper?                 yes\n  Does Emacs support legacy unexec dumping?               no\n  Which dumping strategy does Emacs use?                  pdumper\n  Does Emacs have native lisp compiler?                   yes\n  Does Emacs use version 2 of the X Input Extension?      yes\n  Does Emacs generate a smaller-size Japanese dictionary? no\n</code></pre>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#emacs-29-configuration-options","title":"Emacs 29 configuration options","text":"<p>Run configure with <code>--help</code> option to list the available compilation options.  Apart from <code>--with-native-compilation=aot</code> defaults are used when Practicalli compiles Emacs.</p> <pre><code>Optional Packages:\n  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)\n  --without-all           omit almost all features and build small executable\n                          with minimal dependencies\n  --with-mailutils        rely on GNU Mailutils, so that the --without-pop\n                          through --with-mailhost options are irrelevant; this\n                          is the default if GNU Mailutils is installed\n  --with-pop              Support POP mail retrieval if Emacs movemail is used\n                          (not recommended, as Emacs movemail POP is\n                          insecure). This is the default only on native\n                          MS-Windows.\n  --with-kerberos         support Kerberos-authenticated POP\n  --with-kerberos5        support Kerberos version 5 authenticated POP\n  --with-hesiod           support Hesiod to get the POP server host\n  --with-mail-unlink      unlink, rather than empty, mail spool after reading\n  --with-mailhost=HOSTNAME\n                          string giving default POP mail host\n  --with-sound=VALUE      compile with sound support (VALUE one of: yes, alsa,\n                          oss, bsd-ossaudio, no; default yes). Only for\n                          GNU/Linux, FreeBSD, NetBSD, MinGW, Cygwin.\n  --with-pdumper=VALUE    enable pdumper support unconditionally ('yes', 'no',\n                          or 'auto': default 'auto')\n  --with-unexec=VALUE     enable unexec support unconditionally ('yes', 'no',\n                          or 'auto': default 'auto')\n  --with-dumping=VALUE    kind of dumping to use for initial Emacs build\n                          (VALUE one of: pdumper, unexec, none; default\n                          pdumper)\n  --with-x-toolkit=KIT    use an X toolkit (KIT one of: yes or gtk, gtk2,\n                          gtk3, lucid or athena, motif, no)\n  --with-wide-int         prefer wide Emacs integers (typically 62-bit); on\n                          32-bit hosts, this allows buffer and string size up\n                          to 2GB, at the cost of 10% to 30% slowdown of Lisp\n                          interpreter and larger memory footprint\n  --without-xpm           don't compile with XPM image support\n  --without-jpeg          don't compile with JPEG image support\n  --without-tiff          don't compile with TIFF image support\n  --without-gif           don't compile with GIF image support\n  --without-png           don't compile with PNG image support\n  --without-rsvg          don't compile with SVG image support\n  --without-webp          don't compile with WebP image support\n  --without-sqlite3       don't compile with sqlite3 support\n  --without-lcms2         don't compile with Little CMS support\n  --without-libsystemd    don't compile with libsystemd support\n  --without-cairo         don't compile with Cairo drawing\n  --without-xml2          don't compile with XML parsing support\n  --with-imagemagick      compile with ImageMagick image support\n  --without-native-image-api\n                          don't use native image APIs (GDI+ on Windows)\n  --with-json             compile with native JSON support\n  --with-tree-sitter      compile with tree-sitter\n  --without-xft           don't use XFT for anti aliased fonts\n  --without-harfbuzz      don't use HarfBuzz for text shaping\n  --without-libotf        don't use libotf for OpenType font support\n  --without-m17n-flt      don't use m17n-flt for text shaping\n  --without-toolkit-scroll-bars\n                          don't use Motif/Xaw3d/GTK toolkit scroll bars\n  --without-xaw3d         don't use Xaw3d\n  --without-xim           at runtime, default X11 XIM to off\n  --without-xdbe          don't use X11 double buffering support\n  --with-ns               use Nextstep (macOS Cocoa or GNUstep) windowing\n                          system. On by default on macOS.\n  --with-w32              use native MS Windows GUI in a Cygwin build\n  --with-pgtk             use GTK to support window systems other than X\n  --without-gpm           don't use -lgpm for mouse support on a GNU/Linux\n                          console\n  --without-dbus          don't compile with D-Bus support\n  --with-gconf            compile with Gconf support (Gsettings replaces this)\n  --without-gsettings     don't compile with GSettings support\n  --without-selinux       don't compile with SELinux support\n  --without-gnutls        don't use -lgnutls for SSL/TLS support\n  --without-zlib          don't compile with zlib decompression support\n  --without-modules       don't compile with dynamic modules support\n  --without-threads       don't compile with elisp threading support\n  --with-cygwin32-native-compilation\n                          use native compilation on 32-bit Cygwin\n  --without-xinput2       don't use version 2 of the X Input Extension for\n                          input\n  --with-small-ja-dic     generate a smaller-size Japanese dictionary\n  --with-file-notification=LIB\n                          use a file notification library (LIB one of: yes,\n                          inotify, kqueue, gfile, w32, no)\n  --with-xwidgets         enable use of xwidgets in Emacs buffers (requires\n                          gtk3 or macOS Cocoa)\n  --with-be-app           enable use of Haiku's Application Kit as a window\n                          system\n  --with-be-cairo         enable use of cairo under Haiku's Application Kit\n  --without-compress-install\n                          don't compress some files (.el, .info, etc.) when\n                          installing. Equivalent to: make GZIP_PROG= install\n  --with-gameuser=USER_OR_GROUP\n                          user for shared game score files. An argument\n                          prefixed by ':' specifies a group instead.\n  --with-gnustep-conf=FILENAME\n                          name of GNUstep configuration file to use on systems\n                          where the command 'gnustep-config' does not work;\n                          default $GNUSTEP_CONFIG_FILE, or\n                          /etc/GNUstep/GNUstep.conf\n  --with-native-compilation[=TYPE]\n                          compile with Emacs Lisp native compiler support. The\n                          TYPE 'yes' (or empty) means to enable it and compile\n                          natively preloaded Lisp files; 'no' means to disable\n                          it; 'aot' will make the build process compile all\n                          the Lisp files in the tree natively ahead of time.\n                          (This will usually be quite slow.)\n  --with-x                use the X Window System\n  --without-libgmp        do not use the GNU Multiple Precision (GMP) library;\n                          this is the default on systems lacking libgmp.\n  --without-included-regex\n                          don't compile regex; this is the default on systems\n                          with recent-enough versions of the GNU C Library\n                          (use with caution on other systems).\n</code></pre>","tags":["debian","spacemacs","emacs"]},{"location":"blog/build-emacs-from-source-on-debian-linux/#references","title":"References","text":"<ul> <li>Emacs 28.1 whats new - a very detailed description of new features in Emacs 28.1</li> <li>Emacs Wiki - Building Emacs - base instructions for building Emacs</li> <li>Ubuntu Emacs LISP team PPA - nightly builds from the latest Emacs commits</li> </ul> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["debian","spacemacs","emacs"]},{"location":"blog/clojure-advent-of-code---a-fun-way-to-learn/","title":"Clojure Advent Of Code - a fun way to learn","text":"<p>Advent of Code is the annual coding challenge with a festive theme.  Each day there is a new challenge in two parts, the first fairly easy the second a little more involved.  The challenges are an investment of your time to complete them all, although even trying just a few is enough to help you think in different ways.</p> <p>Every programming language requires regular practice to maintain your skills.  A full time developer role gives you lots of opportunities to practice every day, however, its often focused in around solving problems within a specific business domain, with little time to explore others.  The Advent of Code puts you in a different domain, so its great for extending your coding experiences.</p> <p>Solving challenges in a different language is another great way to extend your experiences, so here are some tips and examples for solving the advent of code in Clojure.</p>","tags":["code-challenge"]},{"location":"blog/clojure-advent-of-code---a-fun-way-to-learn/#tips","title":"Tips","text":"<ul> <li> <p>Keep the solution as simple as possible.  Its very easy to over-complicate the solution and end up simply confusing yourself.</p> </li> <li> <p>Don't try and make the perfect solution.  Write something that works, this will give you a nice ego boost.  Then you can experiment with the code and see if you can improve your approach.</p> </li> <li> <p>Break down the problem into the simplest thing you can solve first.  Trying to solve a problem all at once will quickly have you going around in circles.</p> </li> <li> <p>Keep all the code and make notes.  I use a a design journal in my projects to document my thinking process, capture decisions that worked and those that didn't work for this project.  The journal is a great way to cement learning from solving the challenge.</p> </li> <li> <p>Challenges are only accessible from their day of the month onwards.  There is a count-down clock displayed on the next challenge to open, so you know when it will be available.  Don't feel pressured to keep up with the challenges though, enjoy the experience and have fun, you will learn more that way.</p> </li> </ul> <p></p>","tags":["code-challenge"]},{"location":"blog/clojure-advent-of-code---a-fun-way-to-learn/#a-previous-example","title":"A previous example","text":"<p>In the following video I walk through the first challenge of Advent of Code from 2018, trying out different solutions at increasing levels of abstraction.  With each level of abstraction it helps to think in a more functional way.</p>","tags":["code-challenge"]},{"location":"blog/clojure-advent-of-code---a-fun-way-to-learn/#creating-a-project","title":"Creating a project","text":"<p>Create a directory that contains:</p> <ul> <li><code>deps.edn</code> file containing an empty hash-map, <code>{}</code></li> <li><code>src/practicalli/advent_of_clojure_code/day-01.clj</code> file</li> </ul> <p>Create a new Clojure file for each of the daily challenges.  It makes sense to keep both parts of each day in the same file.</p>","tags":["code-challenge"]},{"location":"blog/clojure-advent-of-code---a-fun-way-to-learn/#useful-resources-and-examples","title":"Useful Resources And Examples","text":"<p>Here are some videos of solving advent of code challenges and code solutions to many challenges from 2019 and past years.</p> <ul> <li>fdlk/advent-2019 - example Clojure solutions to the advent of code</li> <li>Awesome Advent Of Code - a collection of solutions in various languages</li> <li>Advent of Code 2018 video walk-through of Clojure solutions by Tim Pote and GitHub repository</li> </ul> <p>Also take a look at the #adventofcode channel in the Clojurians slack channel.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["code-challenge"]},{"location":"blog/clojure-powered-blogging-with-cryogen/","title":"Clojure powered blogging with Cryogen","text":"<p>A blog website shouldnt need a complex content management system. A simple and lightweight static website generator can create engaging websites that are simple to manage with Git.</p> <p>Cryogen is a static site generator written in Clojure, allowing content to be written in either markdown or asciidoc.  Posts and pages are configured with Clojure hash-maps to manage the meta-data and layout information for each post.</p> <p>Cryogen seems very quick to generate a site and a local server can be run to automatically generate an updated website when changes to posts and pages are saved.</p> <p> practicalli/blog-cryogen contains all the content and configuration used to create the Practicalli blog website.</p> <p>Markdown tables not supported</p> <p>Limitation/bug cryogen does not support tables in markdown posts.  </p> <p>The issue seem to reside in  cryogen-markdown library</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#requirements","title":"Requirements","text":"<p>Clojure CLI and clj-new template to create and manage a Cryogen project</p> <p>A Java virtual Machine is a dependency for Clojure CLI, eg. Temurin from Adoptium.net</p> <p> Install Clojure - Practicalli Clojure book(target=_blank .md-button)</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#create-a-new-site","title":"Create a new site","text":"<p>Use the <code>cryogen</code> template for Leiningen to create a new project</p> <p>Here we create a project called <code>practicalli-blog</code> using the template</p> <p>Create a Cryogen project</p> <pre><code>clojure -T:project/new :template cryogen :name practicalli/blog\n</code></pre> <p>Change into the project directory and use Leiningen to run the project</p> <p>Start Cryogen local server</p> <pre><code>clojure -X:serve\n</code></pre> <p>A server will now start and generate the sample posts provided by the Cryogen template.</p> <p>The web browser automatically open a new browser tab/window at <code>http://localhost:3000/blog</code></p> <p>Changing files in the project will trigger a new compilation of the website. Manually refresh the browser page if kept open.</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#configure-the-site","title":"Configure the site","text":"<p>The configuration defines the site title (banner heading), author (copyright message), description (not sure where this is used).</p> <p><code>content/config.edn</code> is the configuration file for the generated site</p> <p>Practicalli Blog Cryogen config</p> <pre><code> :site-title           \"Practicalli\"\n :author               \"Practicalli\"\n :description          \"Discovering the fun in Functional Programming with Clojure\"\n :site-url             \"http://practical.li/\"\n</code></pre>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#enable-live-evaluation-with-klipse","title":"Enable live evaluation with Klipse","text":"<p>Make your sample code executable and interactive to the user by enabling Klipse in Cryogen. Klipse provides live evaluation for a number of programming language.</p> <p>Enable Klipse by defining a specific CSS selector and use that name when defining a code block, e.g. <code>klipse-clj</code></p> <p>Cryogen Klipse config</p> <pre><code> :klipse               {:settings {:selector         \".klipse-clj\"\n                                   :selector-reagent \".klipse-reagent\"}}\n</code></pre> <p>Example config.edn file from the practicalli/blog-content GitHub repository</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#version-control","title":"Version control","text":"<p>A <code>.gitignore</code> file is created when using the cryogen template to create a project.</p> <p>This contains the <code>/public/</code> pattern to exclude the generated website, as well as the common patterns for a Leiningen project.</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#writing-posts","title":"Writing posts","text":"<p>Posts can be written in either markdown or asciidoc.  Markdown is the default and all posts should be placed inthe <code>content/md/</code> directory.</p> <p>The filename can be prefixed with the date of the post, however, I find it more flexible to specify the date in the post metadata header as if you change the date then the URL of the post will remain the same.  This is really handy if you need to update the post and need to reflect that in the date, or if you had planned to publish the post a few weeks in the future and then realise its ready sooner.</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#post-header-metadata","title":"Post header - metadata","text":"<p>The start of each post is a Clojure hash-map, <code>{}</code> containing metadata for the specific blog</p> <p><code>:title</code> and <code>:layout</code> are mandatory keys, the rest are optional.  You can also define your own custom keys which can be used in the selma templates, for example <code>:topic</code></p> <ul> <li><code>:title</code>   The <code>h1</code> title used for the blog post</li> <li><code>:layout</code>  A keyword corresponding to an HTML file under themes/{theme}/html.</li> <li><code>:date</code>    The published date of the blog  (future blogs can be hidden)</li> <li><code>:author</code>  The name of the post author as a string, displayed at the top of the post in the default theme.</li> <li><code>:tags</code>    Tags associated with the blog, as a vector of strings e.g. [\"clojure\" \"cryogen\"]</li> <li><code>:klipse</code>  Enable live evaluation of code in the post (see live evaluation with Klipse)</li> <li><code>:toc</code>     Include a table of contents at the top of the page, with links to all the headings in the post</li> <li><code>:draft?</code> <code>true</code> will skip this post from the static site generation</li> <li><code>:topic</code>   A custom key I use to manage a topic image displayed on each post (theme development will be covered in a future post)</li> </ul>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#deploying-the-site-to-github-pages","title":"Deploying the site to GitHub pages","text":"<p>Automate publish with GitHub workflow</p> <p>Automate Cryogent blog publishing  describes how to build and deploy a Cryogen blog with a GitHub CI workflow.</p> <p>GitHub pages is a free static site hosting service and we can deploy the cryogen website by a git push.</p> <p>Create a repository in either a user account or GitHub organisation (eg. using the GitHub website).</p> <p>An unsophisticated script is used to deploy the generated website.  The script creates a Git repository in the <code>public</code> directory, all files are committed with a generic message, a remote repository added and the content pushed.</p> <pre><code>cd public/blog &amp;&amp; \\\nrm -rf .git &amp;&amp; git init &amp;&amp; git add . &amp;&amp; \\\ngit commit -m \"publish blog\" &amp;&amp; \\\ngit branch -m master gh-pages &amp;&amp; \\ \ngit remote add practicalli git@github.com:practicalli/blog.git &amp;&amp; \\\ngit push -f practicalli gh-pages\n</code></pre> <p>Edit the <code>deploy-to-gh-pages</code> script and update the URL of the GitHub repository created to host the website.</p> <p>If the website is not displayed, check the GitHub repository settings and ensure the <code>gh-pages</code> is set.</p> <p>Serve GitHub Pages from docs directory</p> <p>Set the <code>docs</code> directory as the source of GitHub pages source for the, especially when supporting a software project or library.</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/clojure-powered-blogging-with-cryogen/#prevent-github-pages-jekyll-compilation","title":"Prevent GitHub pages Jekyll compilation","text":"<p>A Jekyll process runs every time a change is pushed to a GitHub pages branch.  As Cryogen generates the finished website Jekyll processing is not required and it can be switch it off.</p> <p>Add an empty file called <code>.nojekyll</code> to the <code>content</code> directory.</p> <p>Edit the <code>config.edn</code> configuration file and add the <code>.nojekyll</code> file to the resources.  This ensures the <code>.nojekyll</code> file is copied over to the generated website in the <code>public</code> directory.</p> <p>Disable Jekyll</p> <pre><code> :resources            [\"images\" \".nojekyll\"]\n</code></pre> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["cryogen","blogging","static-site"]},{"location":"blog/docker-a-simple-workflow-for-clojure/","title":"Docker: a simple workflow for Clojure","text":"<p>Docker enables a consistent approach to building and running Clojure projects along with a range of other services locally (database, cache, streams, etc.), The Clojure project is built from source when starting services (a <code>watch</code> feature can rebuild on code changes). Heath checks and conditions are set to ensure dependant services start in the correct order.</p> <p>Running Docker is relatively fast once image overlays (layers) are cached on their first run, so its a viable approach for local system integration testing and acceptance testing, before pushing changes to a remote Continuous Integration service.</p> <p>A Docker workflow complements a  REPL Driven Development workflow, it does not replace it.  The main development effort should be more effective via a REPL connected editor with Docker Compose focused on orchestration of services.</p> <p>Deeper into Docker</p> <p> Practicalli Engineering Playbook covers Docker and Compose in more detail</p>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#general-workflow","title":"General Workflow","text":"<ul> <li>Create a Clojure project, e.g. using  Practicalli Project Templates</li> <li>Install Docker Desktop &amp; Extensions, e.g.  Docker Desktop for Ubuntu</li> <li>Create a Dockerfile e.g.  multi-stage build and run-time configuration for Clojure</li> <li> Compose services together, adding health checks and conditional starts</li> <li>REPL driven development, e.g.  Practicalli REPL Reloaded Workflow</li> <li>(optional) Automatic rebuild of Clojure project when  watching for code changes (experimental feature)</li> </ul> <p>Docker getting started tutorial</p> <p>Follow the Docker getting started tutorial once Docker is installed</p> <pre><code>docker run -d -p 80:80 docker/getting-started\n</code></pre>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#docker-desktop","title":"Docker Desktop","text":"<p> Docker desktop provides a convienient way to manage Docker images, containers and volumes.  Sign in to Docker Desktop to manage your images on DockerHub.</p> <p></p> <p>There is a growing marketplace of extensions that provide very useful tools to extend the capabilities of Docker Desktop.  Search within the Docker Desktop extensions or for  extensions on Docker Hub.</p> <ul> <li> Resource Usage monitor resources (cpu, memory, network, disk) used by containers and docker compose systems over time</li> <li> Disk Usage optimise use of local disk space by removing unused images, containers and volumes</li> <li> Volumes Backup &amp; Share to backup, clone, restore and share Docker volumes easily</li> <li> Logs Explorer view all container logs in one place to assist troubleshooting</li> <li> Postgres Admin PGAdmin4 open source management tool for Postgres</li> <li> Trivy scan local and remote images for security vulnerabilities</li> <li> Snyk scan local and remote images for security vulnerabilities</li> <li> Ddosify high-performance, open-source and simple load testing tool</li> </ul> <p></p>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#choosing-docker-images","title":"Choosing Docker Images","text":"<p> Docker Official Images from Docker Hub are highly recommended.  Look for the Docker Official Image tag on the image page.</p> <p></p> <ul> <li> Clojure - official Docker Image - built by the Clojure community, provides tools to build Clojure projects (Clojure CLI, Leiningen)</li> <li> Eclipse temurin OpenJDK - official Docker image - built by the  community - provides the Java run-time</li> <li> Amazon Corretto is an OpenJDK distribution by Amazon AWS team,  Amazon Corretto can also be installed for the local development environment</li> <li> Postgres open-source object-relational database management system</li> <li> Redis open-source, networked, in-memory, key-value data store with optional durability</li> <li> nginx open source reverse proxy &amp; load balancing for HTTP, HTTPS, SMTP, POP3 &amp; IMAP protocols, HTTP cache and a web server</li> <li> mariadb open source relational database by the original developers of MySQL and is much more efficient</li> </ul> <p>Official Docker Image definition</p> <p>An Official Docker Image means the configuration of that image follows the  Docker recommended practices, is well documented and designed for common use cases.  </p> <p>There is no implication at to the correctness of tools, languages or service that image provides, only in the means in which they are provided.</p>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#use-multi-stage-dockerfile","title":"Use Multi-stage Dockerfile","text":"<p>A multi-stage <code>Dockerfile</code> contains <code>builder</code> stage and a <code>final</code> stage used as the run-time.  Optionally, the configuration can use a <code>base</code> stage that defines a common image and configuration which both build and final stages extend.</p> <p>The builder stage caches dependencies to optimise building Clojure and the run-time stage optimises running the service efficiently and securely.</p> <p>The uberjar created by the builder image is copied over to the final stage to keep the run-time image as clean and small as possible to minimise resource use.</p> <p></p> <p> Multi-stage <code>Dockerfile</code> for Clojure projects -  Docker Multi-stage builds docs</p> <p>Docker init feature</p> <p> <code>docker init</code> is a new (beta) feature to create <code>Dockerfile</code>, <code>.dockerignore</code> and<code>compose.yaml</code> files using Docker recommended practices.</p>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#compose-services","title":"Compose services","text":"<p>Define a <code>compose.yaml</code> file that builds the Clojure project and run services that the Clojure service requires or talks too (database, cache, mock API, etc.). Each service can define a heart beat that can be used as a conditional startup for other services.</p> <p>compose.yaml new configuration file</p> <p><code>compose.yaml</code> is the new configuration file for orchestrating services locally, a simplified and extended version of <code>docker-compose.yaml</code>.</p> <p>Include the <code>build:</code> option for the Clojure service with the path to the multi-stage Dockerfile for the project (typically in the same root directory of the project, although a remote Git repository can also be used)</p> <p>The Clojure service defines a dependency on a Postgres Database.  The dependency has a condition so the Clojure service is only started once the Postgres service is healthy</p> <p>Clojure and Postgres Composure configuration</p> <pre><code>services:\n  clojure-service:\n    platform: linux/amd64\n    build: ./\n    ports: # host:container\n      - 8080:8080\n    depends_on:\n      postgres-database:\n        condition: service_healthy\n\n  postgres-database:\n    image: postgres:15.2-alpine\n    environment:\n      POSTGRES_PASSWORD: \"$DOCKER_POSTGRES_ROOT_PASSWORD\"\n    healthcheck:\n      test: [ \"CMD\", \"pg_isready\" ]\n      timeout: 45s\n      interval: 10s\n      retries: 10\n    ports:\n      - 5432:5432\n</code></pre> <p>Run the services using docker from the root of the project</p> <pre><code>docker compose up --build\n</code></pre>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#file-watcher","title":"File watcher","text":"<p>Docker provides  <code>watch</code> as an experimental feature which can rebuild the Clojure service when a file change is detected.  This seems most useful when troubleshooting issues that occur during system integration testing.</p> <p>Add an <code>x-develop</code> configuration with watch under the Clojure service configuration</p> <p>Composure x-develop file watch configuration</p> <pre><code>    x-develop:\n      watch:\n        - path: ./deps.edn\n          action: rebuild\n        - path: ./src\n          action: rebuild\n</code></pre> <p>Start the services and the file watch mode</p> <pre><code>docker compose up --detach &amp;&amp; docker compose alpha watch\n</code></pre> <p>Save changes to files and a new image for the Clojure service will be built and deployed when ready.</p>","tags":["docker"]},{"location":"blog/docker-a-simple-workflow-for-clojure/#summary","title":"Summary","text":"<p>Docker desktop provides lots of tools to support local system integration work before code is sent to a continuous integration service (or as a temporary alternative if that CI service id down)</p> <p>Practicalli Project Templates include <code>Dockerfile</code>, <code>.dockerignore</code> and <code>compose.yaml</code> configurations for Clojure development, kick-starting the use of Docker.</p> <p>Docker images are a relatively clean way of trying out different services or even different operating systems, e.g. Ubuntu or  ArchLinux.  Deleting the images removes the whole service without affecting the underlying operating system.</p> <p> MegaLinter is an excellent example of a docker image that provides a large number of tools that would otherwise need to be installed directly on the operating system.</p> <ul> <li> Docker Desktop Overview</li> <li> Docker Desktop Extensions overview</li> <li> Docker Build overview</li> <li> Docker Compose Overview</li> </ul> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["docker"]},{"location":"blog/essential-tooling-for-clojure-development/","title":"Essential tooling for Clojure development","text":"<p>Clojure development benefits from great tooling focused around an editor.</p> <p>Autocomplete, refactor tools, diagnostics feedback and syntax highlighting enhance the creation and modification of code.  </p> <p>Evaluating in source code and using data inspectors for the results provides an effective interaction with the REPL.</p> <p>Practicalli encourages editors that provide user actions driven exclusively via the keyboard and an uncluttered user interface.</p> <p>Practicalli Clojure provides  an overview of Clojure editors and the plugins that provide Clojure support, e.g. Emacs, Neovim, VS Code, Pulsar and Sublime.  </p> Practicalli preferred editors <p>LightTable was the editor used in the early years of learning Clojure as it was simple to use and provided instant feedback as code was typed.</p> <p>Once Spacemacs was release, Emacs with CIDER became the predominant editor for many years.</p> <p>Treemacs and LSP have matured so Neovim and Conjure has been adopted to provide a fast editing environment with streamlined key bindings for Clojure development.</p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#repl-connnection","title":"REPL connnection","text":"<p>Interaction with the REPL is the foundation of highly effective Clojure development. An editor connects to a REPL process via a network repl (nREPL) server process.</p> <p>Practicalli starts a REPL process in a terminal using the Clojure CLI tool.  </p> <p><code>:repl/rebel</code> alias is used to run Rebel Readline to provide a rich terminal UI REPL prompt and starts an nREPL server to support an editor connection.</p> <pre><code>clojure -M:repl/rebel\n</code></pre> <p></p> <p>Jack-in or Connect</p> <p>The REPL and nREPL processes are started by an editor jack-in command, providing the relevant dependencies and command line options to the Clojure CLI.  The editor automatically connects to the nREPL process.</p> <p>The same command can be run in a terminal and once nREPL server is running the editor can be connected.</p> <p>Practicalli uses a terminal REPL prompt for longer running processes or as a way to separate logs from evaluation events, e.g. starting components such as web servers.</p> <p>Starting the REPL process outside of the editor provides a useful separation of editor and REPL, also allows for a range of editors and other tooling to share the REPL state </p> <p></p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#customise-repl-starup","title":"Customise REPL starup","text":"<p>The <code>user</code> namespace is always loaded during REPL startup, allowing tools and libraries to be included via a <code>user.clj</code> file when on the class path.</p> <p>Clojure development workflows and tools may vary across projects, so customising the REPL starup is highly valuable.</p> <p>Aliases for development tools</p> <p>Clojure CLI aliases from project and user level deps.edn to support different configurations and tools when starting the REPL process</p> <p>The <code>:dev/env</code> and <code>:repl/reloaded</code> aliases from  Practicalli Clojure CLI Config add the <code>dev</code> directory to the class path, loading a custom <code>user</code> namespace defined in <code>dev/user.clj</code>.  </p> <p>A  custom <code>user</code> namespace supports the  Practicalli REPL Reloaded workflow, launching Portal data inspector listening to all evaluation results and Mulog Tap Publisher sending log events to Portal.</p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#evaluate-clojure","title":"Evaluate Clojure","text":"<p>Evaluates expressions as they are written, providing qualative feedback on the expected behaviour.</p> <p>Expressions are evaluated in Source code window with results inline, keeping focus on the code and avoiding the need to switch namespaces in the REPL.  Larger data structures can be sent to a data inspector (Portal, Cider Inspector)</p> <p>Cleaning up the REPL state </p> <ul> <li>Un-evaluate a var to avoid running stale code and tests, e.g. remove def, defn, deftest names from the REPL process</li> </ul> <p></p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#structural-editing","title":"Structural Editing","text":"<p>Clojure has a highly structured syntax compared to many other languages thanks to its LISP heritage.  Functions are defined and called in expressions using parenthesis, <code>()</code>.</p> <p>Writing and code refactor is enhanced when the editor ensures parenthesis remain balanced, i.e. every opening paren has a closing paren.</p> <p> paredit ensurce balanced parens along with structural refactor commands to change the structure, e.g.</p> <ul> <li>slurp pulls expressions into the current expression</li> <li>barf pushes the current expression out of the surrounding expression</li> </ul> <p> parinfer provides structural editing based on indentation, automatically ensuring parens are ballanced as code is added or changed.  Parinfer doesnt require any commands or key bindings and so can feel more natural.</p> <p></p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#maintain-repl-state","title":"Maintain REPL State","text":"<p>A Clojure REPL can be very long lived thanks to the stability of the Java Virtual Machine (JVM).  Removing state vars can help avoid a REPL restart, as tools that refresh namespaces and start/stop/restart a Clojure system components.</p> <ul> <li>refresh changed namespaces of the project in the REPL process, optionally with hook to restart components</li> </ul> <p>For simpler applications, Practicalli loads <code>clojure.tools.namespace.repl</code> at REPL starup via a custom <code>user</code> namespace to <code>refresh</code> stale namespaces in the project and <code>set-refresh-dirs</code> to define the directory paths that should be checked for changes (excluding <code>dev</code> from the path to avoid reloading tools).</p> <p>For web services and Clojure projects composed of system components, the  Practicalli Service REPL workflow is used. The Service REPL workflow uses either  donut-party/system or  Integrant &amp; Integrant REPL to manage restarting of components and reloading changed namespaces into the REPL state.</p> <p> Practicalli Service REPL workflow</p> <p> donut-party/system  Integrant &amp; Integrant REPL</p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#inspecting-navigating-data","title":"Inspecting / Navigating Data","text":"<p>Many results of evaluating Clojure produce interesting and potentially complex data structures.  Tools for navigating data aid in the understanding of results produced by Clojure code.</p> <p>Being able to present the results in different ways can add greater meaning and easier consumption of the results, e.g. visual charts to support data science.</p> <ul> <li>navigate data, especially nested data</li> <li>paginate through large data sets without slowing down the tooling </li> <li>inspect results of an evaluation and follow updates after each evaluation</li> </ul> <p>Emacs Cider Inspector is very powerful for paging through large data sets effectively and navigating a complex structure.</p> <p>Portal can also navigate data and can show data in a range of views to add more meaning support, e.g. http responses for API development, tables &amp; charts for data science, etc...</p> <p>Practicalli configures Portal to listen over nREPL to all Clojure code evaluations, which will work with all of the Clojure editors.</p> <p> Portal Data Inspector - Practicalli Clojure </p>","tags":["clojure"]},{"location":"blog/essential-tooling-for-clojure-development/#creating-projects","title":"Creating projects","text":"<p>Creating a  a clojure project from templates can save time and provide a consistent base for an organisation.  Extending project templates with options allows for diversity whist still providing common a approach.</p> <p>Projects from template are typically created via a shell command, so an editor with shell support is valuable.</p> <p> Practicalli Project Templates simplifies Clojure project creation with a growing number of templates, derived from commercial and community experiences.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["clojure"]},{"location":"blog/expose-clojure-service-using-ngrok/","title":"Expose Clojure Service using Ngrok","text":"<p>Exposing a local running services can be valuable when writing apps and web-hooks for Cloud API products, e.g. Slack, Atlassian Confluence, Hasura, Salesforce, etc.</p> <p>ngrok exposes local networked services behinds NATs and firewalls to the public internet over a secure tunnel.</p> <p>Create a free ngrok account to get an authorisation token for use with the ngrok agent to create a secure tunnel.  Or add an SSH public key to use SSH reverse tunnel with the ngrok service.</p> <p>ngrok has additional paid services, although they are not required for exposing local services.</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#example-clojure-service","title":"Example Clojure Service","text":"<p>Practicalli Clojure CLI Config defines the <code>:project/create</code> alias to generate a new project from a template.  The <code>practicalli/service</code> template creates a project for developing web services with a REST API.</p> <p>Create a project called gameboard using donut system to manage service components</p> <pre><code>clojure -T:project/create :template practicalli/service :name practicalli/gameboard :component donut\n</code></pre> <p>Change into the <code>gameboard</code> directory</p> <p><code>make run</code> (<code>clojure -M:run/service</code>) to run the service locally, serving an API endpoint on http://localhost:8080</p> <p>Alternatively, <code>make docker-build</code> to run the service via a docker container (assuming Docker is running locally).</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#install-ngrok","title":"Install ngrok","text":"<p>Linux (apt) operating system, add a ngrok repository key and install the ngrock package</p> Install on Apt based Linux operating system<pre><code>curl -s https://ngrok-agent.s3.amazonaws.com/ngrok.asc | \\\n  sudo tee /etc/apt/trusted.gpg.d/ngrok.asc &gt;/dev/null &amp;&amp; \\\n  echo \"deb https://ngrok-agent.s3.amazonaws.com buster main\" | \\\n  sudo tee /etc/apt/sources.list.d/ngrok.list &amp;&amp; \\\n  sudo apt update &amp;&amp; sudo apt install ngrok\n</code></pre> <p>MacOS install with HomeBrew:</p> <pre><code>brew install ngrok/ngrok/ngrok\n</code></pre> <p>Ngrok download page for other installation options or use an SSH reverse tunnel without need to install the ngrok agent.</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#setup-ngrok","title":"Setup ngrok","text":"<p>Create an account with multi-factor authentication.</p> <p>Login to the Ngrok dashboard to obtain the Authtoken (tunnel credential) for the ngrok account.  The token is used by the ngrok agent to log into the ngrok account when starting a tunnel.</p> <pre><code>ngrok config add-authtoken TOKEN\n</code></pre> <p>Claim a free static domain to avoid random URLs. Creating a domain of your own choosing is a paid service on ngrok.</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#ngrok-config-file","title":"ngrok config file","text":"<p>Use a configuration file to define one or more tunnels for use with the ngrok agent.</p> <p>Open the default ngrok configuration file for editing:</p> <pre><code>ngrok config edit\n</code></pre> <p>Or open the yaml file from the default configuration location</p> <ul> <li>Linux: <code>~/.config/ngrok/ngrok.yml</code></li> <li>MacOS (Darwin): <code>~/Library/Application Support/ngrok/ngrok.yml</code></li> </ul> <pre><code>authtoken: ***************************_*********************\nversion: 2\ntunnels:\n  custom_tunnel_name:\n    proto: http\n    hostname: free-static-domain-name.ngrok-free.app\n    addr: 127.0.0.1:8080\n\n    # -------------------------\n    # Additional options\n    # -------------------------\n    # auth: \"username:password\"\n    # host_header: rewrite\n    # inspect: true\n    # bind_tls: true\n</code></pre> <p>ngrok agent configuration file documentation</p> <p>Start the tunnel using the command line.</p> <pre><code>ngrok start custom_tunnel_name\n</code></pre> <p>Or start all tunnels in the configuration file</p> <pre><code>ngrok start --all\n</code></pre>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#inspecting-traffic","title":"Inspecting traffic","text":"<p>Open http://localhost:4040 to view the ngrok web interface, allowing inspection of traffic over the secure HTTP tunnel (TCP &amp; TLS tunnel inspection not supported).</p> <p>The web interface lists each request through the tunnel and selecting a request shows all the details of that request.</p> <ul> <li>Request body validation (JSON, XML data)</li> <li>Filter requests on request path, response status code, response body size, request duration, or any header value</li> <li>Replay requests, optionally modifying a request first</li> <li>ngrok agent status to help with troubleshooting the tunnel connetion</li> </ul> <p></p> <p>Ngrok web inspection interface</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#ssh-reverse-tunnel","title":"SSH reverse tunnel","text":"<p>ngrok can be used with SSH reverse tunneling (ssh -R), avoiding the need to install the ngrok agent.</p> <p>Add an SSH public key to the ngrok dashboard, Tunnels &gt; SSH Public Keys</p> <p>Run the command to open an SSH reverse tunnel to ngrok</p> <pre><code>ssh -R 443:localhost:80 tunnel.us.ngrok.com http\n</code></pre> <p>SSH reverse tunnel agent documentation</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#ngrok-docker-service","title":"ngrok Docker service","text":"<p>Use a Docker image containing ngrok to avoid installing the ngrok agent.</p> <p>ngrok provides the ngrok/ngrok docker image.  Practicalli recommends using the alpine image variant for minimal resource use.</p> <pre><code>docker run -it -e NGROK_AUTHTOKEN=$NGROK_AUTH_TOKEN ngrok/ngrok:alpine http 8080 --domain=free-static-domain-name.ngrok-free.app\n</code></pre> <p>Add an ngrok service to Docker <code>compose.yaml</code>, optionally adding a volume and port configuration.</p> <p>To manage ngrok configuration effectively, add an <code>ngrok.yml</code> configuration to the root of the directory where the ngrok image is to be run.  The <code>ngrok.yml</code> config is mounted to <code>/etc/ngrok.yml</code> in the Docker container, allowing an simple way to update the config.</p> compose.yaml<pre><code>services:\n    ngrok:\n        image: ngrok/ngrok:alpine\n        restart: unless-stopped\n        command:\n          - \"start\"\n          - \"--all\"\n          - \"--config\"\n          - \"/etc/ngrok.yml\"\n        volumes:\n          - ./ngrok.yml:/etc/ngrok.yml\n        ports:\n          - 4040:4040\n</code></pre> <p>Run all the services defined in the Docker <code>compose.yml</code> file, optionally with the <code>--detatch</code> flag to run in the background of the shell.</p> <pre><code>docker compose up --detatch\n</code></pre> <p>Or run only the ngrok service</p> <pre><code>docker compose up --detatch ngrok\n</code></pre> <p>Add an ngrok service to a Docker compose configuration to build &amp; run the clojure service in conjunction with a multi-stage dockerfile.</p> <p>Using ngrok with Docker</p>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#secure-public-endpoints","title":"Secure public endpoints","text":"<p>ngrok agent allows security to be dynamically added to any public endpoint, with IP restrictions</p> <ul> <li>HTTP Basic Authentication</li> <li>OAuth 2.0</li> <li>OpenID Connect</li> <li>SAML</li> <li>Webhook Verification</li> <li>Mutual TLS</li> </ul>","tags":["clojure","ngrok"]},{"location":"blog/expose-clojure-service-using-ngrok/#summary","title":"Summary","text":"<p>ngrok is a secure way to expose locally running services that integrate with cloud services and can help speed development by providing faster feedback than running a full deployment cycle.</p> <p>ngrok agent works on multiple operating systems and can be run in a Docker container.  An SSH reverse tunnel can be used for zero agent install approach.</p> <p>Using ngrok only because the continuous integration process is very time consuming is a strong indication that time should be invested in improving the CI workflow, ensuring the minimal amount of work is required to create a repeatable build.</p> <p>practicalli GitHub profile I @practical_li</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["clojure","ngrok"]},{"location":"blog/safeguard-against-git-commit-spoofing/","title":"Safeguard against Git Commit Spoofing","text":"<p>Git Commit Spoofing is where a person uses the Git identity of another person to modify commits pushed to GitHub, assuming they can obtain write permission to a branch or via a PR.</p> <p>Signing is especially useful for those contributing changes via a pull request.  Signing provides greater confidence that the contribution is from a verifyable account.</p> <p>Working in the Financial sector for many years, signing of commits has become manditory to reduce risk and increase traceability for audit trails.</p> <p>All Practicalli commits are now signed using a passphrase protected SSH key, registered as a signing key with the GitHub account.  All contributions via pull request should be also be signed, either with GPG or SSH keys.</p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#spoof-a-commit","title":"Spoof a commit","text":"<p>With write access to a shared git repository, spoofing commits is trivial.</p> <p>Use <code>git log</code> to look through the commit history of the repository and copy information from the <code>Author</code> field. </p> <p>Set the git client configuraiton to be the same as one of the existing author fields to spoof with that account.</p> <p>Set Git Identity</p> <pre><code>git config --global user.email \"existing-author@domain.tld\"\ngit config --global user.name \"existing author name\"\n</code></pre> <p>Creating a malicious change, stage and create a commit. The Author field on the new commit will be the same as that of the existing commit.</p> <p>Amending an existing commit is a more likely approach to masking a malicious change than creating a new commit.</p> <p>Stage the change and then use the <code>--amend</code> option to create an updated commit which will still have the existing authors information. </p> <p>To avoid changing identity each time a spoof is made,  multiple git identities can be configured using <code>includeIf</code> based on path, so repositories to be spoofed would be kept in the same parent directory.</p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#safeguard-github-account","title":"Safeguard GitHub account","text":"<p>Add two Yubikey hardware Security keys as Two-Factor authentication for your GitHub account. One Yubikey for daily work and one kept securely as a backup.</p> <p>A hardware security key provides greater account protection than Time-based One Time Password (TOTP), i.e.  Authy app or Google Authenticator.</p> <p>Use TOTP for initial Two-Factor authentication on GitHub</p> <p>GitHub required an existing form of Two-factor authentication before being able to add a hardware security key, e.g. Yubikey.</p> <p>Remove the TOTP authentication once Hardware Security keys have been added for increased account security.</p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#safeguard-git-repository","title":"Safeguard Git Repository","text":"<ul> <li>Limit the number of accounts with write access to the repository</li> <li>Sign commits and annotated tags via SSH or PGP keys</li> </ul> <p>Signing commits and tags with SSH keys is the approach covered in the rest of the article.</p> <p>GitHub vigilant mode</p> <p> Enable GitHub vigilant mode to show a verification status badge against all commits, which helps highlight unverified commits.</p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#generate-ssh-key","title":"Generate SSH Key","text":"<p>Generate an SSH key using the ED25310 type, using a verified email address added to the GitHub user account. </p> <p>The SSH key should be created by a passphrase for greater security, saving the passphrase to the operating system key ring for convienience.</p> <p>Generate an SSH Key using ED25310</p> <pre><code>ssh-keygen -t ed25519 -C \"name@domain.tld\"\n</code></pre> <p>Ensure the the email account used to create the SSH key is registered and verified in the GitHub user account.</p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#add-ssh-keys-to-github","title":"Add SSH keys to GitHub","text":"<p>Add the public SSH key as an authentication key to push changes to GitHub repositories the account has write access too.</p> <p>Add the public SSH key as a Signing Key to validate locally signed commits when pushed to GitHub repositories.</p> <p> SSH Keys for GitHub account </p> <p> SSH Key generation - Practicalli Engineering Playbook </p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#configure-git-to-sign-commits-and-tags","title":"Configure Git to Sign commits and tags","text":"<p>Configure the local Git client to automtically sign every commit or annotated tag using an SSH key. e.g. <code>~/.config/git/config</code> file.</p> <p>Create an <code>allowed-signatures</code> file and add the public SSH key to the file, prefixing the key with the email address used to create the key.</p> <p>Commit and tag automatic signing with SSH key</p> ~/.config/git/config<pre><code>## ------ Git Behaviour ------ ##\n[commit]\n  # Automatically sign every commit\n    gpgsign = true\n\n[tag]\n  # Automatically sign every tag\n    gpgsign = true\n\n# SSH Key signing \n[user]\n    signingkey = ~/.ssh/id_ed25519.pub\n[gpg]\n    format = ssh\n[gpg \"ssh\"]\n    allowedSignersFile = ~/.config/git/allowed-signatures\n</code></pre> <p>The private SSH key is automatically used to sign each commit and annotated tag.</p> <p>With the public SSH key in the <code>allowedSignersFile</code> any GitHub client should show that the local commit is signed, i.e. Good \"git\" signature message.</p> <p> </p> <p>When the signed commit or tag is pushed to GitHub, the signature is checked against the public key registered with the user account and the change marked as verified if they match.</p> <p></p> <p> Commit signing with SSH Key - Practicalli Engineering Playbook </p>","tags":["git"]},{"location":"blog/safeguard-against-git-commit-spoofing/#summary","title":"Summary","text":"<p>As long as the private SSH key is not shared with others, then SSH key signing is a very strong approach to verifying the source of all contributions.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["git"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/","title":"London Clojurians Community - a relatively brief history","text":"<p>The London Clojurian community started in 2009 when Robert Rees tricked Bruce Durling into organsing monthly events. From those humble beginnings the community has grown close to 4,000 members with several monthly events taking place fairly consistently over the last 14 years (5 events in 1 month was the record).</p> <p>The community has thrived due to the hard work of a great many people and this article probably misses out on a lot of activities (especially in the early years).  I would like to thank everyone involved in organising events, hosting events and attending events.  Without you there would not be a community.</p> <p>I steped down as one of the main organisers having delegated all of the work to many other people.  The last decade of community work has been very rewarding, but its time for other to continue the work.  I now focus on the  Practicalli educational websites for learning and using Clojure effectively.</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#in-the-beginning","title":"In the beginning","text":"<p>The London Clojurians community initially evolved from members and organisers in London Java Community.</p> <p>The London Java Community organised a talk by Rich Hickey at SkillsMatter on 12th March 2009 (less than 2 years after the initial release of Clojure).</p> <p>The talk was entitled \"Clojure for Java Developers\", so naturally it attracted many people from the LJC and if I remember correctly it was a full house.</p> <p>Rich Hickey presented many topics that were included in the much longer talk: Clojure for Java Programmers Part 1 and Part 2</p> <p>This inspired many Java developers to start looking at Clojure and was the foundation for creating the London Clojurains, which started with Clojure code dojo events.</p> <p>SkillsMatter was London company that supported a wide range of software communities and hosted a great many Clojure talks and Clojure conferences.</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#practice","title":"Practice","text":"<p>Inspired by the Rich Hickey talk, Bruce Durling organised the first ever London Clojurians event (allegedly tricked into it by Robert Rees who kindly persuaded Thoughworks his employer at the time to host the event).</p> <p>The very first Clojure Dojo event announcement</p> <p>On the 20th of July (2009) we have a Clojure Dojo. If you haven't heard of Clojure it is a LISP like language on the JVM that attempts to provide easy concurrency on multicore machines. It is surprisingly easy for Java developers to learn and provides powerful immutable data structures and concurrency models.</p> <p>The workshop aims to introduce you to the language and work on a problem as a group. Clojure is pretty new to most of us so beginners are welcome as well as people willing to help n00bs learn.</p> <p>Code dojos are a great place to practice and learn new aspects of Clojure language and its wide community of libraries.</p> <p>The premise of the dojo was to raise everyones experience with Clojure with a side goal of eating all the pizza generously provides by Thoughtworks (a few times we had sandwiches and queche instead, which was a nice change)</p> <p>The dojo events were initially quite daunting, with two people pairing (one with some experience with Clojure hopefully) whilst everyone else watched.  Then the pairs would switch.  The aim was to gradually evolve a single project, specifially a text-based adventure game called Clork (Zork in Clojure).</p> <p>Text-based adventure game repository</p> <p> Clork project is on the London Clojurian GitHub repository, although probably not considered state of the art of Clojure by now...</p> <p>The dojo format quickly evolved to be less intimidating. Collectively a list of ideas were gathered and voted on and then people split into groups of 3-4 people to solve the winning idea (or doing what ever they wanted in the group). People in each group took turns at the keyboard to write some code.  At the end of the event, each team presented the work they had done and lessons learned (there was no expectation to have something working, but there was lots of REPL based demos).</p> <p>I initially went to the Clojure dojo events to learn how to run a dojo for the London Scala User Group.  After I while I realised that Clojure made far more sense to me that Scala ever did and Clojure was considerably more fun!  I eventually delegated the running of the Scala dojo to other people and invested my time learning Clojure instead.</p> <p>Code solutions were encouraged to be shared via the  London Clojurians GitHub organisation so the wider community could learn too.</p> <p>Yolina Sotirova hosted the Thoughworks dojo for many many years, laterly supported by Mario Giampietri and a few other willing Thoughtworkers.  Their offices are a few minutes walk from Picadilly Circus in the West End of London.</p> <p>Soon after the Thoughworks dojo started a second dojo begain at uSwitch, hosted by Christian Blunden, Aleksander Sumowski and many others.  uSwitch had been using Clojure for a while and it was great learning experience to experiment with them. Mark Mestern and many others help run the uSwitch monthly dojo to this day in their lovely offices just south of Tower Bridge.</p> <p>uSwitch and Thoughtworks have been long-term supporters of the code dojo events and after covid they are both running again</p> <ul> <li> Thoughtworks Clojure dojo - Last Tuesday of the Month</li> <li> uSwitch Clojure dojo - Second Tuesday of the Month</li> </ul>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#speaking-events","title":"Speaking events","text":"<p>A monthly gathering where people shared their experiences or demonstrated work that they had done, including libraries and tools they created.</p> <p>This was an in-person event, so speakers and talks were quite London centric (the current online talks have a much broader scope) and the audience was limited.  However, SkillsMatter did record some of the events and they are available to view on their website.</p> <p>Some  London Clojurians speaking events still have their videos available on the SkillsMatter website. Also try search for videos on SkillsMatter site using the clojure tag.</p> <p>I presented several talks at SkillsMatter over the years for a number of London communities. Many SkillsCasts remain for now on the SkillsMatter website.</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#clojurex-commercial-conference","title":"ClojureX Commercial Conference","text":"<p>Together with SkillsMatter the London Clojurians ran 8 commercial conferences between 2011 and 2018 that attracted over 350 people at its peak.  Community members selected the talks and organised the schedule whilst SkillsMatter organised the venue, catering and sponsorship.</p> <p>I had the honour of hosting the last 3 conferences and creating the final schedule of talks to get a smooth flow throughout the two days.</p> <p>The conference had a wide audience and many of the people attending were quite new to Clojure, although as people returned each year there were more and more experienced Clojurians there for interesting chats outside the talks.</p> <p>In the years that I ran the conference it was a challenge to get enough speakers to cover a 2-day schedule.  To encourage new speakers I even ran a public speaking workshop.  In the end I managed to cagoule enough people to speak (flattery, usually well deserved, was a key to my success) even though some events like the panel talks I had to beg people to join.</p> <p>Although the conference came to an abrupt end due to SkillsMatter financial difficulties, it served a very valuable role in building up a community and extending the reach of Clojure to other developer communities.  A huge thanks to all the SkillsMatter staff that helped organise the conference</p> <ul> <li>ClojureX 2011 - MC Bruce Durling</li> <li>ClojureX 2012 - MC Bruce Durling</li> <li>ClojureX 2013 - MC Bruce Durling</li> <li>ClojureX 2014 - MC Bruce Durling</li> <li>ClojureX 2015 - MC Chris Howe Jones</li> <li>ClojureX 2016 - MC John Stevenson</li> <li>ClojureX 2017 - MC John Stevenson &amp; Yolina Sotirova</li> <li>ClojureX 2018 - MC John Stevenson</li> </ul>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#euroclojure","title":"EuroClojure","text":"<p>On May 24 &amp; 25 of 2012 London hosted the EuroClojure conference, the first Clojure conference organised by Cognitect outside of the USA.  There were several EuroClojure events that were followed by communities across Europe creating their own events, i.e. Dutch Clojure Days, ClojureD, Heart of Clojure</p> <p>Many people from the London Clojurians community spoke and there was an excellent range of talks. From the awe inspring musical creations of overtone, engaging talks on CQRS, Cascalog and lossy Data Warehouses, to the inspiring talks from Rich Hickey (who gave two talks in the end).</p> <p>250 attendees eagerly listening to 35 talks over the two days and there were many exciting hallway conversations between talks.</p> <p>EuroClojure London presentation videos</p> <p>Day One and Day Two conference write-ups from Bruce Durling</p> <p>IN/Clojure is another community driven conference based in India</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#increasing-reach","title":"Increasing Reach","text":"<p>Whist presenting on Clojure at many other London developer communities I was always asked if there was a Clojure community people could join.  There was a healthy community, but it wasnt very visible.  Events were organised via Eventbrite and posted on the London Clojurians Google mailing list so were hard to find unless already part of the community.</p> <p>After discussing with the other organisers, I created a  Meetup.com site for London Clojurians and with in a day we had over 100 members and within a year it was over 1,000 members.  It was much easier for people to find and join in with our events after that.</p> <p>I created a logo design for the community to help people recognise our work and gave out free stickers at our events and conferences and any others I spoke at.  This helped raise awarness of the community and increased membership on the meetup site.</p> <p>A Website was also developed using ClojureScript and used as one of the learning paths for the London ClojureBridge events.</p> <p>I also had the chance to give Clojure talks and workshops across Europe (Germany, The Netherlands, Italy) and the USA (San Francisco), helping spread interest far and wide.</p> <p>Although the majority of my talks were not recorded, some of my most notable speaking experience include:</p> <ul> <li>Clojure Made Simple at JAX London, 23 October 2012 - My very first talk on Clojure and I learned a lot (although I don't know if the audience did)</li> <li>Get into Functional Programming with Clojure at CeBit - March 2016 in Hanover, Germany.  My first Clojure talk at Europe's biggest technology exhibition (recorded on a GoPro, so the video is a little curvy)</li> <li>Guiding People into Clojure - Clojure Remote 2016 - my first virtual conference and first virtual presentation (I was very nervous).</li> <li>Fun with Functional Programing in Clojure at Codemotion Amsterdam, 11th May 2016 - possibly the first Clojure talk I enjoyed all the way through</li> <li>lojureScript - Making Front-End development Fun again at Codemotion Amsterdam - was doing okay until I discovered Russ Olsen from Cognitect in the audience (I was sure I was going to say all the wrong things after that).  I had a great talk with Russ after the conference.</li> <li>Get into Functional Programming on the JVM with Clojure - my first and only visit to Sofia, Bulgaria in 2018.  The home of Bohzidar the creator of Emacs CIDER.</li> </ul>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#hack-the-tower-workshops","title":"Hack the tower workshops","text":"<p>After a successful Hack day at the Guardian offices and an enlightening Clojure Hackday at thoughtworks, I decided to create a regular Hack day called Hack The Tower.  The event was scheduled in the Clojure, Java and Scala communities (as I had been helping to organise events for them) and open to anyone else that wanted to come really.</p> <p>I was working at Heroku/Salesforce offices in Tower 42 (hence Hack The Tower name for the event) and realised no one used their offices on the weekend, so got permission to run a Saturday even ever month (ensuring the building security staff were happy).</p> <p>I was quite surprised when 20+ people turned up on a chilly November day (28th to co-inside with International day-of-code).  Much fun and knowledge sharing was happening as we worked together on ideas in small groups.  We even had some robots to control with code. Not even the faint smell of stale coffee left by the sales teams the day before stopped people enjoying themselves.</p> <p>The event had a reboot when Salesforce moved into floor 26, 27 &amp; 28 of the Heron Tower (Salesforce Tower).  This was a beautiful and large office space which easily held over 100 people for a hack day.</p> <p>Hack The Tower writeup - February 2013 - jr0cket blog</p> <p>Hack The Tower ran every month for 5 years whilst I was at Salesforce and food was sponsored by Salesforce (and carried in several super-size bags from Tescos by myself each time - so a bit of exercise for me)</p> <p>Another  bit of exercise to chase down everyone at the end of the day across all the many rooms, ensuring I was the last too leave :)</p> <p></p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#clojurebridge-london","title":"ClojureBridge London","text":"<p>uSwitch ran the first ClojureBridge London event in February 2014 with about 8 organisers who had no experience in how to run such an event (or what it should look like).  Thanks to Anna Pawlicka we manage to get organised and ran a very successful event for 38 people, with about 10 volunteers on the day.</p> <p>There has always been a very mixed audience at each event, from those who have never written code before to those with some professional experience (but no Clojure experience).  Attendees were put into groups of 3-5 people with one or more voluneers as their guide through Clojure.</p> <p>Initially the clojurebridge.org content was used, although after the first event we started to extend and enhance the learning materials.  I did a lot of work to create specific learning paths and engaging exercises for students at different levels of experience.  Work that motivated me to create the Practicalli series of on line books.</p> <p>GeekGirls Scotland ran a ClojureBridge event on September 27th 2014 at CodeBase in Edinburgh.</p> <p>I was involved in organising all 13 events over the last 8 years and learned many lessons on how to help people into Clojure.  I've create a guide to organising a ClojureBridge London event in the hope that others can benefit and be inspired to run their own ClojureBridge events.</p> <p>ClojureBridge London website</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#reclojure-community-conference","title":"reClojure community conference","text":"<p>Early November 2019 I was very busy organising the ClojureX conference and getting the last few speakers for the 2 day conference with SkillsMatter.  Then I got a message saying SkillsMatter had declared banckrupcy and all conferences were cancelled.  Within a day SkillsMatter had shut down and all the staff let go.</p> <p>This did leave some of our speakers having to cancel travel plans (one speaker even coming from Austraila) and hopefully reclaim their expenditure.</p> <p>I had though it impossible to organise a replacement conference (especially on my own).  However, Renzo Borgatti, Bruno Bonacci and several other people stepped up and made reClojure community conference happen, all within the space of about 6 weeks.</p> <p>reClojure in 2019 was an in-person event held at the Crypt, a venue we used to use for the ClojureX conference back in the early days.  Cognitect supplied a big chunk of the money for the venue and many other companies working with Clojure also contributed.  Over 100 people attended the free conference and it was a roaring success.</p> <p>I had been talking about running a community conference for the last year or so, but there was so much already going on it was hard to schedule.  Although there was short term problems for some of the speakers and attendees, I am please (releaved) that a community conference was established.</p> <p>Due to the coronavirus pandemice (which I am still afected by unfortunately) the 2020 reClojure event was online, with attendees joining via Zoom and able to ask questions in speaker panels.  The conference was also live streamed on YouTube as more people wanted to join in that we had Zoom places for.  The online conference has continued to increase in popularity, so much so that we keep increasing the Zoom plan required to include everyone that wants to attend.</p> <p>Although the thought of another in-person conference has been discussed many times, the reach the online conference gives far outways any benefits (and an online conference, although a lot of work, is still less work than an in-person event).</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#monthly-talks-online","title":"Monthly talks Online","text":"<p>September 2018 I left my role at Citi (a financial company where I ran 5 teams across several continents).  I decided to focus on filling in all the gaps in my Clojure knowledge, so did the 100 days of code challenge.  Half-way through the challenge I started the Practicalli YouTube channel and ran a weekly Clojure study event online, which proved very popular and a viable way to do live coding and presentations.</p> <p>Over the next 2 years I created 100+ hours of video content showing my Clojure coding skills (or occasionally lack of them).</p> <p>Due to the Covid pandemic and lack of venue (after SkillsMatter closed their offices) there was little opportunity to do in-person talks and it had become very difficult to get people to present (only a few talks a year happened during 2018 &amp; 2019).</p> <p>Taking the talks online had been suggested many times over the years to increase the pool of speakers. Bruno Bonacci took the initiative and started organising the virtual presentations and they really took off, so much more than we could do with in-person events.  Bruno has done an amazing job of organising a huge list of diverse topics and speakers.  Thank you Bruno.</p> <p>The talks are so popular they are becoming more regular, from monthly to bi-weekly.</p> <p>All the videos are uploaded to the London Clojurains YouTube Channel that I set up and delegated ownership to Renzo Borgatti.  The latest reColojure videos can also be found on this channel.</p> <p></p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#financial-support","title":"Financial Support","text":"<p>Many companies and individuals ask if they could sponsor the community over the years, but most of the community ran with no actual costs as all the work was done on a volunteer basis.</p> <p>Thoughworks and uSwitch hosting (and providing refreshments) for the dojos and SkillsMatter hosted the talks and conferences (which many companies did sponsor, although that was directly to SkillsMatter).</p> <p>When London Clojurians started reClojure conference though, there was a need for financial help.  The conference was free to attend, so the venue, catering and filming created costs.</p> <p>I suggested to Renzo Borgatti and Bruno Bonacci that we start the  London Clojurains Open Collective as a completely transparent way for anyone to financially support the community.  Either for specific events like reClojure or in general to help the community to do much more.</p> <p>The financial support has taken the burdon of volunteers to pay for essential tools such as Meetup.com and Zoom video conference, which had previously been paid by those managing those services.</p> <p>The community uses freely available services where possible, e.g GitHub for code sharing and GitHub pages to host websites and learning materials.</p>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#resources","title":"Resources","text":"<ul> <li> London Clojurains Meetup site</li> <li> London Clojurains Landing Page - written in ClojureScript</li> <li> London Clojurains YouTube Channel</li> <li> Practicalli YouTube Channel</li> <li> London Clojurains Open Collective</li> <li> London Clojurains - reClojure online conference</li> <li> London Clojurains GitHub Organisation - code from dojo and other events</li> </ul>","tags":["events","london-clojurians"]},{"location":"blog/london-clojurians-community---a-relatively-brief-history/#summary","title":"Summary","text":"<p>It has been a pleasure and an honour to help build the London Clojurians community to nearly 4,000 members and be involved with hundereds of events over the last 13 years.</p> <p>My favourite events were the coding dojos which helped me solve many of the  4Ever Clojure challenges and appreciate the joy of Clojure.  I attended almost every dojo between 2014 and 2019 and learned a great deal from helping others learn Clojure too.</p> <p>I have fond memories of the 5 years of workshops I ran as part of Hack The Tower. Often they were quite nerve-racking as it was often the case of only knowing slightly more than they people I was helping.  Or more often knowing what words to put into an internet search and applying the examples found without people wondering how little I really knew.</p> <p>Learning by helping people has been a big motivating part of my community activities and this will continue as part of the Practicalli books and videos.  This is where I will focus my efforts from now on, although I am happy to advise anyone is running (or interested in running) community events.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["events","london-clojurians"]},{"location":"blog/pin-emacs-packages-to-manage-issues/","title":"Pin Emacs packages to manage issues","text":"<p>Emacs provides a huge amount of features via packages. Community configurations like Spacmacs orchestrate packages so they work seemlessly together.  It is rare, but sometimes a package will have a breaking issue.</p> <p>Melpa provides (5,544) up-to-date packages  automatically built from each projects Git repository. Builds are defined by a recipe for each package.</p> <p>A custom recipe can be used to control which version of a package is used with the Emacs configuration, to work around issues or changes to a package.</p>","tags":["emacs","spacemacs"]},{"location":"blog/pin-emacs-packages-to-manage-issues/#melpa-recipes","title":"Melpa recipes","text":"<p>Search for packages on the Melpa website and view its recipe to understand how it is built.</p> <p>Emacs Package Recipe from Melpa</p> <pre><code>(treemacs\n :fetcher github\n :repo \"Alexander-Miller/treemacs\"\n :files (:defaults\n         \"Changelog.org\"\n         \"icons\"\n         \"src/elisp/treemacs*.el\"\n         \"src/scripts/treemacs*.py\"\n         (:exclude \"src/extra/*\")))\n</code></pre> <p>Melpa will build the package from the lastest commit.</p> <p><code>:commit</code> with a specific Git SHA value can be used to specify a different commit, especially useful for using an earlier package known to be issue free.</p> <p>Visit the shared Git repository of the package and review the commit history to find a likely working package.</p>","tags":["emacs","spacemacs"]},{"location":"blog/pin-emacs-packages-to-manage-issues/#custom-recipe-in-spacemacs","title":"Custom recipe in Spacemacs","text":"<p>Spacemacs uses packages from Melpa so the latest package versions are downloaded when Spacemacs is installed.</p> <p>Users of Spacemacs can decide when to update packages by manually running a package update, <code>SPC f e U</code>, usually when a new feature in a package is desirable.</p> <p>If there is an issue with updated package, then run a package rollback via the link on the Spacemacs home buffer, <code>SPC b h</code>.</p> <p>If the majority of package updates are required, then a specific package version can be pinned by providing a custom recipe.</p> <p>Add a custom recipe to the Spacemacs user configuration, to the <code>dotspacemacs-additional-packages</code>.</p> <p>Move the newest package version from the <code>elpa/&lt;emacs-version&gt;/develop/</code> directory to trigger a package download when Emacs is restarted.</p> <p>Example package pin</p> <pre><code>   dotspacemacs-additional-packages\n   '((treemacs\n      :location (recipe\n                 :fetcher github\n                 :repo \"Alexander-Miller/treemacs\"\n                 :commit \"2c576bebccd56ec8e65f4ec5ed5de864d9684fbf\"\n                 :files (:defaults\n                         \"Changelog.org\"\n                         \"icons\"\n                         \"src/elisp/treemacs*.el\"\n                         \"src/scripts/treemacs*.py\"\n                         (:exclude \"src/extra/*\")))))\n</code></pre> <p>Update Spacemacs only when there is a need</p> <p>Practicalli recommends Spacemacs packages should be updated only when there is a known new feature or bug fix available.</p> <p>Avoid updating packages when your time is constrained, so there is scope to resolve a potential error.</p>","tags":["emacs","spacemacs"]},{"location":"blog/pin-emacs-packages-to-manage-issues/#copy-package-from-rollback-cache","title":"Copy package from rollback cache","text":"<p>Spacemacs saves a short history of package files in the <code>.cache/.rollback/&lt;emacs-version&gt;/develop/&lt;rollback-date&gt;</code></p> <p>Rather than use a custom recipe or revert all updated packages, a specific package can be copied from the rollback cache, removing the newer package.</p> <p>For example:</p> <pre><code>cp -r ~/.config/emacs/.cache/.rollback/28.3/develop/23-08-10_07.35.07/treemacs-20230703.1929/ ~/.config/emacs/elpa/28.3/develop/\n</code></pre>","tags":["emacs","spacemacs"]},{"location":"blog/pin-emacs-packages-to-manage-issues/#summary","title":"Summary","text":"<p>Issues with Emacs packages are quite rare from experience and often solved very quickly.</p> <p>A Package rollback in Spacemacs is a very quick way to resolve an issue.  Pinning a package using a custom recipe a little more involved, although still a relatively quick approach if the error messages identify a troubled package.</p> <p>The Spacemacs community is very large so issues are reported quickly.  Even if the issue is not a simple resolution then collectively the issue is solved quite rapidly.</p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["emacs","spacemacs"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/","title":"Create deps-new templates for Clojure CLI projects","text":"<p>Templates are great way to learn how to assemble Clojure libraries into a working project and can save considerable time when creating new projects by providing common configuration, development tools, dependencies and code used by the engineering team.</p> <p> seancorfield/deps-new provides a simple to understand approach to defining templates. Declarative rules express how file templates are copied to create a new project.  Substitution values are passed to <code>{{unique-key}}</code> placeholders in template files creating a specific project each time.  Programmatic transformation is also supported for significant customisation, e.g. adding options to templates.</p> <p> practicalli/project-templates is a new project to provide comprehensive templates to support production level workflows, including Dockerfile configuration, GitHub continuous integration workflows, etc . Read on to see how the first template was built and learn tips to building your own templates.</p> <p>deps-new provides a  guide to writing templates</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#existing-templates","title":"Existing templates","text":"<p><code>app</code>, <code>lib</code> and <code>scratch</code> templates are built into deps-new tool.  Additional template can be used from a local file space or Git repository, e.g. community templates.</p> <p>deps-new also provides the <code>template</code> template to create a project for defining one or more custom project templates, highly recommended if sharing a template via Git repository.</p> <p>Practicalli project templates provides the <code>practicalli/service</code> template to create a production grade HTTP service with Integrant component management system, mulog event logging, reitit routing for APIs, docker, tools.build and make tasks.  More templates will be added to this project over time.</p> <p>deps-new support templates published via a Git service or on the local file space. Templates published via Maven / Clojars are not supported</p> <p> seancorfield/clj-new uses the Leiningen template format, providing wide range of project templates, although many of those templates do not include a Clojure CLI configuration.  The clj-new project is not actively maintained.</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#create-template-project","title":"Create template project","text":"<p>The deps-new built-in template called <code>template</code> will create a new project for creating a custom template (or multiple templates).</p> <p><code>:project/create</code> alias from  Practicalli Clojure CLI Config provides the deps-new tool</p> <p>Create a new project and specify the template, name of project (the template name) and optionally the directory to create the new project within.</p> <pre><code>clojure -T:project/create :template template :name practicalli/service :target-dir project-templates\n</code></pre> <p><code>clojure -Tnew template :name practicalli/service</code> if deps-new was installed as a Clojure CLI tool</p> <p>Version control the newly created template project and start customising.</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#use-new-template","title":"Use new template","text":"<p>For an effective local development workflow, add the new template project as a dependency via <code>:local/root</code>, then template changes are available as they are saved.</p> <pre><code>:project/templates\n{practicalli/templates {:local/root \"home/practicalli/projects/practicalli/project-templates/\"}}\n</code></pre> <p>Create a new project with this template to test what a new project looks like.</p> <p>Use the <code>:project/templates</code> alias when calling deps-new, e.g. with the <code>:project/create</code> alias from  Practicalli Clojure CLI Config.</p> <p>Values for <code>:template</code> and <code>:name</code> keys are required for deps-new when calling deps-new</p> <pre><code>clojure -A:project/templates -T:project/create :template practicalli/service :name practicalli/gameboard\n</code></pre> <p>The <code>:name</code> form is the organisation or developer name / service name</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#new-template-overview","title":"New Template Overview","text":"<p>The files that make up the template reside under the <code>resources</code> directory, e.g. <code>resources/practicalli/service/</code> for the Practicalli Service template</p> <ul> <li><code>build</code> - source of the dependencies, a deps.edn template (<code>deps.tmpl</code>) and build script build.clj template (<code>build.tmpl</code>)</li> <li><code>root</code> - files and directories to be added to the root of the new project</li> <li><code>src</code> - files &amp; directories providing default code examples</li> <li><code>test</code> - files &amp; directories providing default test code examples</li> <li><code>template.edn</code> - values for substitution,  declarative <code>:transform</code> rules for copying files and directories to a new project (values optionally used for programmatic transformation)</li> </ul> <p>This is the default structure and can be modified as required.  The <code>template.edn</code> should be modified to match any changes in directory structure and file names.</p> <p>In the deps-new <code>template</code> design, Clojure files with <code>{{}}</code> substitution blocks have the <code>tmpl</code> extension to avoid errors from tooling that compiles or analyses code, should those files be added to the classpath.</p> <p>Practicalli uses <code>.clj.template</code> and  <code>.edn.template</code> file name extensions with Clojure files that contain substitutions to retain the original file name extension and clarity as to the files purpose</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#copy-files","title":"Copy files","text":"<p>deps-new creates a new project by copying all the files from the template using the <code>:transform</code> declarative rules.</p> <p>Files in the <code>root</code> directory of the template are copied to the root of the new project by default.</p> <p>If file names should be transformed or files moved to a different location than root, create a new directory in the template to contain those files and add an explicit rule to the <code>:transform</code> section.  Remember to remove the files from the <code>root</code> directory, otherwise they will still be copied.</p> <p><code>:transform</code> key contains declarative rules that define where the contents of each directory in the template is copied to in a new project created from the template, e.g.:</p> <ul> <li><code>\"build\" \"\"</code> copies files in the 'build' directory of the template to the root of a new project</li> <li><code>\"src\" \"src/{{top/file}}\"</code> copies files to the <code>src</code> directory in a sub-directory provided by the template substitution, e.g <code>src/practicalli/gameboard</code></li> </ul> <p>In the Practicalli project templates the <code>build</code> files from the original deps-new template were renamed to <code>deps.edn.template</code> and <code>build.clj.template</code> to include their original filename extension and be very explicitly named.</p> Example template.edn configuration from Practialli Project templates<pre><code>[[\"api\" \"src/{{top/file}}/{{main/file}}/api\"\n   {\"system_admin.clj.template\" \"system_admin.clj\"\n    \"scoreboard.clj.template\" \"scoreboard.clj\"}]\n  [\"build\" \"\"\n   {\"build.clj.template\" \"build.clj\"\n    \"deps.edn.template\"  \"deps.edn\"}]\n  [\"resources\" \"resources\"\n   {\"config.edn.template\" \"config.edn\"}]\n  [\"src\" \"src/{{top/file}}/{{main/file}}\"\n   {\"middleware.clj.template\" \"middleware.clj\"\n    \"parse_system.clj.template\" \"parse_system.clj\"\n    \"router.clj.template\" \"router.clj\"\n    \"service.clj.template\" \"service.clj\"}]\n  [\"test\" \"test/{{top/file}}/{{main/file}}\"\n   {\"service_test.clj.template\" \"service_test.clj\"}]]\n</code></pre> <p>The <code>:only</code> keyword added to the end of a transform mapping will only copy a specified file from the directory, ignoring all other files.  <code>:raw</code> keyword will not use any substitution on that file, useful for binary files any files that use the <code>{{}}</code> substitution for purposes other than creating projects with deps-new.</p> <p>Service Template - change to resources directory</p> <p>practicalli/service template includes a <code>resources/config.edn.template</code> that will be copied to <code>resources/config.edn</code> in a new project.  The existing <code>resources</code> directory in <code>root</code> was removed to ensure <code>resources/.keep</code> is not copied to the new project.</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#substitution","title":"Substitution","text":"<p><code>{{key}}</code> in any of the copied files will substitute the value associated with <code>:keyword</code>, if that key is found in:</p> <ul> <li> available options lists optional keys to override template defaults</li> <li> project names and variables lists derived, environmental and scm variables that can be used as substitutions</li> <li><code>template.edn</code> file of the template in use</li> </ul> <p><code>\"{{description}}\"</code> substitutes the value associated with the <code>:description</code> key from the <code>template.edn</code> file or command-line argument.  Typically used in the project readme.md file and/or the comment header of the main namespace</p> <p><code>(ns {{top/ns}}.{{main/ns}})</code> substitutes the fully qualified namespace within an ns expression, creating the project specific namespace for source and test files.</p> <p><code>{{raw-name}}</code> uses value from <code>:name</code> passed as an argument</p> <p>The following sub-sections show examples from the  Practicalli Project templates for ideas on how to use these substitutions</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#namespace-and-file-names","title":"Namespace and File names","text":"<p>Clojure projects need to use the correct case in file names (snake_case) and namespace <code>ns</code> definitions (kebab-case).</p> <p>Appending any unqualified substitution keyword with <code>/ns</code> or <code>/file</code> will use the correct case</p> <ul> <li><code>{{unqualified-key/ns}}</code> - hyphenated words use kebab-case, e.g. for <code>ns</code> and <code>require</code> expressions</li> <li><code>{{unqualified-key/file}}</code> - hyphenated words use snake_case, e.g. for use as a filename or directory path</li> </ul> <p>Use <code>{{top/ns}}</code> and <code>{{main/ns}}</code> substitutions to create a namespace form using the values derived from the <code>:name</code> value provided on the command line when creating a new project</p> <pre><code>(ns {{top/ns}}.{{main/ns}}.service\n  \"Gameboard service component lifecycle management\"\n  (:gen-class)\n  (:require\n   ;; Application dependencies\n   [{{top/ns}}.{{main/ns}}.router :as router]\n   ;; Component system\n   [{{top/ns}}.{{main/ns}}.parse-system :as parse-system]\n   ;; System dependencies\n   [org.httpkit.server     :as http-server]\n   [com.brunobonacci.mulog :as mulog]))\n</code></pre> <p><code>{{top/file}}</code> and <code>{{main/file}}</code> are used in the template.edn to use the correct case for file names, derived from the :name value given when creating the project.</p> Example template.edn configuration from Practialli Project templates<pre><code>[[\"api\" \"src/{{top/file}}/{{main/file}}/api\"\n   {\"system_admin.clj.template\" \"system_admin.clj\"\n    \"scoreboard.clj.template\" \"scoreboard.clj\"}]\n  [\"build\" \"\"\n   {\"build.clj.template\" \"build.clj\"\n    \"deps.edn.template\"  \"deps.edn\"}]\n  [\"resources\" \"resources\"\n   {\"config.edn.template\" \"config.edn\"}]\n  [\"src\" \"src/{{top/file}}/{{main/file}}\"\n   {\"middleware.clj.template\" \"middleware.clj\"\n    \"parse_system.clj.template\" \"parse_system.clj\"\n    \"router.clj.template\" \"router.clj\"\n    \"service.clj.template\" \"service.clj\"}]\n  [\"test\" \"test/{{top/file}}/{{main/file}}\"\n   {\"service_test.clj.template\" \"service_test.clj\"}]]\n</code></pre>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#build-files-directory","title":"Build files directory","text":"<p>In the Practicalli Project templates, <code>deps.edn.template</code> is a Clojure CLI <code>deps.edn</code> configuration file which provides several aliases to support development.</p> <ul> <li><code>:run/service</code> starts the service by running the <code>-main</code> function from the main namespace</li> <li><code>:run/greet</code> calls the <code>greet</code> function, an example of using <code>clojure.exec</code></li> <li><code>:test/env</code> is a placeholder for adding libraries which would support the testing of the service.</li> <li><code>:test/run</code> starts the kaocha test runner and runs all the unit tests within the <code>test</code> path (stops on first failing test) and can also be used with CI service</li> <li><code>:build</code> runs the given build task (defined in <code>build.clj</code>), e.g. <code>clojure -T:build uberjar</code></li> </ul> <p>The <code>:run/service</code> uses a substitution to specify the fully qualified main namespace</p> <pre><code>  :run/service\n  {:main-opts [\"-m\" \"{{top/ns}}.{{main/ns}}\"]}\n</code></pre>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#root-files","title":"Root files","text":"<p><code>README.md</code>, <code>CHANGELOG.md</code>, <code>.gitignore</code> and <code>pom.xml</code> are provided by the deps-new template.</p> <ul> <li><code>README.md</code> uses the <code>{{raw-name}}</code> as the title and <code>{{description}}</code> as the project description</li> </ul> <p>The Practicall service template updates the <code>root</code> files and adds many others that support the Practicalli workflow</p> <p>The following files were added to the <code>resources/practicalli/service/root</code> directory</p> <ul> <li><code>.cljstyle</code> configuration for Cljstyle linter</li> <li><code>.dockerignore</code> configuration to manage files copied to docker images</li> <li><code>.dir-local.el</code> Clojure CLI aliases to use with the Emacs Cider jack-in command</li> <li><code>dev/user.clj</code> for development tools</li> <li>launches Portal data inspector, listening on nREPL and displays all evaluation results</li> <li>Mulog event log with publisher to send event logs to portal</li> <li>find-deps to search for Clojure libraries</li> </ul>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#src-and-test","title":"src and test","text":"<p>The locations to copy the src and test files in a new project are defined in the <code>:transform</code> section of the <code>template.edn</code> file.</p> <p>In each file within <code>src</code> and <code>test</code>, the namespace definition uses substitution to define the correct namespace</p> <p>In the <code>src/</code>service.clj.template:</p> <pre><code>(ns {{top/ns}}.{{main/ns}}\n  (:gen-class)\n  (:require\n    [com.brunobonacci.mulog :as mulog]))\n</code></pre> <p>In the <code>test/service.clj.template</code> the ns expression uses substitution before the <code>-test</code> postfix on the namespace.</p> <p>The service namespace from source is also added via substitution</p> <pre><code>(ns {{top/ns}}.{{main/ns}}-test\n  (:require [clojure.test :refer [deftest is testing]]\n            [{{top/ns}}.{{main/ns}} :as {{main/ns}}]))\n</code></pre>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#custom-substitution","title":"Custom substitution","text":"<p>Add key value pairs in <code>template.edn</code> for custom substitutions, e.g. defining the version of Clojure</p> <pre><code>{;; Values to pass into the template\n :description \"TODO: Provide a meaningful description of the project\"\n\n ;; Custom substitutions\n :clojure-version \"1.11.1\"\n\n ;; Programatic Transformation functions\n :data-fn practicalli.service/data-fn\n :template-fn practicalli.service/template-fn\n\n ;; Declarative Transformation rules\n :transform\n [[,,,]]}\n</code></pre> <p>The <code>deps.edn.template</code> can then use substitution to include the desired version of Clojure</p> deps.edn.template<pre><code> :deps\n {org.clojure/clojure {{clojure-version}}}\n</code></pre> <p>When using the template to create a project, the custom key can be given a different value as a command line option</p> <pre><code>clojure -T:project/create :template practicalli/application :name practicalli/playground :clojure-version \"1.12.0-alpha\"\n</code></pre>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#test-templates","title":"Test templates","text":"<p>Each template should have a unit test that checks the <code>template.edn</code> file against the deps-new specification</p> <p>Tests can be run with a Clojure test runner, e.g. kaocha test runner using <code>:test/run</code> alias from Practicalli Clojure CLI Config.</p> <pre><code>clojure -X:test/run\n</code></pre> <p>In Practicalli Project Templates, <code>src/practicalli/service_test.clj</code> defines a unit test with <code>clojure.test</code> and <code>clojure.spec</code>, which test the <code>practicalli/template/service/template.edn</code> configuration.</p> <p>A unit test is provides when creating a new project via the deps-new template</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#publish-and-use-template","title":"Publish and Use template","text":"<p>Push the new project with custom template to a shared Git service (GitHub, GitLab, etc.)</p> <p>Create a release with a Git tag version and a meaningful description, e.g. using the GitHub releases page https://github.com/practicalli/project-templates/releases</p> <p>A alias could be used to add the new template project in the user <code>deps.edn</code> configuration</p> <pre><code>  :project/templates\n  {extra-deps:\n   {io.github.practicalli/project-templates {:git/tag \"2023.04.19\" :git/sha \"975e771\"}}}\n</code></pre> <p>However, it is simpler to include the new template project as a dependency within the alias to run deps-new, e.g. <code>:project/create</code> alias definition.</p> <pre><code>  :project/create\n  {:replace-deps {io.github.seancorfield/deps-new\n                  {:git/tag \"v0.5.1\" :git/sha \"48bf01e\"}\n                  io.github.practicalli/project-templates\n                  {:git/tag \"2023.04.19\" :git/sha \"975e771\"}}\n   :exec-fn org.corfield.new/create\n   :exec-args {:template practicalli.template/application\n                  :name practicalli/playground}}\n</code></pre> <p>Default values for template.edn keys can be defined in the <code>:exec-args {}</code> of an alias for the project template.  These values will be overridden by matching key values passed via the command line</p> <p>The command to create a new project is greatly simplified</p> <pre><code>clojure -T:project/create\n</code></pre> <p>Providing a specific project name will override the default <code>:name</code> value</p> <pre><code>clojure -T:project/create :name practicalli.template/gameboard\n</code></pre> <p>And specifying a template will override the default <code>:template</code> value</p> <pre><code>clojure -T:project/create :template practicalli/application :name practicalli.template/gameboard\n</code></pre> <p>Practicalli Clojure CLI Config has been updated to include the practicalli/project-templates dependency, making available all the Practicalli templates.</p>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#multiple-template-project","title":"Multiple template project","text":"<p>Multiple templates can be added to the same project, especially if they are logically connected (e.g. part of the same team or organisation).</p> <p>A single dependency can be used if all templates are available in the same project.</p> <p>Each template is referred to via its namespace, e.g. <code>practicalli/service</code>, <code>practicalli/application</code>, etc.</p> <ul> <li><code>resources/practicalli/new-template-name</code>: add all the code and configuration for the new project, typically following the <code>build</code>, <code>root</code>, <code>src</code> and <code>test</code> directory name convention</li> <li><code>src/practicalli/</code>: add <code>template_name.clj</code></li> <li><code>test/practicalli/</code>: add <code>template_name_test.clj</code></li> </ul>","tags":["clojure","clojure-cli"]},{"location":"blog/create-deps-new-templates-for-clojure-cli-projects/#summary","title":"Summary","text":"<p> seancorfield/deps-new template provides a fast way to start creating your own templates, which can quickly be assembled from code and configuration in existing project.</p> <p> Practicalli project templates provides an example of how comprehensive a template can be with very simple declarative rules.</p> <p>deps-new also provides  Programmatic transformation for more advanced transformation.</p> <p>A <code>data-fn</code> function is provided to modify the available substitution data and the <code>transform-fn</code> to modify the <code>template.edn</code> structure.</p> <p><code>transform-fn</code> could be used to update the declarative rules that control the file copying, using alternative source code and configuration files based on optional values passed into the template, e.g. <code>:persistence :postgres</code> command line option would use source code files that included <code>next.jdbc</code>, postgres library as a dependency and code to manage and query the database.</p> <p>Thank you.</p> <p> Practical.li Website</p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>","tags":["clojure","clojure-cli"]},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/","title":"Web Scraping with Clojure - Scraping Hacker News","text":"<p>Enlive is a Clojure library that can be used for generating dynamic server-side content as well as scraping websites.</p> <p>Scraping websites is sometimes required when they do not provide an API.  Although Hacker News does have an API, will show how to scrape its website using Enlive's selectors.</p>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#create-a-clojure-project","title":"Create a Clojure project","text":"<p>Create a directory that contains:</p> <ul> <li><code>deps.edn</code> file containing an empty hash-map, <code>{}</code></li> <li><code>src/practicalli/webscrape.clj</code> file</li> </ul> <p>Edit the <code>deps.edn</code> file and add the Enlive library as a dependency, optionally including a specific version of the Clojure library.</p> <pre><code> :deps\n {org.clojure/clojure {:mvn/version \"1.12.0\"}\n  enlive/enlive       {:mvn/version \"1.1.6\"}}\n</code></pre> <p>Now we are read to start the REPL, either via your editor, using <code>clj</code> or using rebel readline <code>clojure -A:rebel</code> if installed.</p> <p>See details of how to install these</p> <p>Open the <code>src/practicalli/webscraper-enlive.clj</code> file and add code for our scraper</p>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#adding-a-website-to-scrape","title":"Adding a website to scrape","text":"<p>A <code>def</code> function could be used to bind the URL to a name</p> <pre><code>(def hacker-news-url \"https://news.ycombinator.com/\")\n</code></pre> <p>Enlive will scrape a website using the <code>html-resource</code> function, which takes an HTML object (<code>java.net.URL</code>) and converts it into a nested Clojure data structure, a bit like a simplfied Document Object Model (DOM).</p> <pre><code>(html/html-resource (java.net.URL. hacker-news-url))\n</code></pre> <p>The <code>html-resource</code> function returns a sequence of hash-maps, containing Clojure keywords that represent the HTML tags and CSS styles.</p> <p>Here is just a small part of this output, specifically around the <code>&lt;td class=\"title\"&gt;</code> tag</p> <pre><code>{:tag :td,\n                  :attrs {:class \"title\"},\n                  :content\n                  ({:tag :a,\n                    :attrs\n                    {:href\n                     \"https://www.roadandtrack.com/new-cars/car-technology/a31451281/koenigsegg-gemera-engine-specs-analysis/\",\n                     :class \"storylink\"},\n                    :content\n                    (\"Koenigsegg\u2019s 2.0-Liter No-Camshaft Engine Makes 600 Horsepower\")}\n                   {:tag :span,\n                    :attrs {:class \"sitebit comhead\"},\n                    :content\n                    (\" (\"\n                     {:tag :a,\n                      :attrs {:href \"from?site=roadandtrack.com\"},\n                      :content\n                      ({:tag :span,\n                        :attrs {:class \"sitestr\"},\n                        :content (\"roadandtrack.com\")})}\n                     \")\")})}\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#caching-scraped-websites","title":"Caching scraped websites","text":"<p>When we are developing a scraping app we could end up hitting a website hundreds (thousands) of times and if lots of people did that it would not be good for that website.</p> <p>Using the caching nature of the <code>def</code> function, we can bind the result of calling the website to a name.  Each subsequent time the name bound to the results is evaluated, the existing data is used and the website is not visited.  This can also speed up your development if there is a slow connection to that website.</p> <pre><code>(def website-content-hacker-news\n  \"Get website content from Hacker News\n  Returns: list of html content as hash-maps\"\n\n  (html/html-resource (java.net.URL. hacker-news-url)))\n</code></pre> <p>Note: alternatively you could use a command line tool to pull down a website to a file, allowing you to work with the file outside the REPL.</p>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#inspecting-what-to-scrape","title":"Inspecting what to scrape","text":"<p>There is typically a lot of structure and styling around the content of a web page, so finding the right starting point is sometimes tricky.  Using a browers Inspector tool can help find the right tags quickly.</p> <p>With the website open in your browser, use the Inspect Element tool to look for unique HTML tags and CSS classes that surround the content you need.</p> <p>Inspecting the headings in hacker news webpage, the text of each headline is inside a <code>td</code> tag, a table data cell.  The headings <code>td</code> tag has as a CSS style called <code>title</code>, so it can be referenced as <code>.td.title</code></p>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#getting-selective-with-webpage-content","title":"Getting Selective with webpage content","text":"<p>Enlive uses selectors to extract specific content from the website content.</p> <p>Selectors are define as a vector containing keywords that represent the HTML tags and CSS classes in the original web page.</p> <p>To get all the matching headings we use a selector with the Enlive <code>select</code> function on the parsed</p> <pre><code>(html/select website-content-hacker-news [:td.title :a])\n</code></pre> <p>This returns a Clojure data structure containing any matching parts of the website.</p> <p>To see the results clearly, we can either pretty print them or just take the first part of the data structure.</p> <pre><code>(take 1\n  (html/select website-content-hacker-news [:td.title :a]))\n</code></pre> <p>Example output:</p> <pre><code>;; =&gt; ({:tag :a,\n;;      :attrs {:href \"https://www.roadandtrack.com/new-cars/car-technology/a31451281/koenigsegg-gemera-engine-specs-analysis/\", :class \"storylink\"},\n;;      :content (\"Koenigsegg\u2019s 2.0-Liter No-Camshaft Engine Makes 600 Horsepower\")})\n</code></pre> <p>The Enlive <code>text</code> function extracts the value from the <code>:content</code> key. Mapping the <code>text</code> function over our selected keys returns just the content we want</p> <pre><code>(map html/text\n     (html/select\n       website-content-hacker-news\n       [:td.title :a]))\n</code></pre> <p>This will return a list of all the matching headlines, each headline will be a string.</p> <pre><code>(\"Koenigsegg\u2019s 2.0-Liter No-Camshaft Engine Makes 600 Horsepower\" \"roadandtrack.com\" \"Git Partial Clone lets you fetch only the large file you need\" \"gitlab.com\" \"Pence says European travel ban will extend to U.K. and Ireland\" \"axios.com\" \"Coronavirus has caused a bicycling boom in New York City\" \"grist.org\" \"Iceland radically cut teenage drug use\" \"weforum.org\")\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#enlive-selectors","title":"Enlive Selectors","text":"<p>Enlive selectors are data structures that identify one or more HTML nodes. They describe a pattern of data\u2014\u200bif the pattern matches any nodes in the HTML data structure, the selector will select those nodes. A selector may select one, many, or zero nodes from a given HTML document, depending on how many matches the pattern has.</p> <p>The full reference for valid selector forms is quite complex, and beyond the scope of this recipe. See the formal selector specification for complete documentation.</p> <p>The following selector patterns should be sufficient to get you started:</p> <ul> <li><code>[:div]</code> Selects all <code>&lt;div&gt;</code> element nodes.</li> <li><code>[:div.sidebar]</code> Selects all <code>&lt;div&gt;</code> element nodes with a CSS class of \"sidebar\".</li> <li><code>[:div#summary]</code> Selects the <code>&lt;div&gt;</code> element with an HTML ID of \"summary\".</li> <li><code>[:p :span]</code> Selects all <code>&lt;span&gt;</code> elements that are descendants of <code>&lt;p&gt;</code> elements.</li> <li><code>[:div.menu :ul :li :span]</code> Selects only <code>&lt;span&gt;</code> elements inside an <code>&lt;li&gt;</code> element inside a <code>&lt;ul&gt;</code> element inside a <code>&lt;div&gt;</code> element with a CSS style of \"menu\".</li> <li><code>[[:div (nth-child 2)]]</code> Selects all <code>&lt;div&gt;</code> elements which are second children of their parent elements. The inner vector denotes a condition, i.e. the matched element must be a <code>&lt;div&gt;</code> and the nth-child predicate must hold true.</li> </ul> <p>Other predicates besides nth-child are available, as well as the ability to define custom predicates. See the Enlive documentation for more details.</p> <p>The range selector is specified a map literal, containing two selectors that inclusively matche all the nodes between the two matched nodes, in document order. The starting node is in key position in the map literal and the ending node is in value position, so the selector {[:#foo] [:#bar]} will match all nodes between nodes with a CSS ID of \"foo\" and a CSS ID of \"bar\".</p> <p>The example in the solution uses a range selector in the defsnippet form to select all the nodes that are part of the same logical blog post, even though they aren\u2019t wrapped in a common parent element.</p>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#getting-the-voting-points","title":"Getting the voting points","text":"<p>Each heading can be voted for, which I believe keeps it on the site longer.  The points and when the article was posted can be pulled out using different selectors.</p> <p>The <code>.td.subtext</code> has several <code>span</code> tags as children and each <code>span</code> tag has a CSS selector, however, those CSS selectors are dynamically generated and therefore random.</p> <p>So the Enlive <code>first-child</code> function is used to get the <code>span</code> content.</p> <p>Then the Enlive <code>text</code> function pulls out all the values from the <code>:content</code> keys in the selected content.</p> <pre><code>(map html/text\n       (html/select\n         website-content-hacker-news\n         [:td.subtext html/first-child]))\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#make-functions-to-get-headings-and-points","title":"Make functions to get headings and points","text":"<p>The headings function</p> <pre><code>(defn headlines\n  \"Headlines of the currently published stories\n\n  Arguments: web address as a string\n  Returns: list of headlines as strings\"\n\n  [website-url]\n\n  (map html/text\n       (html/select\n         #_(website-content website-url)\n         ;; DEV: cached website\n         website-content-hacker-news\n         [:td.title :a])))\n</code></pre> <p>The points function</p> <pre><code>(defn article-scoring\n  \"Points of the currently published stories\n\n  Arguments: web address as a string\n  Returns: headlines in hiccup format \"\n\n  [website-url]\n\n  (map html/text\n       (html/select\n         ;; (website-content website-url)\n         ;; DEV: cached website\n         website-content-hacker-news\n         [:td.subtext html/first-child])))\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#combining-the-results","title":"Combining the results","text":"<p>A function to combine the results of heading and points</p> <pre><code>(defn headlines-and-scoring\n  \"Putting it all together...\"\n  [website-url]\n  (doseq [line (map #(str %1 \" (\" %2 \")\")\n                    (headlines website-url)\n                    (article-scoring website-url))]\n    (println line)))\n</code></pre> <p>This function uses <code>doseq</code> to iterate over each line and print the results to the REPL (or standard out if run as a command line program).  <code>doseq</code> itself returns <code>nil</code>.</p> <p>For each line that is printed, we map an anonymous function over the two collections, one collection from each of our functions <code>headlines</code> and <code>article-scoring</code></p> <p>The anonymous function gets a value from each of the collections and combines them in a string, putting the value from the second collection, <code>article-scoring</code> in round brackets.</p> <pre><code>#(str %1 \" (\" %2 \")\")\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#combining-selectors","title":"Combining selectors","text":"<p>The selectors passed to Enlive's <code>select</code> function can be combined in a Clojure set.</p> <p>So to get both headings and scoring we can use the following set as an arguments</p> <pre><code>#{[:td.title :a] [:td.subtext html/first-child]}\n</code></pre> <p>Then we can combine the prevous <code>headings</code> and <code>article-scoring</code> functions into a single function.</p> <pre><code>(defn headlines-and-scoring []\n  (map html/text\n       (html/select website-content-hacker-news\n                    #{[:td.title :a] [:td.subtext html/first-child]})))\n</code></pre> <p>The results of this function have the headings and scoring interleaved.  Using the Clojure <code>partition</code> function pairs each heading and score</p> <p>The anonymous function is updated to destructure the arguments, so we get a separate heading and score, which is then assembled in the same string form.</p> <pre><code>(defn print-headlines-and-scoring []\n  (doseq [line (map (fn [[h s]] (str h \" (\" s \")\"))\n                    (partition 2 (headlines-and-scoring)))]\n    (println line)))\n</code></pre>"},{"location":"blog/web-scraping-with-clojure---scraping-hacker-news/#summary","title":"Summary","text":"<p>This article only covers the basics of Enilve and more examples will come in future articles.</p> <p> Enlive Tutorial - Swannodette </p> <p> Templating HTML with Enlive </p> <p>Thank you.</p> <p> Practical.li Website </p> <p> Practical.li GitHub Org  practicalli-johnny profile</p> <p> @practicalli@clj.social  @practical_li</p>"},{"location":"blog/archive/2025/","title":"2025","text":""},{"location":"blog/archive/2024/","title":"2024","text":""},{"location":"blog/archive/2023/","title":"2023","text":""},{"location":"blog/archive/2022/","title":"2022","text":""},{"location":"blog/archive/2021/","title":"2021","text":""},{"location":"blog/archive/2020/","title":"2020","text":""},{"location":"blog/archive/2019/","title":"2019","text":""},{"location":"blog/category/documentation/","title":"documentation","text":""},{"location":"blog/category/clojure/","title":"clojure","text":""},{"location":"blog/category/git/","title":"git","text":""},{"location":"blog/category/emacs/","title":"emacs","text":""},{"location":"blog/category/docker/","title":"docker","text":""},{"location":"blog/category/clojure-cli/","title":"clojure-cli","text":""},{"location":"blog/category/community/","title":"community","text":""},{"location":"blog/category/debian/","title":"debian","text":""},{"location":"blog/category/cryogen/","title":"cryogen","text":""},{"location":"blog/page/2/","title":"Practicalli Articles","text":""}]}